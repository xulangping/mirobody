import{r as Ce,g as rm}from"./index-BNskTFw0.js";function om(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const s=Object.getOwnPropertyDescriptor(r,o);s&&Object.defineProperty(e,o,s.get?s:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const C=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,H=globalThis,jt="10.23.0";function Pt(){return xr(H),H}function xr(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||jt,t[jt]=t[jt]||{}}function or(e,t,n=H){const r=n.__SENTRY__=n.__SENTRY__||{},o=r[jt]=r[jt]||{};return o[e]||(o[e]=t())}const da=["debug","info","warn","error","log","assert","trace"],sm="Sentry Logger ",Fo={};function Xt(e){if(!("console"in H))return e();const t=H.console,n={},r=Object.keys(Fo);r.forEach(o=>{const s=Fo[o];n[o]=t[o],t[o]=s});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function im(){pa().enabled=!0}function am(){pa().enabled=!1}function ld(){return pa().enabled}function cm(...e){fa("log",...e)}function um(...e){fa("warn",...e)}function lm(...e){fa("error",...e)}function fa(e,...t){C&&ld()&&Xt(()=>{H.console[e]("".concat(sm,"[").concat(e,"]:"),...t)})}function pa(){return C?or("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const _={enable:im,disable:am,isEnabled:ld,log:cm,warn:um,error:lm},dd=50,gt="?",Oc=/\(error: (.*)\)/,Pc=/captureMessage|captureException/;function fd(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{const s=[],i=n.split("\n");for(let a=r;a<i.length;a++){let c=i[a];c.length>1024&&(c=c.slice(0,1024));const u=Oc.test(c)?c.replace(Oc,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of t){const l=d(u);if(l){s.push(l);break}}if(s.length>=dd+o)break}}return fm(s.slice(o))}}function dm(e){return Array.isArray(e)?fd(...e):e}function fm(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(to(t).function||"")&&t.pop(),t.reverse(),Pc.test(to(t).function||"")&&(t.pop(),Pc.test(to(t).function||"")&&t.pop()),t.slice(0,dd).map(n=>({...n,filename:n.filename||to(t).filename,function:n.function||gt}))}function to(e){return e[e.length-1]||{}}const Vs="<anonymous>";function Ct(e){try{return!e||typeof e!="function"?Vs:e.name||Vs}catch(t){return Vs}}function wi(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch(r){return}}}const Eo={},Lc={};function Qt(e,t){Eo[e]=Eo[e]||[],Eo[e].push(t)}function Zt(e,t){if(!Lc[e]){Lc[e]=!0;try{t()}catch(n){C&&_.error("Error while instrumenting ".concat(e),n)}}}function Ze(e,t){const n=e&&Eo[e];if(n)for(const r of n)try{r(t)}catch(o){C&&_.error("Error while triggering instrumentation handler.\nType: ".concat(e,"\nName: ").concat(Ct(r),"\nError:"),o)}}let Ys=null;function pd(e){const t="error";Qt(t,e),Zt(t,pm)}function pm(){Ys=H.onerror,H.onerror=function(e,t,n,r,o){return Ze("error",{column:r,error:o,line:n,msg:e,url:t}),Ys?Ys.apply(this,arguments):!1},H.onerror.__SENTRY_INSTRUMENTED__=!0}let Ks=null;function hd(e){const t="unhandledrejection";Qt(t,e),Zt(t,hm)}function hm(){Ks=H.onunhandledrejection,H.onunhandledrejection=function(e){return Ze("unhandledrejection",e),Ks?Ks.apply(this,arguments):!0},H.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const md=Object.prototype.toString;function wt(e){switch(md.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return At(e,Error)}}function sr(e,t){return md.call(e)==="[object ".concat(t,"]")}function gd(e){return sr(e,"ErrorEvent")}function Dc(e){return sr(e,"DOMError")}function mm(e){return sr(e,"DOMException")}function st(e){return sr(e,"String")}function gs(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Kt(e){return e===null||gs(e)||typeof e!="object"&&typeof e!="function"}function ht(e){return sr(e,"Object")}function _s(e){return typeof Event<"u"&&At(e,Event)}function gm(e){return typeof Element<"u"&&At(e,Element)}function _m(e){return sr(e,"RegExp")}function vn(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function ym(e){return ht(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function At(e,t){try{return e instanceof t}catch(n){return!1}}function _d(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function yd(e){return typeof Request<"u"&&At(e,Request)}const ha=H,Sm=80;function ze(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let s=0,i=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||Sm;for(;n&&s++<r&&(u=bm(n,d),!(u==="html"||s>1&&i+o.length*c+u.length>=l));)o.push(u),i+=u.length,n=n.parentNode;return o.reverse().join(a)}catch(n){return"<unknown>"}}function bm(e,t){const n=e,r=[];if(!(n!=null&&n.tagName))return"";if(ha.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const o=t!=null&&t.length?t.filter(i=>n.getAttribute(i)).map(i=>[i,n.getAttribute(i)]):null;if(o!=null&&o.length)o.forEach(i=>{r.push("[".concat(i[0],'="').concat(i[1],'"]'))});else{n.id&&r.push("#".concat(n.id));const i=n.className;if(i&&st(i)){const a=i.split(/\s+/);for(const c of a)r.push(".".concat(c))}}const s=["aria-label","type","name","title","alt"];for(const i of s){const a=n.getAttribute(i);a&&r.push("[".concat(i,'="').concat(a,'"]'))}return r.join("")}function Tn(){try{return ha.document.location.href}catch(e){return""}}function Sd(e){if(!ha.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Wn(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:"".concat(e.slice(0,t),"...")}function Js(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let s=Math.min(o+140,r);return s>r-5&&(s=r),s===r&&(o=Math.max(s-140,0)),n=n.slice(o,s),o>0&&(n="'{snip} ".concat(n)),s<r&&(n+=" {snip}"),n}function Bo(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const o=e[r];try{_d(o)?n.push("[VueViewModel]"):n.push(String(o))}catch(s){n.push("[value cannot be serialized]")}}return n.join(t)}function vo(e,t,n=!1){return st(e)?_m(t)?t.test(e):st(t)?n?e===t:e.includes(t):!1:!1}function it(e,t=[],n=!1){return t.some(r=>vo(e,r,n))}function Ne(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const o=n(r);typeof o=="function"&&bd(o,r);try{e[t]=o}catch(s){C&&_.log('Failed to replace method "'.concat(t,'" in object'),e)}}function Ae(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(r){C&&_.log('Failed to add non-enumerable property "'.concat(t,'" to object'),e)}}function bd(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Ae(e,"__sentry_original__",t)}catch(n){}}function ma(e){return e.__sentry_original__}function Ed(e){if(wt(e))return{message:e.message,name:e.name,stack:e.stack,...Fc(e)};if(_s(e)){const t={type:e.type,target:$c(e.target),currentTarget:$c(e.currentTarget),...Fc(e)};return typeof CustomEvent<"u"&&At(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function $c(e){try{return gm(e)?ze(e):Object.prototype.toString.call(e)}catch(t){return"<unknown>"}}function Fc(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Em(e,t=40){const n=Object.keys(Ed(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return Wn(r,t);for(let o=n.length;o>0;o--){const s=n.slice(0,o).join(", ");if(!(s.length>t))return o===n.length?s:Wn(s,t)}return""}function vm(){const e=H;return e.crypto||e.msCrypto}let Xs;function Tm(){return Math.random()*16}function we(e=vm()){try{if(e!=null&&e.randomUUID)return e.randomUUID().replace(/-/g,"")}catch(t){}return Xs||(Xs="10000000100040008000"+1e11),Xs.replace(/[018]/g,t=>(t^(Tm()&15)>>t/4).toString(16))}function vd(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}function on(e){const{message:t,event_id:n}=e;if(t)return t;const r=vd(e);return r?r.type&&r.value?"".concat(r.type,": ").concat(r.value):r.type||r.value||n||"<unknown>":n||"<unknown>"}function ki(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],s=o[0]=o[0]||{};s.value||(s.value=t||""),s.type||(s.type="Error")}function xt(e,t){const n=vd(e);if(!n)return;const r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){const s={...o==null?void 0:o.data,...t.data};n.mechanism.data=s}}function Im(e,t,n=5){if(t.lineno===void 0)return;const r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map(i=>Js(i,0));const s=Math.min(r-1,o);t.context_line=Js(e[s],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map(i=>Js(i,0))}function Bc(e){if(wm(e))return!0;try{Ae(e,"__sentry_captured__",!0)}catch(t){}return!1}function wm(e){try{return e.__sentry_captured__}catch(t){}}const Td=1e3;function In(){return Date.now()/Td}function km(){const{performance:e}=H;if(!(e!=null&&e.now)||!e.timeOrigin)return In;const t=e.timeOrigin;return()=>(t+e.now())/Td}let no;function pe(){return(no!=null?no:no=km())()}let Qs;function Rm(){var d;const{performance:e}=H;if(!(e!=null&&e.now))return[void 0,"none"];const t=3600*1e3,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=o<t,i=(d=e.timing)==null?void 0:d.navigationStart,c=typeof i=="number"?Math.abs(i+n-r):t,u=c<t;return s||u?o<=c?[e.timeOrigin,"timeOrigin"]:[i,"navigationStart"]:[r,"dateNow"]}function Le(){return Qs||(Qs=Rm()),Qs[0]}function Cm(e){const t=pe(),n={sid:we(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>xm(n)};return e&&jn(n,e),n}function jn(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||pe(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:we()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did="".concat(t.did)),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Am(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),jn(e,n)}function xm(e){return{sid:"".concat(e.sid),init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?"".concat(e.did):void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Mr(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=Mr(r[o],t[o],n-1));return r}function _t(){return we()}function kt(){return we().substring(16)}const Ri="_sentrySpan";function Mt(e,t){t?Ae(e,Ri,t):delete e[Ri]}function zn(e){return e[Ri]}const Mm=100;class yt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:_t(),sampleRand:Math.random()}}clone(){const t=new yt;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Mt(t,zn(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&jn(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof yt?n.getScopeData():ht(n)?t:void 0,{tags:o,extra:s,user:i,contexts:a,level:c,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...s},this._contexts={...this._contexts,...a},i&&Object.keys(i).length&&(this._user=i),c&&(this._level=c),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Mt(this,void 0),this._attachments=[],this.setPropagationContext({traceId:_t(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var s;const r=typeof n=="number"?n:Mm;if(r<=0)return this;const o={timestamp:In(),...t,message:t.message?Wn(t.message,2048):t.message};return this._breadcrumbs.push(o),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(s=this._client)==null||s.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:zn(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Mr(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=(n==null?void 0:n.event_id)||we();if(!this._client)return C&&_.warn("No client configured on scope - will not capture exception!"),r;const o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){const o=(r==null?void 0:r.event_id)||we();if(!this._client)return C&&_.warn("No client configured on scope - will not capture message!"),o;const s=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:s,...r,event_id:o},this),o}captureEvent(t,n){const r=(n==null?void 0:n.event_id)||we();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(C&&_.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function Nm(){return or("defaultCurrentScope",()=>new yt)}function Om(){return or("defaultIsolationScope",()=>new yt)}class Pm{constructor(t,n){let r;t?r=t:r=new yt;let o;n?o=n:o=new yt,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(o){throw this._popScope(),o}return vn(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function qn(){const e=Pt(),t=xr(e);return t.stack=t.stack||new Pm(Nm(),Om())}function Lm(e){return qn().withScope(e)}function Dm(e,t){const n=qn();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Uc(e){return qn().withScope(()=>e(qn().getIsolationScope()))}function $m(){return{withIsolationScope:Uc,withScope:Lm,withSetScope:Dm,withSetIsolationScope:(e,t)=>Uc(t),getCurrentScope:()=>qn().getScope(),getIsolationScope:()=>qn().getIsolationScope()}}function en(e){const t=xr(e);return t.acs?t.acs:$m()}function G(){const e=Pt();return en(e).getCurrentScope()}function ke(){const e=Pt();return en(e).getIsolationScope()}function mn(){return or("globalScope",()=>new yt)}function Ye(...e){const t=Pt(),n=en(t);if(e.length===2){const[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function fA(...e){const t=Pt(),n=en(t);if(e.length===2){const[r,o]=e;return r?n.withSetIsolationScope(r,o):n.withIsolationScope(o)}return n.withIsolationScope(e[0])}function N(){return G().getClient()}function Id(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t,s={trace_id:n,span_id:o||kt()};return r&&(s.parent_span_id=r),s}const fe="sentry.source",ga="sentry.sample_rate",wd="sentry.previous_trace_sample_rate",Ie="sentry.op",Q="sentry.origin",vr="sentry.idle_span_finish_reason",Nr="sentry.measurement_unit",Or="sentry.measurement_value",Ci="sentry.custom_span_name",_a="sentry.profile_id",ir="sentry.exclusive_time",Fm="http.request.method",Bm="url.full",Um="sentry.link.type",Hm=0,ya=1,oe=2;function Wm(e){if(e<400&&e>=100)return{code:ya};if(e>=400&&e<500)switch(e){case 401:return{code:oe,message:"unauthenticated"};case 403:return{code:oe,message:"permission_denied"};case 404:return{code:oe,message:"not_found"};case 409:return{code:oe,message:"already_exists"};case 413:return{code:oe,message:"failed_precondition"};case 429:return{code:oe,message:"resource_exhausted"};case 499:return{code:oe,message:"cancelled"};default:return{code:oe,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:oe,message:"unimplemented"};case 503:return{code:oe,message:"unavailable"};case 504:return{code:oe,message:"deadline_exceeded"};default:return{code:oe,message:"internal_error"}}return{code:oe,message:"internal_error"}}function Uo(e,t){e.setAttribute("http.response.status_code",t);const n=Wm(t);n.message!=="unknown_error"&&e.setStatus(n)}const kd="_sentryScope",Rd="_sentryIsolationScope";function jm(e){try{const t=H.WeakRef;if(typeof t=="function")return new t(e)}catch(t){}return e}function zm(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch(t){return}return e}}function qm(e,t,n){e&&(Ae(e,Rd,jm(n)),Ae(e,kd,t))}function Ho(e){const t=e;return{scope:t[kd],isolationScope:zm(t[Rd])}}const Sa="sentry-",Gm=/^sentry-/,Vm=8192;function ba(e){const t=Ym(e);if(!t)return;const n=Object.entries(t).reduce((r,[o,s])=>{if(o.match(Gm)){const i=o.slice(Sa.length);r[i]=s}return r},{});if(Object.keys(n).length>0)return n}function Cd(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,o])=>(o&&(n["".concat(Sa).concat(r)]=o),n),{});return Km(t)}function Ym(e){if(!(!e||!st(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=Hc(n);return Object.entries(r).forEach(([o,s])=>{t[o]=s}),t},{}):Hc(e)}function Hc(e){return e.split(",").map(t=>{const n=t.indexOf("=");if(n===-1)return[];const r=t.slice(0,n),o=t.slice(n+1);return[r,o].map(s=>{try{return decodeURIComponent(s.trim())}catch(i){return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function Km(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{const s="".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r)),i=o===0?s:"".concat(t,",").concat(s);return i.length>Vm?(C&&_.warn("Not adding key: ".concat(n," with val: ").concat(r," to baggage header due to exceeding baggage size limits.")),t):i},"")}const Jm=/^o(\d+)\./,Xm=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Qm(e){return e==="http"||e==="https"}function Lt(e,t=!1){const{host:n,path:r,pass:o,port:s,projectId:i,protocol:a,publicKey:c}=e;return"".concat(a,"://").concat(c).concat(t&&o?":".concat(o):"")+"@".concat(n).concat(s?":".concat(s):"","/").concat(r&&"".concat(r,"/")).concat(i)}function Ad(e){const t=Xm.exec(e);if(!t){Xt(()=>{console.error("Invalid Sentry Dsn: ".concat(e))});return}const[n,r,o="",s="",i="",a=""]=t.slice(1);let c="",u=a;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const l=u.match(/^\d+/);l&&(u=l[0])}return xd({host:s,pass:o,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function xd(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Zm(e){if(!C)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(i=>e[i]?!1:(_.error("Invalid Sentry Dsn: ".concat(i," missing")),!0))?!1:n.match(/^\d+$/)?Qm(r)?t&&isNaN(parseInt(t,10))?(_.error("Invalid Sentry Dsn: Invalid port ".concat(t)),!1):!0:(_.error("Invalid Sentry Dsn: Invalid protocol ".concat(r)),!1):(_.error("Invalid Sentry Dsn: Invalid projectId ".concat(n)),!1)}function eg(e){const t=e.match(Jm);return t==null?void 0:t[1]}function Md(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=eg(n)),r}function Nd(e){const t=typeof e=="string"?Ad(e):xd(e);if(!(!t||!Zm(t)))return t}function gn(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const Od=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function tg(e){if(!e)return;const t=e.match(Od);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Pd(e,t){const n=tg(e),r=ba(t);if(!(n!=null&&n.traceId))return{traceId:_t(),sampleRand:Math.random()};const o=ng(n,r);r&&(r.sample_rand=o.toString());const{traceId:s,parentSpanId:i,parentSampled:a}=n;return{traceId:s,parentSpanId:i,sampled:a,dsc:r||{},sampleRand:o}}function Ld(e=_t(),t=kt(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),"".concat(e,"-").concat(t).concat(r)}function Dd(e=_t(),t=kt(),n){return"00-".concat(e,"-").concat(t,"-").concat(n?"01":"00")}function ng(e,t){const n=gn(t==null?void 0:t.sample_rand);if(n!==void 0)return n;const r=gn(t==null?void 0:t.sample_rate);return r&&(e==null?void 0:e.parentSampled)!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}function rg(e,t){const n=Md(e);return t&&n&&t!==n?(_.log("Won't continue trace because org IDs don't match (incoming baggage: ".concat(t,", SDK options: ").concat(n,")")),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(_.log("Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ".concat(t,", Sentry client: ").concat(n,")")),!1):!0}const $d=0,Ea=1;let Wc=!1;function og(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:s,status:i,origin:a,links:c}=$(e);return{parent_span_id:s,span_id:t,trace_id:n,data:r,op:o,status:i,origin:a,links:c}}function Fd(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:$(e).parent_span_id,s=Ho(e).scope,i=r?(s==null?void 0:s.getPropagationContext().propagationSpanId)||kt():t;return{parent_span_id:o,span_id:i,trace_id:n}}function sg(e){const{traceId:t,spanId:n}=e.spanContext(),r=tn(e);return Ld(t,n,r)}function ig(e){const{traceId:t,spanId:n}=e.spanContext(),r=tn(e);return Dd(t,n,r)}function Bd(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...o},attributes:s})=>({span_id:t,trace_id:n,sampled:r===Ea,attributes:s,...o}))}function ln(e){return typeof e=="number"?jc(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?jc(e.getTime()):pe()}function jc(e){return e>9999999999?e/1e3:e}function $(e){var r;if(cg(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(ag(e)){const{attributes:o,startTime:s,name:i,endTime:a,status:c,links:u}=e,d="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?(r=e.parentSpanContext)==null?void 0:r.spanId:void 0;return{span_id:t,trace_id:n,data:o,description:i,parent_span_id:d,start_timestamp:ln(s),timestamp:ln(a)||void 0,status:Ud(c),op:o[Ie],origin:o[Q],links:Bd(u)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function ag(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function cg(e){return typeof e.getSpanJSON=="function"}function tn(e){const{traceFlags:t}=e.spanContext();return t===Ea}function Ud(e){if(!(!e||e.code===Hm))return e.code===ya?"ok":e.message||"internal_error"}const dn="_sentryChildSpans",Ai="_sentryRootSpan";function Hd(e,t){const n=e[Ai]||e;Ae(t,Ai,n),e[dn]?e[dn].add(t):Ae(e,dn,new Set([t]))}function ug(e,t){e[dn]&&e[dn].delete(t)}function To(e){const t=new Set;function n(r){if(!t.has(r)&&tn(r)){t.add(r);const o=r[dn]?Array.from(r[dn]):[];for(const s of o)n(s)}}return n(e),Array.from(t)}function be(e){return e[Ai]||e}function ye(){const e=Pt(),t=en(e);return t.getActiveSpan?t.getActiveSpan():zn(G())}function xi(){Wc||(Xt(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),Wc=!0)}function pA(e,t){e.updateName(t),e.setAttributes({[fe]:"custom",[Ci]:t})}let zc=!1;function lg(){if(zc)return;function e(){const t=ye(),n=t&&be(t);if(n){const r="internal_error";C&&_.log("[Tracing] Root span: ".concat(r," -> Global error occurred")),n.setStatus({code:oe,message:r})}}e.tag="sentry_tracingErrorCallback",zc=!0,pd(e),hd(e)}function et(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((n=N())==null?void 0:n.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function qc(e){_.log("Ignoring span ".concat(e.op," - ").concat(e.description," because it matches `ignoreSpans`."))}function Wo(e,t){if(!(t!=null&&t.length)||!e.description)return!1;for(const n of t){if(fg(n)){if(vo(e.description,n))return C&&qc(e),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?vo(e.description,n.name):!0,o=n.op?e.op&&vo(e.op,n.op):!0;if(r&&o)return C&&qc(e),!0}return!1}function dg(e,t){const n=t.parent_span_id,r=t.span_id;if(n)for(const o of e)o.parent_span_id===r&&(o.parent_span_id=n)}function fg(e){return typeof e=="string"||e instanceof RegExp}const ys="production",Wd="_frozenDsc";function Io(e,t){Ae(e,Wd,t)}function jd(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||ys,release:n.release,public_key:r,trace_id:e,org_id:Md(t)};return t.emit("createDsc",o),o}function va(e,t){const n=t.getPropagationContext();return n.dsc||jd(n.traceId,e)}function ut(e){var h,m,g,y;const t=N();if(!t)return{};const n=be(e),r=$(n),o=r.data,s=n.spanContext().traceState,i=(m=(h=s==null?void 0:s.get("sentry.sample_rate"))!=null?h:o[ga])!=null?m:o[wd];function a(b){return(typeof i=="number"||typeof i=="string")&&(b.sample_rate="".concat(i)),b}const c=n[Wd];if(c)return a(c);const u=s==null?void 0:s.get("sentry.dsc"),d=u&&ba(u);if(d)return a(d);const l=jd(e.spanContext().traceId,t),f=o[fe],p=r.description;return f!=="url"&&p&&(l.transaction=p),et()&&(l.sampled=String(tn(n)),l.sample_rand=(y=s==null?void 0:s.get("sentry.sample_rand"))!=null?y:(g=Ho(n).scope)==null?void 0:g.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function hA(e){const t=ut(e);return Cd(t)}class Nt{constructor(t={}){this._traceId=t.traceId||_t(),this._spanId=t.spanId||kt()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:$d}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function qe(e,t=100,n=1/0){try{return Mi("",e,t,n)}catch(r){return{ERROR:"**non-serializable** (".concat(r,")")}}}function zd(e,t=3,n=100*1024){const r=qe(e,t);return gg(r)>n?zd(e,t-1,n):r}function Mi(e,t,n=1/0,r=1/0,o=_g()){const[s,i]=o;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=pg(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return Mi("",p,c-1,r,o)}catch(p){}const d=Array.isArray(t)?[]:{};let l=0;const f=Ed(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}const h=f[p];d[p]=Mi(p,h,c-1,r,o),l++}return i(t),d}function pg(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(_d(t))return"[VueViewModel]";if(ym(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return"[".concat(t,"]");if(typeof t=="function")return"[Function: ".concat(Ct(t),"]");if(typeof t=="symbol")return"[".concat(String(t),"]");if(typeof t=="bigint")return"[BigInt: ".concat(String(t),"]");const n=hg(t);return/^HTML(\w*)Element$/.test(n)?"[HTMLElement: ".concat(n,"]"):"[object ".concat(n,"]")}catch(n){return"**non-serializable** (".concat(n,")")}}function hg(e){const t=Object.getPrototypeOf(e);return t!=null&&t.constructor?t.constructor.name:"null prototype"}function mg(e){return~-encodeURI(e).split(/%..|./).length}function gg(e){return mg(JSON.stringify(e))}function _g(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function lt(e,t=[]){return[e,t]}function yg(e,t){const[n,r]=e;return[n,[...r,t]]}function _n(e,t){const n=e[1];for(const r of n){const o=r[0].type;if(t(r,o))return!0}return!1}function Gc(e,t){return _n(e,(n,r)=>t.includes(r))}function jo(e){const t=xr(H);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function Sg(e){const t=xr(H);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function zo(e){const[t,n]=e;let r=JSON.stringify(t);function o(s){typeof r=="string"?r=typeof s=="string"?r+s:[jo(r),s]:r.push(typeof s=="string"?jo(s):s)}for(const s of n){const[i,a]=s;if(o("\n".concat(JSON.stringify(i),"\n")),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch(u){c=JSON.stringify(qe(a))}o(c)}}return typeof r=="string"?r:bg(r)}function bg(e){const t=e.reduce((o,s)=>o+s.length,0),n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}function Eg(e){let t=typeof e=="string"?jo(e):e;function n(i){const a=t.subarray(0,i);return t=t.subarray(i+1),a}function r(){let i=t.indexOf(10);return i<0&&(i=t.length),JSON.parse(Sg(n(i)))}const o=r(),s=[];for(;t.length;){const i=r(),a=typeof i.length=="number"?i.length:void 0;s.push([i,a?n(a):r()])}return[o,s]}function vg(e){return[{type:"span"},e]}function Tg(e){const t=typeof e.data=="string"?jo(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const Ig={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Vc(e){return Ig[e]}function Ss(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function qd(e,t,n,r){var s;const o=(s=e.sdkProcessingMetadata)==null?void 0:s.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Lt(r)},...o&&{trace:o}}}function wg(e,t){var r,o,s,i;if(!t)return e;const n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...((r=e.sdk)==null?void 0:r.integrations)||[],...t.integrations||[]],packages:[...((o=e.sdk)==null?void 0:o.packages)||[],...t.packages||[]],settings:(s=e.sdk)!=null&&s.settings||t.settings?{...(i=e.sdk)==null?void 0:i.settings,...t.settings}:void 0},e}function kg(e,t,n,r){const o=Ss(n),s={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Lt(t)}},i="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return lt(s,[i])}function Rg(e,t,n,r){const o=Ss(n),s=e.type&&e.type!=="replay_event"?e.type:"event";wg(e,n==null?void 0:n.sdk);const i=qd(e,o,r,t);return delete e.sdkProcessingMetadata,lt(i,[[{type:s},e]])}function Cg(e,t){function n(p){return!!p.trace_id&&!!p.public_key}const r=ut(e[0]),o=t==null?void 0:t.getDsn(),s=t==null?void 0:t.getOptions().tunnel,i={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!s&&o&&{dsn:Lt(o)}},{beforeSendSpan:a,ignoreSpans:c}=(t==null?void 0:t.getOptions())||{},u=c!=null&&c.length?e.filter(p=>!Wo($(p),c)):e,d=e.length-u.length;d&&(t==null||t.recordDroppedEvent("before_send","span",d));const l=a?p=>{const h=$(p),m=a(h);return m||(xi(),h)}:$,f=[];for(const p of u){const h=l(p);h&&f.push(vg(h))}return lt(i,f)}function Ag(e){if(!C)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=$(e),{spanId:o}=e.spanContext(),s=tn(e),i=be(e),a=i===e,c="[Tracing] Starting ".concat(s?"sampled":"unsampled"," ").concat(a?"root ":"","span"),u=["op: ".concat(n),"name: ".concat(t),"ID: ".concat(o)];if(r&&u.push("parent ID: ".concat(r)),!a){const{op:d,description:l}=$(i);u.push("root ID: ".concat(i.spanContext().spanId)),d&&u.push("root op: ".concat(d)),l&&u.push("root description: ".concat(l))}_.log("".concat(c,"\n  ").concat(u.join("\n  ")))}function xg(e){if(!C)return;const{description:t="< unknown name >",op:n="< unknown op >"}=$(e),{spanId:r}=e.spanContext(),s=be(e)===e,i='[Tracing] Finishing "'.concat(n,'" ').concat(s?"root ":"",'span "').concat(t,'" with ID ').concat(r);_.log(i)}function Mg(e,t,n,r=ye()){const o=r&&be(r);o&&(C&&_.log("[Measurement] Setting measurement on root span: ".concat(e," = ").concat(t," ").concat(n)),o.addEvent(e,{[Or]:t,[Nr]:n}))}function Yc(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},o=r[Nr],s=r[Or];typeof o=="string"&&typeof s=="number"&&(t[n.name]={value:s,unit:o})}),t}const Kc=1e3;class bs{constructor(t={}){this._traceId=t.traceId||_t(),this._spanId=t.spanId||kt(),this._startTime=t.startTimestamp||pe(),this._links=t.links,this._attributes={},this.setAttributes({[Q]:"manual",[Ie]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?Ea:$d}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=ln(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(fe,"custom"),this}end(t){this._endTime||(this._endTime=ln(t),xg(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Ie],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Ud(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Q],profile_id:this._attributes[_a],exclusive_time:this._attributes[ir],measurements:Yc(this._events),is_segment:this._isStandaloneSpan&&be(this)===this||void 0,segment_id:this._isStandaloneSpan?be(this).spanContext().spanId:void 0,links:Bd(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){C&&_.log("[Tracing] Adding an event to span:",t);const o=Jc(n)?n:r||pe(),s=Jc(n)?{}:n||{},i={name:t,time:ln(o),attributes:s};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=N();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===be(this)))return;if(this._isStandaloneSpan){this._sampled?Og(Cg([this],t)):(C&&_.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Ho(this).scope||G()).captureEvent(r)}_convertSpanToTransaction(){var d;if(!Xc($(this)))return;this._name||(C&&_.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=Ho(this),r=(d=t==null?void 0:t.getScopeData().sdkProcessingMetadata)==null?void 0:d.normalizedRequest;if(this._sampled!==!0)return;const s=To(this).filter(l=>l!==this&&!Ng(l)).map(l=>$(l)).filter(Xc),i=this._attributes[fe];delete this._attributes[Ci],s.forEach(l=>{delete l.data[Ci]});const a={contexts:{trace:og(this)},spans:s.length>Kc?s.sort((l,f)=>l.start_timestamp-f.start_timestamp).slice(0,Kc):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:ut(this)},request:r,...i&&{transaction_info:{source:i}}},c=Yc(this._events);return c&&Object.keys(c).length&&(C&&_.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function Jc(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Xc(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function Ng(e){return e instanceof bs&&e.isStandaloneSpan()}function Og(e){const t=N();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function Es(e,t,n=()=>{},r=()=>{}){let o;try{o=e()}catch(s){throw t(s),n(),s}return Pg(o,t,n,r)}function Pg(e,t,n,r){return vn(e)?e.then(o=>(n(),r(o),o),o=>{throw t(o),n(),o}):(n(),r(e),e)}function Lg(e,t,n){if(!et(e))return[!1];let r,o;typeof e.tracesSampler=="function"?(o=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?o=t.parentSampled:typeof e.tracesSampleRate<"u"&&(o=e.tracesSampleRate,r=!0);const s=gn(o);if(s===void 0)return C&&_.warn("[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ".concat(JSON.stringify(o)," of type ").concat(JSON.stringify(typeof o),".")),[!1];if(!s)return C&&_.log("[Tracing] Discarding transaction because ".concat(typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,s,r];const i=n<s;return i||C&&_.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ".concat(Number(o),")")),[i,s,r]}const qo="__SENTRY_SUPPRESS_TRACING__";function ar(e,t){const n=Pr();if(n.startSpan)return n.startSpan(e,t);const r=Ia(e),{forceTransaction:o,parentSpan:s,scope:i}=e,a=i==null?void 0:i.clone();return Ye(a,()=>Gd(s)(()=>{const u=G(),d=wa(u,s),f=e.onlyIfParent&&!d?new Nt:Ta({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return Mt(u,f),Es(()=>t(f),()=>{const{status:p}=$(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:oe,message:"internal_error"})},()=>{f.end()})}))}function Go(e,t){const n=Pr();if(n.startSpanManual)return n.startSpanManual(e,t);const r=Ia(e),{forceTransaction:o,parentSpan:s,scope:i}=e,a=i==null?void 0:i.clone();return Ye(a,()=>Gd(s)(()=>{const u=G(),d=wa(u,s),f=e.onlyIfParent&&!d?new Nt:Ta({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return Mt(u,f),Es(()=>t(f,()=>f.end()),()=>{const{status:p}=$(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:oe,message:"internal_error"})})}))}function at(e){const t=Pr();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=Ia(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?i=>Ye(e.scope,i):o!==void 0?i=>Gn(o,i):i=>i())(()=>{const i=G(),a=wa(i,o);return e.onlyIfParent&&!a?new Nt:Ta({parentSpan:a,spanArguments:n,forceTransaction:r,scope:i})})}const mA=(e,t)=>{const n=Pt(),r=en(n);if(r.continueTrace)return r.continueTrace(e,t);const{sentryTrace:o,baggage:s}=e,i=N(),a=ba(s);return i&&!rg(i,a==null?void 0:a.org_id)?$g(t):Ye(c=>{const u=Pd(o,s);return c.setPropagationContext(u),t()})};function Gn(e,t){const n=Pr();return n.withActiveSpan?n.withActiveSpan(e,t):Ye(r=>(Mt(r,e||void 0),t(r)))}function Dg(e){const t=Pr();return t.suppressTracing?t.suppressTracing(e):Ye(n=>{n.setSDKProcessingMetadata({[qo]:!0});const r=e();return n.setSDKProcessingMetadata({[qo]:void 0}),r})}function $g(e){return Ye(t=>(t.setPropagationContext({traceId:_t(),sampleRand:Math.random()}),C&&_.log("Starting a new trace with id ".concat(t.getPropagationContext().traceId)),Gn(null,e)))}function Ta({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!et()){const i=new Nt;if(n||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...ut(i)};Io(i,a)}return i}const o=ke();let s;if(e&&!n)s=Fg(e,r,t),Hd(e,s);else if(e){const i=ut(e),{traceId:a,spanId:c}=e.spanContext(),u=tn(e);s=Qc({traceId:a,parentSpanId:c,...t},r,u),Io(s,i)}else{const{traceId:i,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};s=Qc({traceId:i,parentSpanId:c,...t},r,u),a&&Io(s,a)}return Ag(s),qm(s,r,o),s}function Ia(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=ln(e.startTime),delete r.startTime,r}return n}function Pr(){const e=Pt();return en(e)}function Qc(e,t,n){var h,m;const r=N(),o=(r==null?void 0:r.getOptions())||{},{name:s=""}=e,i={spanAttributes:{...e.attributes},spanName:s,parentSampled:n};r==null||r.emit("beforeSampling",i,{decision:!1});const a=(h=i.parentSampled)!=null?h:n,c=i.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[qo]?[!1]:Lg(o,{name:s,parentSampled:a,attributes:c,parentSampleRate:gn((m=u.dsc)==null?void 0:m.sample_rate)},u.sampleRand),p=new bs({...e,attributes:{[fe]:"custom",[ga]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(C&&_.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function Fg(e,t,n){const{spanId:r,traceId:o}=e.spanContext(),s=t.getScopeData().sdkProcessingMetadata[qo]?!1:tn(e),i=s?new bs({...n,parentSpanId:r,traceId:o,sampled:s}):new Nt({traceId:o});Hd(e,i);const a=N();return a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i)),i}function wa(e,t){if(t)return t;if(t===null)return;const n=zn(e);if(!n)return;const r=N();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?be(n):n}function Gd(e){return e!==void 0?t=>Gn(e,t):t=>t()}const wo={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Bg="heartbeatFailed",Ug="idleTimeout",Hg="finalTimeout",Wg="externalFinish";function Vd(e,t={}){const n=new Map;let r=!1,o,s=Wg,i=!t.disableAutoFinish;const a=[],{idleTimeout:c=wo.idleTimeout,finalTimeout:u=wo.finalTimeout,childSpanTimeout:d=wo.childSpanTimeout,beforeSpanEnd:l,trimIdleSpanEndTimestamp:f=!0}=t,p=N();if(!p||!et()){const E=new Nt,R={sample_rate:"0",sampled:"false",...ut(E)};return Io(E,R),E}const h=G(),m=ye(),g=jg(e);g.end=new Proxy(g.end,{apply(E,R,v){if(l&&l(g),R instanceof Nt)return;const[x,...B]=v,k=x||pe(),A=ln(k),U=To(g).filter(O=>O!==g),J=$(g);if(!U.length||!f)return w(A),Reflect.apply(E,R,[A,...B]);const X=p.getOptions().ignoreSpans,F=U==null?void 0:U.reduce((O,V)=>{const se=$(V);return!se.timestamp||X&&Wo(se,X)?O:O?Math.max(O,se.timestamp):se.timestamp},void 0),D=J.start_timestamp,L=Math.min(D?D+u/1e3:1/0,Math.max(D||-1/0,Math.min(A,F||1/0)));return w(L),Reflect.apply(E,R,[L,...B])}});function y(){o&&(clearTimeout(o),o=void 0)}function b(E){y(),o=setTimeout(()=>{!r&&n.size===0&&i&&(s=Ug,g.end(E))},c)}function I(E){o=setTimeout(()=>{!r&&i&&(s=Bg,g.end(E))},d)}function T(E){y(),n.set(E,!0);const R=pe();I(R+d/1e3)}function S(E){if(n.has(E)&&n.delete(E),n.size===0){const R=pe();b(R+c/1e3)}}function w(E){r=!0,n.clear(),a.forEach(A=>A()),Mt(h,m);const R=$(g),{start_timestamp:v}=R;if(!v)return;R.data[vr]||g.setAttribute(vr,s),_.log('[Tracing] Idle span "'.concat(R.op,'" finished'));const B=To(g).filter(A=>A!==g);let k=0;B.forEach(A=>{A.isRecording()&&(A.setStatus({code:oe,message:"cancelled"}),A.end(E),C&&_.log("[Tracing] Cancelling span since span ended early",JSON.stringify(A,void 0,2)));const U=$(A),{timestamp:J=0,start_timestamp:X=0}=U,F=X<=E,D=(u+c)/1e3,L=J-X<=D;if(C){const O=JSON.stringify(A,void 0,2);F?L||_.log("[Tracing] Discarding span since it finished after idle span final timeout",O):_.log("[Tracing] Discarding span since it happened after idle span was finished",O)}(!L||!F)&&(ug(g,A),k++)}),k>0&&g.setAttribute("sentry.idle_span_discarded_spans",k)}return a.push(p.on("spanStart",E=>{if(r||E===g||$(E).timestamp||E instanceof bs&&E.isStandaloneSpan())return;To(g).includes(E)&&T(E.spanContext().spanId)})),a.push(p.on("spanEnd",E=>{r||S(E.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",E=>{E===g&&(i=!0,b(),n.size&&I())})),t.disableAutoFinish||b(),setTimeout(()=>{r||(g.setStatus({code:oe,message:"deadline_exceeded"}),s=Hg,g.end())},u),g}function jg(e){const t=at(e);return Mt(G(),t),C&&_.log("[Tracing] Started span is an idle span"),t}const Zs=0,Zc=1,eu=2;function vs(e){return new Tr(t=>{t(e)})}function ka(e){return new Tr((t,n)=>{n(e)})}class Tr{constructor(t){this._state=Zs,this._handlers=[],this._runExecutor(t)}then(t,n){return new Tr((r,o)=>{this._handlers.push([!1,s=>{if(!t)r(s);else try{r(t(s))}catch(i){o(i)}},s=>{if(!n)o(s);else try{r(n(s))}catch(i){o(i)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Tr((n,r)=>{let o,s;return this.then(i=>{s=!1,o=i,t&&t()},i=>{s=!0,o=i,t&&t()}).then(()=>{if(s){r(o);return}n(o)})})}_executeHandlers(){if(this._state===Zs)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Zc&&n[1](this._value),this._state===eu&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(s,i)=>{if(this._state===Zs){if(vn(i)){i.then(r,o);return}this._state=s,this._value=i,this._executeHandlers()}},r=s=>{n(Zc,s)},o=s=>{n(eu,s)};try{t(r,o)}catch(s){o(s)}}}function zg(e,t,n,r=0){try{const o=Ni(t,n,e,r);return vn(o)?o:vs(o)}catch(o){return ka(o)}}function Ni(e,t,n,r){const o=n[r];if(!e||!o)return e;const s=o({...e},t);return C&&s===null&&_.log('Event processor "'.concat(o.id||"?",'" dropped event')),vn(s)?s.then(i=>Ni(i,t,n,r+1)):Ni(s,t,n,r+1)}function qg(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:s}=t;Gg(e,t),r&&Kg(e,r),Jg(e,n),Vg(e,o),Yg(e,s)}function Vn(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:l,propagationContext:f,transactionName:p,span:h}=t;ro(e,"extra",n),ro(e,"tags",r),ro(e,"user",o),ro(e,"contexts",s),e.sdkProcessingMetadata=Mr(e.sdkProcessingMetadata,a,2),i&&(e.level=i),p&&(e.transactionName=p),h&&(e.span=h),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...f}}function ro(e,t,n){e[t]=Mr(e[t],n,1)}function Gg(e,t){const{extra:n,tags:r,user:o,contexts:s,level:i,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(o).length&&(e.user={...o,...e.user}),Object.keys(s).length&&(e.contexts={...s,...e.contexts}),i&&(e.level=i),a&&e.type!=="transaction"&&(e.transaction=a)}function Vg(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function Yg(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function Kg(e,t){e.contexts={trace:Fd(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:ut(t),...e.sdkProcessingMetadata};const n=be(t),r=$(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function Jg(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let Et,tu,nu,Ft;function Yd(e){const t=H._sentryDebugIds,n=H._debugIds;if(!t&&!n)return{};const r=t?Object.keys(t):[],o=n?Object.keys(n):[];if(Ft&&r.length===tu&&o.length===nu)return Ft;tu=r.length,nu=o.length,Ft={},Et||(Et={});const s=(i,a)=>{for(const c of i){const u=a[c],d=Et==null?void 0:Et[c];if(d&&Ft&&u)Ft[d[0]]=u,Et&&(Et[c]=[d[0],u]);else if(u){const l=e(c);for(let f=l.length-1;f>=0;f--){const p=l[f],h=p==null?void 0:p.filename;if(h&&Ft&&Et){Ft[h]=u,Et[c]=[h,u];break}}}}};return t&&s(r,t),n&&s(o,n),Ft}function Xg(e,t){const n=Yd(e);if(!n)return[];const r=[];for(const o of t)o&&n[o]&&r.push({type:"sourcemap",code_file:o,debug_id:n[o]});return r}function Kd(e,t,n,r,o,s){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||we(),timestamp:t.timestamp||In()},u=n.integrations||e.integrations.map(g=>g.name);Qg(c,e),t_(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&Zg(c,e.stackParser);const d=r_(r,n.captureContext);n.mechanism&&xt(c,n.mechanism);const l=o?o.getEventProcessors():[],f=mn().getScopeData();if(s){const g=s.getScopeData();Vn(f,g)}if(d){const g=d.getScopeData();Vn(f,g)}const p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),qg(c,f);const h=[...l,...f.eventProcessors];return zg(h,c,n).then(g=>(g&&e_(g),typeof i=="number"&&i>0?n_(g,i,a):g))}function Qg(e,t){const{environment:n,release:r,dist:o,maxValueLength:s}=t;e.environment=e.environment||n||ys,!e.release&&r&&(e.release=r),!e.dist&&o&&(e.dist=o);const i=e.request;i!=null&&i.url&&(i.url=s?Wn(i.url,s):i.url)}function Zg(e,t){var r,o;const n=Yd(t);(o=(r=e.exception)==null?void 0:r.values)==null||o.forEach(s=>{var i,a;(a=(i=s.stacktrace)==null?void 0:i.frames)==null||a.forEach(c=>{c.filename&&(c.debug_id=n[c.filename])})})}function e_(e){var r,o;const t={};if((o=(r=e.exception)==null?void 0:r.values)==null||o.forEach(s=>{var i,a;(a=(i=s.stacktrace)==null?void 0:i.frames)==null||a.forEach(c=>{c.debug_id&&(c.abs_path?t[c.abs_path]=c.debug_id:c.filename&&(t[c.filename]=c.debug_id),delete c.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([s,i])=>{n.push({type:"sourcemap",code_file:s,debug_id:i})})}function t_(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function n_(e,t,n){var o,s;if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:qe(i.data,t,n)}}))},...e.user&&{user:qe(e.user,t,n)},...e.contexts&&{contexts:qe(e.contexts,t,n)},...e.extra&&{extra:qe(e.extra,t,n)}};return(o=e.contexts)!=null&&o.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=qe(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>({...i,...i.data&&{data:qe(i.data,t,n)}}))),(s=e.contexts)!=null&&s.flags&&r.contexts&&(r.contexts.flags=qe(e.contexts.flags,3,n)),r}function r_(e,t){if(!t)return e;const n=e?e.clone():new yt;return n.update(t),n}function o_(e){if(e)return s_(e)?{captureContext:e}:a_(e)?{captureContext:e}:e}function s_(e){return e instanceof yt||typeof e=="function"}const i_=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function a_(e){return Object.keys(e).some(t=>i_.includes(t))}function xe(e,t){return G().captureException(e,o_(t))}function Oi(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return G().captureMessage(e,n,r)}function Lr(e,t){return G().captureEvent(e,t)}function Jd(e,t){ke().setContext(e,t)}function gA(e){ke().setExtras(e)}function _A(e,t){ke().setExtra(e,t)}function yA(e){ke().setTags(e)}function SA(e,t){ke().setTag(e,t)}function bA(e){ke().setUser(e)}function c_(){return ke().lastEventId()}async function EA(e){const t=N();return t?t.flush(e):(C&&_.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function vA(e){const t=N();return t?t.close(e):(C&&_.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function TA(){return!!N()}function u_(){const e=N();return(e==null?void 0:e.getOptions().enabled)!==!1&&!!(e!=null&&e.getTransport())}function l_(e){ke().addEventProcessor(e)}function ru(e){const t=ke(),n=G(),{userAgent:r}=H.navigator||{},o=Cm({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),s=t.getSession();return(s==null?void 0:s.status)==="ok"&&jn(s,{status:"exited"}),Xd(),t.setSession(o),o}function Xd(){const e=ke(),n=G().getSession()||e.getSession();n&&Am(n),Qd(),e.setSession()}function Qd(){const e=ke(),t=N(),n=e.getSession();n&&t&&t.captureSession(n)}function ou(e=!1){if(e){Xd();return}Qd()}const d_="7";function Zd(e){const t=e.protocol?"".concat(e.protocol,":"):"",n=e.port?":".concat(e.port):"";return"".concat(t,"//").concat(e.host).concat(n).concat(e.path?"/".concat(e.path):"","/api/")}function f_(e){return"".concat(Zd(e)).concat(e.projectId,"/envelope/")}function p_(e,t){const n={sentry_version:d_};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client="".concat(t.name,"/").concat(t.version)),new URLSearchParams(n).toString()}function ef(e,t,n){return t||"".concat(f_(e),"?").concat(p_(e,n))}function h_(e,t){const n=Nd(e);if(!n)return"";const r="".concat(Zd(n),"embed/error-page/");let o="dsn=".concat(Lt(n));for(const s in t)if(s!=="dsn"&&s!=="onClose")if(s==="user"){const i=t.user;if(!i)continue;i.name&&(o+="&name=".concat(encodeURIComponent(i.name))),i.email&&(o+="&email=".concat(encodeURIComponent(i.email)))}else o+="&".concat(encodeURIComponent(s),"=").concat(encodeURIComponent(t[s]));return"".concat(r,"?").concat(o)}const su=[];function m_(e){const t={};return e.forEach(n=>{const{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function g_(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const o=n(t);r=Array.isArray(o)?o:[o]}else r=t;return m_(r)}function __(e,t){const n={};return t.forEach(r=>{r&&tf(e,r,n)}),n}function iu(e,t){for(const n of t)n!=null&&n.afterAllSetup&&n.afterAllSetup(e)}function tf(e,t,n){if(n[t.name]){C&&_.log("Integration skipped because it was already installed: ".concat(t.name));return}if(n[t.name]=t,su.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),su.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,s)=>r(o,s,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),o=Object.assign((s,i)=>r(s,i,e),{id:t.name});e.addEventProcessor(o)}C&&_.log("Integration installed: ".concat(t.name))}function au(e){const t=N();if(!t){C&&_.warn('Cannot add integration "'.concat(e.name,'" because no SDK Client is available.'));return}t.addIntegration(e)}function nf(e,t){return t?Ye(t,()=>{const n=ye(),r=n?Fd(n):Id(t);return[n?ut(n):va(e,t),r]}):[void 0,void 0]}const y_={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function S_(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function b_(e,t,n,r){const o={};return t!=null&&t.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=Lt(r)),lt(o,[S_(e)])}const E_=100;function v_(e){var t;switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let n="";try{n=(t=JSON.stringify(e))!=null?t:""}catch(r){}return{value:n,type:"string"}}}}function ft(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function T_(e,t){const n=Ca(),r=rf(e);r===void 0?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=E_&&Ra(e,r))}function Vo(e,t=G(),n=T_){var x,B,k;const r=(x=t==null?void 0:t.getClient())!=null?x:N();if(!r){C&&_.warn("No client available to capture log.");return}const{release:o,environment:s,enableLogs:i=!1,beforeSendLog:a}=r.getOptions();if(!i){C&&_.warn("logging option not enabled, log will not be captured.");return}const[,c]=nf(r,t),u={...e.attributes},{user:{id:d,email:l,username:f}}=I_(t);ft(u,"user.id",d,!1),ft(u,"user.email",l,!1),ft(u,"user.name",f,!1),ft(u,"sentry.release",o),ft(u,"sentry.environment",s);const{name:p,version:h}=(k=(B=r.getSdkMetadata())==null?void 0:B.sdk)!=null?k:{};ft(u,"sentry.sdk.name",p),ft(u,"sentry.sdk.version",h);const m=r.getIntegrationByName("Replay"),g=m==null?void 0:m.getReplayId(!0);ft(u,"sentry.replay_id",g),g&&(m==null?void 0:m.getRecordingMode())==="buffer"&&ft(u,"sentry._internal.replay_is_buffering",!0);const y=e.message;if(gs(y)){const{__sentry_template_string__:A,__sentry_template_values__:U=[]}=y;U!=null&&U.length&&(u["sentry.message.template"]=A),U.forEach((J,X)=>{u["sentry.message.parameter.".concat(X)]=J})}const b=zn(t);ft(u,"sentry.trace.parent_span_id",b==null?void 0:b.spanContext().spanId);const I={...e,attributes:u};r.emit("beforeCaptureLog",I);const T=a?Xt(()=>a(I)):I;if(!T){r.recordDroppedEvent("before_send","log_item",1),C&&_.warn("beforeSendLog returned null, log will not be captured.");return}const{level:S,message:w,attributes:E={},severityNumber:R}=T,v={timestamp:pe(),level:S,body:w,trace_id:c==null?void 0:c.trace_id,severity_number:R!=null?R:y_[S],attributes:Object.keys(E).reduce((A,U)=>(A[U]=v_(E[U]),A),{})};n(r,v),r.emit("afterCaptureLog",T)}function Ra(e,t){var s;const n=(s=t!=null?t:rf(e))!=null?s:[];if(n.length===0)return;const r=e.getOptions(),o=b_(n,r._metadata,r.tunnel,e.getDsn());Ca().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(o)}function rf(e){return Ca().get(e)}function I_(e){const t=mn().getScopeData();return Vn(t,ke().getScopeData()),Vn(t,e.getScopeData()),t}function Ca(){return or("clientToLogBufferMap",()=>new WeakMap)}function w_(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function k_(e,t,n,r){const o={};return t!=null&&t.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=Lt(r)),lt(o,[w_(e)])}const R_=1e3;function C_(e){var t;switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let n="";try{n=(t=JSON.stringify(e))!=null?t:""}catch(r){}return{value:n,type:"string"}}}}function vt(e,t,n,r=!0){n&&(r||!(t in e))&&(e[t]=n)}function A_(e,t){const n=xa(),r=of(e);r===void 0?n.set(e,[t]):(n.set(e,[...r,t]),r.length>=R_&&Aa(e,r))}function x_(e,t){var R,v,x,B,k;const n=(R=t==null?void 0:t.scope)!=null?R:G(),r=(v=t==null?void 0:t.captureSerializedMetric)!=null?v:A_,o=(x=n==null?void 0:n.getClient())!=null?x:N();if(!o){C&&_.warn("No client available to capture metric.");return}const{release:s,environment:i,_experiments:a}=o.getOptions();if(!(a!=null&&a.enableMetrics)){C&&_.warn("metrics option not enabled, metric will not be captured.");return}const[,c]=nf(o,n),u={...e.attributes},{user:{id:d,email:l,username:f}}=M_(n);vt(u,"user.id",d,!1),vt(u,"user.email",l,!1),vt(u,"user.name",f,!1),vt(u,"sentry.release",s),vt(u,"sentry.environment",i);const{name:p,version:h}=(k=(B=o.getSdkMetadata())==null?void 0:B.sdk)!=null?k:{};vt(u,"sentry.sdk.name",p),vt(u,"sentry.sdk.version",h);const m=o.getIntegrationByName("Replay"),g=m==null?void 0:m.getReplayId(!0);vt(u,"sentry.replay_id",g),g&&(m==null?void 0:m.getRecordingMode())==="buffer"&&vt(u,"sentry._internal.replay_is_buffering",!0);const y={...e,attributes:u},b=a!=null&&a.beforeSendMetric?a.beforeSendMetric(y):y;if(!b){C&&_.log("`beforeSendMetric` returned `null`, will not send metric.");return}const I={};for(const A in b.attributes)b.attributes[A]!==void 0&&(I[A]=C_(b.attributes[A]));const T=zn(n),S=T?T.spanContext().traceId:c==null?void 0:c.trace_id,w=T?T.spanContext().spanId:void 0,E={timestamp:pe(),trace_id:S,span_id:w,name:b.name,type:b.type,unit:b.unit,value:b.value,attributes:I};C&&_.log("[Metric]",E),r(o,E),o.emit("afterCaptureMetric",y)}function Aa(e,t){var s;const n=(s=t!=null?t:of(e))!=null?s:[];if(n.length===0)return;const r=e.getOptions(),o=k_(n,r._metadata,r.tunnel,e.getDsn());xa().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(o)}function of(e){return xa().get(e)}function M_(e){const t=mn().getScopeData();return Vn(t,ke().getScopeData()),Vn(t,e.getScopeData()),t}function xa(){return or("clientToMetricBufferMap",()=>new WeakMap)}function N_(e,t,n){const r=[{type:"client_report"},{timestamp:In(),discarded_events:e}];return lt(t?{dsn:t}:{},[r])}function sf(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n!=null&&n.value&&(t.push(n.value),n.type&&t.push("".concat(n.type,": ").concat(n.value)))}catch(n){}return t}function O_(e){var c,u,d;const{trace_id:t,parent_span_id:n,span_id:r,status:o,origin:s,data:i,op:a}=(u=(c=e.contexts)==null?void 0:c.trace)!=null?u:{};return{data:i!=null?i:{},description:e.transaction,op:a,parent_span_id:n,span_id:r!=null?r:"",start_timestamp:(d=e.start_timestamp)!=null?d:0,status:o,timestamp:e.timestamp,trace_id:t!=null?t:"",origin:s,profile_id:i==null?void 0:i[_a],exclusive_time:i==null?void 0:i[ir],measurements:e.measurements,is_segment:!0}}function P_(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[_a]:e.profile_id},...e.exclusive_time&&{[ir]:e.exclusive_time}}}},measurements:e.measurements}}const cu="Not capturing exception because it's already been captured.",uu="Discarded session because of missing or non-string release",af=Symbol.for("SentryInternalError"),cf=Symbol.for("SentryDoNotSendEventError"),L_=5e3;function ko(e){return{message:e,[af]:!0}}function ei(e){return{message:e,[cf]:!0}}function lu(e){return!!e&&typeof e=="object"&&af in e}function du(e){return!!e&&typeof e=="object"&&cf in e}function fu(e,t,n,r,o){let s=0,i;e.on(n,()=>{s=0,clearTimeout(i)}),e.on(t,a=>{s+=r(a),s>=8e5?o(e):(clearTimeout(i),i=setTimeout(()=>{o(e)},L_))}),e.on("flush",()=>{o(e)})}class D_{constructor(t){var n;if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Nd(t.dsn):C&&_.warn("No DSN provided, client will not send events."),this._dsn){const r=ef(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:r})}this._options.enableLogs&&fu(this,"afterCaptureLog","flushLogs",U_,Ra),(n=this._options._experiments)!=null&&n.enableMetrics&&fu(this,"afterCaptureMetric","flushMetrics",B_,Aa)}captureException(t,n,r){const o=we();if(Bc(t))return C&&_.log(cu),o;const s={event_id:o,...n};return this._process(this.eventFromException(t,s).then(i=>this._captureEvent(i,s,r))),s.event_id}captureMessage(t,n,r,o){const s={event_id:we(),...r},i=gs(t)?t:String(t),a=Kt(t)?this.eventFromMessage(i,n,s):this.eventFromException(t,s);return this._process(a.then(c=>this._captureEvent(c,s,o))),s.event_id}captureEvent(t,n,r){const o=we();if(n!=null&&n.originalException&&Bc(n.originalException))return C&&_.log(cu),o;const s={event_id:o,...n},i=t.sdkProcessingMetadata||{},a=i.capturedSpanScope,c=i.capturedSpanIsolationScope;return this._process(this._captureEvent(t,s,a||r,c)),s.event_id}captureSession(t){this.sendSession(t),jn(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(t),o=await n.flush(t);return r&&o}async close(t){const n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];tf(this,t,this._integrations),n||iu(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Rg(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of n.attachments||[])r=yg(r,Tg(o));this.sendEnvelope(r).then(o=>this.emit("afterSendEvent",t,o))}sendSession(t){const{release:n,environment:r=ys}=this._options;if("aggregates"in t){const s=t.attrs||{};if(!s.release&&!n){C&&_.warn(uu);return}s.release=s.release||n,s.environment=s.environment||r,t.attrs=s}else{if(!t.release&&!n){C&&_.warn(uu);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const o=kg(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(o)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const o="".concat(t,":").concat(n);C&&_.log('Recording outcome: "'.concat(o,'"').concat(r>1?" (".concat(r," times)"):"")),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||new Set,o=(...s)=>n(...s);return r.add(o),()=>{r.delete(o)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(o=>o(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return C&&_.error("Error while sending envelope:",n),{}}return C&&_.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=__(this,t),iu(this,t)}_updateSessionFromEvent(t,n){var c;let r=n.level==="fatal",o=!1;const s=(c=n.exception)==null?void 0:c.values;if(s){o=!0;for(const u of s){const d=u.mechanism;if((d==null?void 0:d.handled)===!1){r=!0;break}}}const i=t.status==="ok";(i&&t.errors===0||i&&r)&&(jn(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o){const s=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&(i!=null&&i.length)&&(n.integrations=i),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),Kd(s,t,n,r,this,o).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Id(r),...a.contexts};const c=va(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=G(),o=ke()){return C&&Pi(t)&&_.log("Captured error event `".concat(sf(t)[0]||"<unknown>","`")),this._processEvent(t,n,r,o).then(s=>s.event_id,s=>{C&&(du(s)?_.log(s.message):lu(s)?_.warn(s.message):_.warn(s))})}_processEvent(t,n,r,o){const s=this.getOptions(),{sampleRate:i}=s,a=uf(t),c=Pi(t),u=t.type||"error",d="before send for type `".concat(u,"`"),l=typeof i>"u"?void 0:gn(i);if(c&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),ka(ei("Discarding event because it's not included in the random sample (sampling rate = ".concat(i,")")));const f=u==="replay_event"?"replay":u;return this._prepareEvent(t,n,r,o).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),ei("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const m=F_(this,s,p,n);return $_(m,d)}).then(p=>{var g;if(p===null){if(this.recordDroppedEvent("before_send",f),a){const b=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",b)}throw ei("".concat(d," returned `null`, will not send event."))}const h=r.getSession()||o.getSession();if(c&&h&&this._updateSessionFromEvent(h,p),a){const y=((g=p.sdkProcessingMetadata)==null?void 0:g.spanCountBeforeProcessing)||0,b=p.spans?p.spans.length:0,I=y-b;I>0&&this.recordDroppedEvent("before_send","span",I)}const m=p.transaction_info;if(a&&m&&p.transaction!==t.transaction){const y="custom";p.transaction_info={...m,source:y}}return this.sendEvent(p,n),p}).then(null,p=>{throw du(p)||lu(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),ko("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ".concat(p)))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[o,s]=n.split(":");return{reason:o,category:s,quantity:r}})}_flushOutcomes(){C&&_.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){C&&_.log("No outcomes to send");return}if(!this._dsn){C&&_.log("No dsn provided, will not send outcomes");return}C&&_.log("Sending outcomes:",t);const n=N_(t,this._options.tunnel&&Lt(this._dsn));this.sendEnvelope(n)}}function $_(e,t){const n="".concat(t," must return `null` or a valid event.");if(vn(e))return e.then(r=>{if(!ht(r)&&r!==null)throw ko(n);return r},r=>{throw ko("".concat(t," rejected with ").concat(r))});if(!ht(e)&&e!==null)throw ko(n);return e}function F_(e,t,n,r){const{beforeSend:o,beforeSendTransaction:s,beforeSendSpan:i,ignoreSpans:a}=t;let c=n;if(Pi(c)&&o)return o(c,r);if(uf(c)){if(i||a){const u=O_(c);if(a!=null&&a.length&&Wo(u,a))return null;if(i){const d=i(u);d?c=Mr(n,P_(d)):xi()}if(c.spans){const d=[],l=c.spans;for(const p of l){if(a!=null&&a.length&&Wo(p,a)){dg(l,p);continue}if(i){const h=i(p);h?d.push(h):(xi(),d.push(p))}else d.push(p)}const f=c.spans.length-d.length;f&&e.recordDroppedEvent("before_send","span",f),c.spans=d}}if(s){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return s(c,r)}}return c}function Pi(e){return e.type===void 0}function uf(e){return e.type==="transaction"}function B_(e){let t=0;return e.name&&(t+=e.name.length*2),typeof e.value=="string"?t+=e.value.length*2:t+=8,t+lf(e.attributes)}function U_(e){let t=0;return e.message&&(t+=e.message.length*2),t+lf(e.attributes)}function lf(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*pu(n[0]):Kt(n)?t+=pu(n):t+=100}),t}function pu(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function H_(e,t){t.debug===!0&&(C?_.enable():Xt(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),G().update(t.initialScope);const r=new e(t);return W_(r),r.init(),r}function W_(e){G().setClient(e)}const df=Symbol.for("SentryBufferFullError");function ff(e=100){const t=new Set;function n(){return t.size<e}function r(i){t.delete(i)}function o(i){if(!n())return ka(df);const a=i();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function s(i){if(!t.size)return vs(!0);const a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!i)return a;const c=[a,new Promise(u=>setTimeout(()=>u(!1),i))];return Promise.race(c)}return{get $(){return Array.from(t)},add:o,drain:s}}const j_=60*1e3;function pf(e,t=Date.now()){const n=parseInt("".concat(e),10);if(!isNaN(n))return n*1e3;const r=Date.parse("".concat(e));return isNaN(r)?j_:r-t}function z_(e,t){return e[t]||e.all||0}function hf(e,t,n=Date.now()){return z_(e,t)>n}function mf(e,{statusCode:t,headers:n},r=Date.now()){const o={...e},s=n==null?void 0:n["x-sentry-rate-limits"],i=n==null?void 0:n["retry-after"];if(s)for(const a of s.trim().split(",")){const[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)o.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(o[p]=r+f):o[p]=r+f}else i?o.all=r+pf(i,r):t===429&&(o.all=r+60*1e3);return o}const q_=64;function G_(e,t,n=ff(e.bufferSize||q_)){let r={};const o=i=>n.drain(i);function s(i){const a=[];if(_n(i,(l,f)=>{const p=Vc(f);hf(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):a.push(l)}),a.length===0)return Promise.resolve({});const c=lt(i[0],a),u=l=>{_n(c,(f,p)=>{e.recordDroppedEvent(l,Vc(p))})},d=()=>t({body:zo(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&C&&_.warn("Sentry responded with status code ".concat(l.statusCode," to sent event.")),r=mf(r,l),l),l=>{throw u("network_error"),C&&_.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===df)return C&&_.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:s,flush:o}}const ti=100,ni=5e3,V_=36e5;function Y_(e){function t(...n){C&&_.log("[Offline]:",...n)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const o=n.createStore(n);let s=ni,i;function a(l,f,p){return Gc(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,f,p):!0}function c(l){i&&clearTimeout(i),i=setTimeout(async()=>{i=void 0;const f=await o.shift();f&&(t("Attempting to send previously queued event"),f[0].sent_at=new Date().toISOString(),d(f,!0).catch(p=>{t("Failed to retry sending",p)}))},l),typeof i!="number"&&i.unref&&i.unref()}function u(){i||(c(s),s=Math.min(s*2,V_))}async function d(l,f=!1){var p,h;if(!f&&Gc(l,["replay_event","replay_recording"]))return await o.push(l),c(ti),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const m=await r.send(l);let g=ti;if(m){if((p=m.headers)!=null&&p["retry-after"])g=pf(m.headers["retry-after"]);else if((h=m.headers)!=null&&h["x-sentry-rate-limits"])g=6e4;else if((m.statusCode||0)>=400)return m}return c(g),s=ni,m}catch(m){if(await a(l,m,s))return f?await o.unshift(l):await o.push(l),u(),t("Error sending. Event queued.",m),{};throw m}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(s=ni,c(ti)),r.flush(l))}}}function gf(e,t){let n;return _n(e,(r,o)=>(t.includes(o)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function K_(e,t){return n=>{const r=e(n);return{...r,send:async o=>{const s=gf(o,["event","transaction","profile","replay_event"]);return s&&(s.release=t),r.send(o)}}}}function J_(e,t){return lt(t?{...e[0],dsn:t}:e[0],e[1])}function IA(e,t){return n=>{const r=e(n),o=new Map;function s(c,u){const d=u?"".concat(c,":").concat(u):c;let l=o.get(d);if(!l){const f=Ad(c);if(!f)return;const p=ef(f,n.tunnel);l=u?K_(e,u)({...n,url:p}):e({...n,url:p}),o.set(d,l)}return[c,l]}async function i(c){function u(p){const h=p!=null&&p.length?p:["event"];return gf(c,h)}const d=t({envelope:c,getEvent:u}).map(p=>typeof p=="string"?s(p,void 0):s(p.dsn,p.release)).filter(p=>!!p),l=d.length?d:[["",r]];return(await Promise.all(l.map(([p,h])=>h.send(J_(c,p)))))[0]}async function a(c){const u=[...o.values(),r];return(await Promise.all(u.map(l=>l.flush(c)))).every(l=>l)}return{send:i,flush:a}}}const X_="thismessage:/";function Ma(e){return"isRelative"in e}function Na(e,t){const n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=n?X_:void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const o=new URL(e,r);return n?{isRelative:n,pathname:o.pathname,search:o.search,hash:o.hash}:o}catch(o){}}function Q_(e){if(Ma(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function fn(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function _f(e){return e.split(/[?#]/,1)[0]}function yf(e,t){const n=t==null?void 0:t.getDsn(),r=t==null?void 0:t.getOptions().tunnel;return ey(e,n)||Z_(e,r)}function Z_(e,t){return t?hu(e)===hu(t):!1}function ey(e,t){const n=Na(e);return!n||Ma(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function hu(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function ty(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const ny=ty;function ry(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Sf(e,t,n=[t],r="npm"){const o=e._metadata||{};o.sdk||(o.sdk={name:"sentry.javascript.".concat(t),packages:n.map(s=>({name:"".concat(r,":@sentry/").concat(s),version:jt})),version:jt}),e._metadata=o}function bf(e={}){const t=e.client||N();if(!u_()||!t)return{};const n=Pt(),r=en(n);if(r.getTraceData)return r.getTraceData(e);const o=e.scope||G(),s=e.span||ye(),i=s?sg(s):oy(o),a=s?ut(s):va(t,o),c=Cd(a);if(!Od.test(i))return _.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const d={"sentry-trace":i,baggage:c};if(e.propagateTraceparent){const l=s?ig(s):sy(o);l&&(d.traceparent=l)}return d}function oy(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Ld(t,r,n)}function sy(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Dd(t,r,n)}function iy(e,t,n){let r,o,s;const i=n!=null&&n.maxWait?Math.max(n.maxWait,t):0,a=(n==null?void 0:n.setTimeoutImpl)||setTimeout;function c(){return u(),r=e(),r}function u(){o!==void 0&&clearTimeout(o),s!==void 0&&clearTimeout(s),o=s=void 0}function d(){return o!==void 0||s!==void 0?c():r}function l(){return o&&clearTimeout(o),o=a(c,t),i&&s===void 0&&(s=a(c,i)),r}return l.cancel=u,l.flush=d,l}const ay=100;function St(e,t){const n=N(),r=ke();if(!n)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:s=ay}=n.getOptions();if(s<=0)return;const a={timestamp:In(),...e},c=o?Xt(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,s))}let mu;const cy="FunctionToString",gu=new WeakMap,uy=(()=>({name:cy,setupOnce(){mu=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=ma(this),n=gu.has(N())&&t!==void 0?t:this;return mu.apply(n,e)}}catch(e){}},setup(e){gu.set(e,!0)}})),ly=uy,dy=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],fy="EventFilters",py=(e={})=>{let t;return{name:fy,setup(n){const r=n.getOptions();t=_u(e,r)},processEvent(n,r,o){if(!t){const s=o.getOptions();t=_u(e,s)}return my(n,t)?null:n}}},hy=((e={})=>({...py(e),name:"InboundFilters"}));function _u(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:dy],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function my(e,t){if(e.type){if(e.type==="transaction"&&_y(e,t.ignoreTransactions))return C&&_.warn("Event dropped due to being matched by `ignoreTransactions` option.\nEvent: ".concat(on(e))),!0}else{if(gy(e,t.ignoreErrors))return C&&_.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: ".concat(on(e))),!0;if(Ey(e))return C&&_.warn("Event dropped due to not having an error message, error type or stacktrace.\nEvent: ".concat(on(e))),!0;if(yy(e,t.denyUrls))return C&&_.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: ".concat(on(e),".\nUrl: ").concat(Yo(e))),!0;if(!Sy(e,t.allowUrls))return C&&_.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: ".concat(on(e),".\nUrl: ").concat(Yo(e))),!0}return!1}function gy(e,t){return t!=null&&t.length?sf(e).some(n=>it(n,t)):!1}function _y(e,t){if(!(t!=null&&t.length))return!1;const n=e.transaction;return n?it(n,t):!1}function yy(e,t){if(!(t!=null&&t.length))return!1;const n=Yo(e);return n?it(n,t):!1}function Sy(e,t){if(!(t!=null&&t.length))return!0;const n=Yo(e);return n?it(n,t):!0}function by(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Yo(e){var t,n,r;try{const o=[...(n=(t=e.exception)==null?void 0:t.values)!=null?n:[]].reverse().find(i=>{var a,c,u;return((a=i.mechanism)==null?void 0:a.parent_id)===void 0&&((u=(c=i.stacktrace)==null?void 0:c.frames)==null?void 0:u.length)}),s=(r=o==null?void 0:o.stacktrace)==null?void 0:r.frames;return s?by(s):null}catch(o){return C&&_.error("Cannot extract url for event ".concat(on(e))),null}}function Ey(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)!=null&&n.length?!e.message&&!e.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value):!1}function vy(e,t,n,r,o,s){var a;if(!((a=o.exception)!=null&&a.values)||!s||!At(s.originalException,Error))return;const i=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;i&&(o.exception.values=Li(e,t,r,s.originalException,n,o.exception.values,i,0))}function Li(e,t,n,r,o,s,i,a){if(s.length>=n+1)return s;let c=[...s];if(At(r[o],Error)){yu(i,a);const u=e(t,r[o]),d=c.length;Su(u,o,d,a),c=Li(e,t,n,r[o],o,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(At(u,Error)){yu(i,a);const l=e(t,u),f=c.length;Su(l,"errors[".concat(d,"]"),f,a),c=Li(e,t,n,u,o,[l,...c],l,f)}}),c}function yu(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Su(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const Ef=new Map,bu=new Set;function Ty(e){if(H._sentryModuleMetadata)for(const t of Object.keys(H._sentryModuleMetadata)){const n=H._sentryModuleMetadata[t];if(bu.has(t))continue;bu.add(t);const r=e(t);for(const o of r.reverse())if(o.filename){Ef.set(o.filename,n);break}}}function Iy(e,t){return Ty(e),Ef.get(t)}function vf(e,t){var n,r;(r=(n=t.exception)==null?void 0:n.values)==null||r.forEach(o=>{var s,i;(i=(s=o.stacktrace)==null?void 0:s.frames)==null||i.forEach(a=>{if(!a.filename||a.module_metadata)return;const c=Iy(e,a.filename);c&&(a.module_metadata=c)})})}function Tf(e){var t,n;(n=(t=e.exception)==null?void 0:t.values)==null||n.forEach(r=>{var o,s;(s=(o=r.stacktrace)==null?void 0:o.frames)==null||s.forEach(i=>{delete i.module_metadata})})}const wA=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{_n(t,(n,r)=>{if(r==="event"){const o=Array.isArray(n)?n[1]:void 0;o&&(Tf(o),n[1]=o)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const n=e.getOptions().stackParser;vf(n,t)})}});function Oa(e){const t="console";Qt(t,e),Zt(t,wy)}function wy(){"console"in H&&da.forEach(function(e){e in H.console&&Ne(H.console,e,function(t){return Fo[e]=t,function(...n){Ze("console",{args:n,level:e});const o=Fo[e];o==null||o.apply(H.console,n)}})})}function Pa(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const ky="CaptureConsole",Ry=((e={})=>{var r;const t=e.levels||da,n=(r=e.handled)!=null?r:!0;return{name:ky,setup(o){"console"in H&&Oa(({args:s,level:i})=>{N()!==o||!t.includes(i)||Cy(s,i,n)})}}}),kA=Ry;function Cy(e,t,n){const r={level:Pa(t),extra:{arguments:e}};Ye(o=>{if(o.addEventProcessor(a=>(a.logger="console",xt(a,{handled:n,type:"auto.core.capture_console"}),a)),t==="assert"){if(!e[0]){const a="Assertion failed: ".concat(Bo(e.slice(1)," ")||"console.assert");o.setExtra("arguments",e.slice(1)),Oi(a,r)}return}const s=e.find(a=>a instanceof Error);if(s){xe(s,r);return}const i=Bo(e," ");Oi(i,r)})}const Ay="Dedupe",xy=(()=>{let e;return{name:Ay,processEvent(t){if(t.type)return t;try{if(Ny(t,e))return C&&_.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(n){}return e=t}}}),My=xy;function Ny(e,t){return t?!!(Oy(e,t)||Py(e,t)):!1}function Oy(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!wf(e,t)||!If(e,t))}function Py(e,t){const n=Eu(t),r=Eu(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!wf(e,t)||!If(e,t))}function If(e,t){let n=wi(e),r=wi(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){const s=r[o],i=n[o];if(s.filename!==i.filename||s.lineno!==i.lineno||s.colno!==i.colno||s.function!==i.function)return!1}return!0}function wf(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch(o){return!1}}function Eu(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}const Ly="ExtraErrorData",Dy=((e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:Ly,processEvent(r,o,s){const{maxValueLength:i}=s.getOptions();return $y(r,o,t,n,i)}}}),RA=Dy;function $y(e,t={},n,r,o){if(!t.originalException||!wt(t.originalException))return e;const s=t.originalException.name||t.originalException.constructor.name,i=kf(t.originalException,r,o);if(i){const a={...e.contexts},c=qe(i,n);return ht(c)&&(Ae(c,"__sentry_skip_normalization__",!0),a[s]=c),{...e,contexts:a}}return e}function kf(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(const s of Object.keys(e)){if(r.indexOf(s)!==-1)continue;const i=e[s];o[s]=wt(i)||typeof i=="string"?n?Wn("".concat(i),n):"".concat(i):i}if(t&&e.cause!==void 0)if(wt(e.cause)){const s=e.cause.name||e.cause.constructor.name;o.cause={[s]:kf(e.cause,!1,n)}}else o.cause=e.cause;if(typeof e.toJSON=="function"){const s=e.toJSON();for(const i of Object.keys(s)){const a=s[i];o[i]=wt(a)?a.toString():a}}return o}catch(r){C&&_.error("Unable to extract extra data from the Error object:",r)}return null}function Fy(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const o=e[r];o==="."?e.splice(r,1):o===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const By=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Uy(e){const t=e.length>1024?"<truncated>".concat(e.slice(-1024)):e,n=By.exec(t);return n?n.slice(1):[]}function vu(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const o=r>=0?e[r]:"/";o&&(t="".concat(o,"/").concat(t),n=o.charAt(0)==="/")}return t=Fy(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function Tu(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function Hy(e,t){e=vu(e).slice(1),t=vu(t).slice(1);const n=Tu(e.split("/")),r=Tu(t.split("/")),o=Math.min(n.length,r.length);let s=o;for(let a=0;a<o;a++)if(n[a]!==r[a]){s=a;break}let i=[];for(let a=s;a<n.length;a++)i.push("..");return i=i.concat(r.slice(s)),i.join("/")}function Wy(e,t){return Uy(e)[2]||""}const jy="RewriteFrames",CA=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in H&&!!H.window,o=e.iteratee||zy({isBrowser:r,root:t,prefix:n});function s(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:i(c.stacktrace)}}))}}}catch(c){return a}}function i(a){var c;return{...a,frames:(c=a==null?void 0:a.frames)==null?void 0:c.map(u=>o(u))}}return{name:jy,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=s(c)),c}}};function zy({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),s=/^\//.test(r.filename);if(e){if(t){const i=r.filename;i.indexOf(t)===0&&(r.filename=i.replace(t,n))}}else if(o||s){const i=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?Hy(t,i):Wy(i);r.filename="".concat(n).concat(a)}return r}}const qy=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],Gy=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],Vy={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Rf=["select","insert","upsert","update","delete"];function Ts(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch(t){}}function Is(e){try{return e.__SENTRY_INSTRUMENTED__}catch(t){return!1}}function Yy(e,t={}){var n;switch(e){case"GET":return"select";case"POST":return(n=t.Prefer)!=null&&n.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function Ky(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return"select(".concat(t,")");if(e==="or"||e.endsWith(".or"))return"".concat(e).concat(t);const[n,...r]=t.split(".");let o;return n!=null&&n.startsWith("fts")?o="textSearch":n!=null&&n.startsWith("plfts")?o="textSearch[plain]":n!=null&&n.startsWith("phfts")?o="textSearch[phrase]":n!=null&&n.startsWith("wfts")?o="textSearch[websearch]":o=n&&Vy[n]||"filter","".concat(o,"(").concat(e,", ").concat(r.join("."),")")}function Iu(e,t=!1){return new Proxy(e,{apply(n,r,o){return ar({name:"auth ".concat(t?"(admin) ":"").concat(e.name),attributes:{[Q]:"auto.db.supabase",[Ie]:"db","db.system":"postgresql","db.operation":"auth.".concat(t?"admin.":"").concat(e.name)}},s=>Reflect.apply(n,r,o).then(i=>(i&&typeof i=="object"&&"error"in i&&i.error?(s.setStatus({code:oe}),xe(i.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):s.setStatus({code:ya}),s.end(),i)).catch(i=>{throw s.setStatus({code:oe}),s.end(),xe(i,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),i}).then(...o))}})}function Jy(e){const t=e.auth;if(!(!t||Is(e.auth))){for(const n of qy){const r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=Iu(r))}for(const n of Gy){const r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=Iu(r,!0))}Ts(e.auth)}}function Xy(e){Is(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){const o=Reflect.apply(t,n,r),s=o.constructor;return Zy(s),o}}),Ts(e.prototype.from))}function Qy(e){Is(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){var p;const o=Rf,s=n,i=Yy(s.method,s.headers);if(!o.includes(i)||!((p=s==null?void 0:s.url)!=null&&p.pathname)||typeof s.url.pathname!="string")return Reflect.apply(t,n,r);const a=s.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(const[h,m]of s.url.searchParams.entries())u.push(Ky(h,m));const d=Object.create(null);if(ht(s.body))for(const[h,m]of Object.entries(s.body))d[h]=m;const l="".concat(i==="select"?"":"".concat(i).concat(d?"(...) ":"")).concat(u.join(" ")," from(").concat(c,")"),f={"db.table":c,"db.schema":s.schema,"db.url":s.url.origin,"db.sdk":s.headers["X-Client-Info"],"db.system":"postgresql","db.operation":i,[Q]:"auto.db.supabase",[Ie]:"db"};return u.length&&(f["db.query"]=u),Object.keys(d).length&&(f["db.body"]=d),ar({name:l,attributes:f},h=>Reflect.apply(t,n,[]).then(m=>{if(h&&(m&&typeof m=="object"&&"status"in m&&Uo(h,m.status||500),h.end()),m.error){const b=new Error(m.error.message);m.error.code&&(b.code=m.error.code),m.error.details&&(b.details=m.error.details);const I={};u.length&&(I.query=u),Object.keys(d).length&&(I.body=d),xe(b,T=>(T.addEventProcessor(S=>(xt(S,{handled:!1,type:"auto.db.supabase.postgres"}),S)),T.setContext("supabase",I),T))}const g={type:"supabase",category:"db.".concat(i),message:l},y={};return u.length&&(y.query=u),Object.keys(d).length&&(y.body=d),Object.keys(y).length&&(g.data=y),St(g),m},m=>{throw h&&(Uo(h,500),h.end()),m}).then(...r))}}),Ts(e.prototype.then))}function Zy(e){for(const t of Rf)Is(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,o){const s=Reflect.apply(n,r,o),i=s.constructor;return C&&_.log("Instrumenting ".concat(t," operation's PostgRESTFilterBuilder")),Qy(i),s}}),Ts(e.prototype[t]))}const eS=e=>{if(!e){C&&_.warn("Supabase integration was not installed because no Supabase client was provided.");return}const t=e.constructor===Function?e:e.constructor;Xy(t),Jy(e)},tS="Supabase",nS=(e=>({setupOnce(){eS(e)},name:tS})),AA=e=>nS(e.supabaseClient),rS=10,oS="ZodErrors";function sS(e){return wt(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function iS(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function aS(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function cS(e){const t=new Set;for(const r of e.issues){const o=aS(r.path);o.length>0&&t.add(o)}const n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){const o=e.issues[0];o!==void 0&&"expected"in o&&typeof o.expected=="string"&&(r=o.expected)}return"Failed to validate ".concat(r)}return"Failed to validate keys: ".concat(Wn(n.join(", "),100))}function uS(e,t=!1,n,r){var o;if(!((o=n.exception)!=null&&o.values)||!r.originalException||!sS(r.originalException)||r.originalException.issues.length===0)return n;try{const i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(iS);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:cS(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(s){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:s instanceof Error?"".concat(s.name,": ").concat(s.message,"\n").concat(s.stack):"unknown"}}}}}const lS=((e={})=>{var n;const t=(n=e.limit)!=null?n:rS;return{name:oS,processEvent(r,o){return uS(t,e.saveZodIssuesAsAttachment,r,o)}}}),xA=lS,MA=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{_n(n,(r,o)=>{if(o==="event"){const s=Array.isArray(r)?r[1]:void 0;s&&(Tf(s),r[1]=s)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;const r=t.getOptions().stackParser;vf(r,n)})},processEvent(t){const n=dS(t);if(n){const r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](s=>!s.some(i=>e.filterKeys.includes(i)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function dS(e){const t=wi(e);if(t)return t.filter(n=>{var r;return!!n.filename&&((r=n.lineno)!=null?r:n.colno)!=null}).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(wu)).map(r=>r.slice(wu.length)):[])}const wu="_sentryBundlerPluginAppKey:",fS=100,pS=10,oo="flag.evaluation.";function cr(e){const n=G().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function yn(e,t,n=fS){const r=G().getScopeData().contexts;r.flags||(r.flags={values:[]});const o=r.flags.values;hS(o,e,t,n)}function hS(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){C&&_.error("[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=".concat(r));return}const o=e.findIndex(s=>s.flag===t);o!==-1&&e.splice(o,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function Sn(e,t,n=pS){if(typeof t!="boolean")return;const r=ye();if(!r)return;const o=$(r).data;if("".concat(oo).concat(e)in o){r.setAttribute("".concat(oo).concat(e),t);return}Object.keys(o).filter(i=>i.startsWith(oo)).length<n&&r.setAttribute("".concat(oo).concat(e),t)}const NA=()=>({name:"FeatureFlags",processEvent(e,t,n){return cr(e)},addFeatureFlag(e,t){yn(e,t),Sn(e,t)}}),mS=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){const t=e.prototype;typeof t.isOn=="function"&&Ne(t,"isOn",ku),typeof t.getFeatureValue=="function"&&Ne(t,"getFeatureValue",ku)},processEvent(t,n,r){return cr(t)}});function ku(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"&&(yn(n,r),Sn(n,r)),r}}function gS(e,t,n,r,o){if(!e.fetchData)return;const{method:s,url:i}=e.fetchData,a=et()&&t(i);if(e.endTimestamp&&a){const p=e.fetchData.__span;if(!p)return;const h=r[p];h&&(SS(h,e),_S(h,e,o),delete r[p]);return}const{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof o=="object"?o:{spanOrigin:o},d=!!ye(),l=a&&d?at(ES(i,s,c)):new Nt;if(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l,n(e.fetchData.url)){const p=e.args[0],h=e.args[1]||{},m=yS(p,h,et()&&d?l:void 0,u);m&&(e.args[1]=h,h.headers=m)}const f=N();if(f){const p={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};f.emit("beforeOutgoingRequestSpan",l,p)}return l}function _S(e,t,n){var o;const r=typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0;r==null||r(e,{headers:(o=t.response)==null?void 0:o.headers,error:t.error})}function yS(e,t,n,r){const o=bf({span:n,propagateTraceparent:r}),s=o["sentry-trace"],i=o.baggage,a=o.traceparent;if(!s)return;const c=t.headers||(yd(e)?e.headers:void 0);if(c)if(bS(c)){const u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",s),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),i){const d=u.get("baggage");d?so(d)||u.set("baggage","".concat(d,",").concat(i)):u.set("baggage",i)}return u}else if(Array.isArray(c)){const u=[...c];c.find(l=>l[0]==="sentry-trace")||u.push(["sentry-trace",s]),r&&a&&!c.find(l=>l[0]==="traceparent")&&u.push(["traceparent",a]);const d=c.find(l=>l[0]==="baggage"&&so(l[1]));return i&&!d&&u.push(["baggage",i]),u}else{const u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,l="baggage"in c?c.baggage:void 0,f=l?Array.isArray(l)?[...l]:[l]:[],p=l&&(Array.isArray(l)?l.find(m=>so(m)):so(l));i&&!p&&f.push(i);const h={...c,"sentry-trace":u!=null?u:s,baggage:f.length>0?f.join(","):void 0};return r&&a&&!d&&(h.traceparent=a),h}else return{...o}}function SS(e,t){var n,r;if(t.response){Uo(e,t.response.status);const o=(r=(n=t.response)==null?void 0:n.headers)==null?void 0:r.get("content-length");if(o){const s=parseInt(o);s>0&&e.setAttribute("http.response_content_length",s)}}else t.error&&e.setStatus({code:oe,message:"internal_error"});e.end()}function so(e){return e.split(",").some(t=>t.trim().startsWith(Sa))}function bS(e){return typeof Headers<"u"&&At(e,Headers)}function ES(e,t,n){const r=Na(e);return{name:r?"".concat(t," ").concat(Q_(r)):t,attributes:vS(e,r,t,n)}}function vS(e,t,n,r){const o={url:e,type:"fetch","http.method":n,[Q]:r,[Ie]:"http.client"};return t&&(Ma(t)||(o["http.url"]=t.href,o["server.address"]=t.host),t.search&&(o["http.query"]=t.search),t.hash&&(o["http.fragment"]=t.hash)),o}function TS(e,t={},n=G()){const{message:r,name:o,email:s,url:i,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:s,name:o,message:r,url:i,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=(n==null?void 0:n.getClient())||N();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}function ur(e,t,n,r,o){Vo({level:e,message:t,attributes:n,severityNumber:o},r)}function IS(e,t,{scope:n}={}){ur("trace",e,t,n)}function wS(e,t,{scope:n}={}){ur("debug",e,t,n)}function kS(e,t,{scope:n}={}){ur("info",e,t,n)}function RS(e,t,{scope:n}={}){ur("warn",e,t,n)}function CS(e,t,{scope:n}={}){ur("error",e,t,n)}function AS(e,t,{scope:n}={}){ur("fatal",e,t,n)}const OA=Object.freeze(Object.defineProperty({__proto__:null,debug:wS,error:CS,fatal:AS,fmt:ny,info:kS,trace:IS,warn:RS},Symbol.toStringTag,{value:"Module"}));function Di(e,t,n){return"util"in H&&typeof H.util.format=="function"?H.util.format(...e):xS(e,t,n)}function xS(e,t,n){return e.map(r=>Kt(r)?String(r):JSON.stringify(qe(r,t,n))).join(" ")}function MS(e){return/%[sdifocO]/.test(e)}function NS(e,t){const n={},r=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]="".concat(e," ").concat(r),t.forEach((o,s)=>{n["sentry.message.parameter.".concat(s)]=o}),n}const OS="ConsoleLogs",Ru={[Q]:"auto.log.console"},PS=((e={})=>{const t=e.levels||da;return{name:OS,setup(n){const{enableLogs:r,normalizeDepth:o=3,normalizeMaxBreadth:s=1e3}=n.getOptions();if(!r){C&&_.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}Oa(({args:i,level:a})=>{if(N()!==n||!t.includes(a))return;const c=i[0],u=i.slice(1);if(a==="assert"){if(!c){const p=u.length>0?"Assertion failed: ".concat(Di(u,o,s)):"Assertion failed";Vo({level:"error",message:p,attributes:Ru})}return}const d=a==="log",l=i.length>1&&typeof i[0]=="string"&&!MS(i[0]),f={...Ru,...l?NS(c,u):{}};Vo({level:d?"info":a,message:Di(i,o,s),severityNumber:d?10:void 0,attributes:f})})}}}),PA=PS;function La(e,t,n,r){x_({type:e,name:t,value:n,unit:r==null?void 0:r.unit,attributes:r==null?void 0:r.attributes},{scope:r==null?void 0:r.scope})}function LS(e,t=1,n){La("counter",e,t,n)}function DS(e,t,n){La("gauge",e,t,n)}function $S(e,t,n){La("distribution",e,t,n)}const LA=Object.freeze(Object.defineProperty({__proto__:null,count:LS,distribution:$S,gauge:DS},Symbol.toStringTag,{value:"Module"})),FS=["trace","debug","info","warn","error","fatal"];function DA(e={}){var r;const t=new Set((r=e.levels)!=null?r:FS),n=e.client;return{log(o){const{type:s,level:i,message:a,args:c,tag:u,date:d,...l}=o,f=n||N();if(!f)return;const p=HS(s,i);if(!t.has(p))return;const{normalizeDepth:h=3,normalizeMaxBreadth:m=1e3}=f.getOptions(),g=[];a&&g.push(a),c&&c.length>0&&g.push(Di(c,h,m));const y=g.join(" ");l["sentry.origin"]="auto.log.consola",u&&(l["consola.tag"]=u),s&&(l["consola.type"]=s),i!=null&&typeof i=="number"&&(l["consola.level"]=i),Vo({level:p,message:y,attributes:l})}}}const BS={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},US={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function HS(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){const n=BS[e];if(n)return n}if(typeof t=="number"){const n=US[t];if(n)return n}return"info"}const WS="gen_ai.prompt",Da="gen_ai.system",ct="gen_ai.request.model",Cf="gen_ai.request.stream",$a="gen_ai.request.temperature",Af="gen_ai.request.max_tokens",Fa="gen_ai.request.frequency_penalty",xf="gen_ai.request.presence_penalty",Ba="gen_ai.request.top_p",Mf="gen_ai.request.top_k",lr="gen_ai.response.finish_reasons",Dr="gen_ai.response.model",$r="gen_ai.response.id",ws="gen_ai.usage.input_tokens",ks="gen_ai.usage.output_tokens",Rs="gen_ai.usage.total_tokens",Ua="gen_ai.operation.name",pn="gen_ai.request.messages",mt="gen_ai.response.text",Ha="gen_ai.request.available_tools",Cs="gen_ai.response.streaming",nn="gen_ai.response.tool_calls",jS="openai.response.id",zS="openai.response.model",qS="openai.response.timestamp",GS="openai.usage.completion_tokens",VS="openai.usage.prompt_tokens",Cu={CHAT:"chat",RESPONSES:"responses"},Au="anthropic.response.timestamp",YS=2e4,Ko=e=>new TextEncoder().encode(e).length,Jo=e=>Ko(JSON.stringify(e));function Nf(e,t){if(Ko(e)<=t)return e;let n=0,r=e.length,o="";for(;n<=r;){const s=Math.floor((n+r)/2),i=e.slice(0,s);Ko(i)<=t?(o=i,n=s+1):r=s-1}return o}function KS(e){return typeof e=="string"?e:e.text}function xu(e,t){return typeof e=="string"?t:{...e,text:t}}function JS(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function XS(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function QS(e,t){const n={...e,content:""},r=Jo(n),o=t-r;if(o<=0)return[];const s=Nf(e.content,o);return[{...e,content:s}]}function ZS(e,t){const{parts:n}=e,r=n.map(a=>xu(a,"")),o=Jo({...e,parts:r});let s=t-o;if(s<=0)return[];const i=[];for(const a of n){const c=KS(a),u=Ko(c);if(u<=s)i.push(a),s-=u;else if(i.length===0){const d=Nf(c,s);d&&i.push(xu(a,d));break}else break}return i.length>0?[{...e,parts:i}]:[]}function eb(e,t){return!e||typeof e!="object"?[]:JS(e)?QS(e,t):XS(e)?ZS(e,t):[]}function tb(e,t){if(!Array.isArray(e)||e.length===0||Jo(e)<=t)return e;const r=e.map(Jo);let o=0,s=e.length;for(let i=e.length-1;i>=0;i--){const a=r[i];if(a&&o+a>t)break;a&&(o+=a),s=i}if(s===e.length){const i=e[e.length-1];return eb(i,t)}return e.slice(s)}function nb(e){return tb(e,YS)}function Fr(e){return e.includes("messages")?"messages":e.includes("completions")?"completions":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function Xo(e){return"gen_ai.".concat(Fr(e))}function Of(e,t){return e?"".concat(e,".").concat(t):t}function Wa(e,t,n,r,o){if(t!==void 0&&e.setAttributes({[ws]:t}),n!==void 0&&e.setAttributes({[ks]:n}),t!==void 0||n!==void 0||r!==void 0||o!==void 0){const s=(t!=null?t:0)+(n!=null?n:0)+(r!=null?r:0)+(o!=null?o:0);e.setAttributes({[Rs]:s})}}function hn(e){if(typeof e=="string")return e;if(Array.isArray(e)){const t=nb(e);return JSON.stringify(t)}return JSON.stringify(e)}const rb="OpenAI",ob=["responses.create","chat.completions.create"],sb=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],ib=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...sb];function ja(e){return e.includes("chat.completions")?Cu.CHAT:e.includes("responses")?Cu.RESPONSES:e.split(".").pop()||"unknown"}function Mu(e){return"gen_ai.".concat(ja(e))}function ab(e){return ob.includes(e)}function cb(e,t){return e?"".concat(e,".").concat(t):t}function ub(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function lb(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function db(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function fb(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function za(e,t,n,r){t!==void 0&&e.setAttributes({[VS]:t,[ws]:t}),n!==void 0&&e.setAttributes({[GS]:n,[ks]:n}),r!==void 0&&e.setAttributes({[Rs]:r})}function qa(e,t,n,r){e.setAttributes({[jS]:t,[$r]:t}),e.setAttributes({[zS]:n,[Dr]:n}),e.setAttributes({[qS]:new Date(r*1e3).toISOString()})}function pb(e,t){for(const n of e){const r=n.index;if(!(r===void 0||!n.function))if(!(r in t.chatCompletionToolCalls))t.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{const o=t.chatCompletionToolCalls[r];n.function.arguments&&(o!=null&&o.function)&&(o.function.arguments+=n.function.arguments)}}}function hb(e,t,n){var r,o,s,i,a,c;t.responseId=(r=e.id)!=null?r:t.responseId,t.responseModel=(o=e.model)!=null?o:t.responseModel,t.responseTimestamp=(s=e.created)!=null?s:t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(const u of(i=e.choices)!=null?i:[])n&&((a=u.delta)!=null&&a.content&&t.responseTexts.push(u.delta.content),(c=u.delta)!=null&&c.tool_calls&&pb(u.delta.tool_calls,t)),u.finish_reason&&t.finishReasons.push(u.finish_reason)}function mb(e,t,n,r){var s,i,a;if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:oe,message:"internal_error"}),xe(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;const o=e;if(!ib.includes(o.type)){t.eventTypes.push(o.type);return}if(n&&(o.type==="response.output_item.done"&&"item"in o&&t.responsesApiToolCalls.push(o.item),o.type==="response.output_text.delta"&&"delta"in o&&o.delta)){t.responseTexts.push(o.delta);return}if("response"in o){const{response:c}=o;t.responseId=(s=c.id)!=null?s:t.responseId,t.responseModel=(i=c.model)!=null?i:t.responseModel,t.responseTimestamp=(a=c.created_at)!=null?a:t.responseTimestamp,c.usage&&(t.promptTokens=c.usage.input_tokens,t.completionTokens=c.usage.output_tokens,t.totalTokens=c.usage.total_tokens),c.status&&t.finishReasons.push(c.status),n&&c.output_text&&t.responseTexts.push(c.output_text)}}async function*gb(e,t,n){const r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(const o of e)fb(o)?hb(o,r,n):db(o)&&mb(o,r,n,t),yield o}finally{qa(t,r.responseId,r.responseModel,r.responseTimestamp),za(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[Cs]:!0}),r.finishReasons.length&&t.setAttributes({[lr]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[mt]:r.responseTexts.join("")});const s=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];s.length>0&&t.setAttributes({[nn]:JSON.stringify(s)}),t.end()}}function _b(e,t){var r;const n={[Da]:"openai",[Ua]:ja(t),[Q]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const o=e[0],s=Array.isArray(o.tools)?o.tools:[],a=o.web_search_options&&typeof o.web_search_options=="object"?[{type:"web_search_options",...o.web_search_options}]:[],c=[...s,...a];c.length>0&&(n[Ha]=JSON.stringify(c))}if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const o=e[0];n[ct]=(r=o.model)!=null?r:"unknown","temperature"in o&&(n[$a]=o.temperature),"top_p"in o&&(n[Ba]=o.top_p),"frequency_penalty"in o&&(n[Fa]=o.frequency_penalty),"presence_penalty"in o&&(n[xf]=o.presence_penalty),"stream"in o&&(n[Cf]=o.stream)}else n[ct]="unknown";return n}function yb(e,t,n){if(qa(e,t.id,t.model,t.created),t.usage&&za(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){const r=t.choices.map(o=>o.finish_reason).filter(o=>o!==null);if(r.length>0&&e.setAttributes({[lr]:JSON.stringify(r)}),n){const o=t.choices.map(s=>{var i;return(i=s.message)==null?void 0:i.tool_calls}).filter(s=>Array.isArray(s)&&s.length>0).flat();o.length>0&&e.setAttributes({[nn]:JSON.stringify(o)})}}}function Sb(e,t,n){if(qa(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[lr]:JSON.stringify([t.status])}),t.usage&&za(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){const r=t;if(Array.isArray(r.output)&&r.output.length>0){const o=r.output.filter(s=>typeof s=="object"&&s!==null&&s.type==="function_call");o.length>0&&e.setAttributes({[nn]:JSON.stringify(o)})}}}function bb(e,t,n){var o;if(!t||typeof t!="object")return;const r=t;if(ub(r)){if(yb(e,r,n),n&&((o=r.choices)!=null&&o.length)){const s=r.choices.map(i=>{var a;return((a=i.message)==null?void 0:a.content)||""});e.setAttributes({[mt]:JSON.stringify(s)})}}else lb(r)&&(Sb(e,r,n),n&&r.output_text&&e.setAttributes({[mt]:r.output_text}))}function Nu(e,t){if("messages"in t){const n=hn(t.messages);e.setAttributes({[pn]:n})}if("input"in t){const n=hn(t.input);e.setAttributes({[pn]:n})}}function Eb(){var o,s,i,a;const t=G().getClient(),n=t==null?void 0:t.getIntegrationByName(rb),r=n?!!(t!=null&&t.getOptions().sendDefaultPii):!1;return{recordInputs:(s=(o=n==null?void 0:n.options)==null?void 0:o.recordInputs)!=null?s:r,recordOutputs:(a=(i=n==null?void 0:n.options)==null?void 0:i.recordOutputs)!=null?a:r}}function vb(e,t,n,r){return async function(...s){const i=r||Eb(),a=_b(s,t),c=a[ct]||"unknown",u=ja(t),d=s[0];return d&&typeof d=="object"&&d.stream===!0?Go({name:"".concat(u," ").concat(c," stream-response"),op:Mu(t),attributes:a},async f=>{var p;try{i.recordInputs&&s[0]&&typeof s[0]=="object"&&Nu(f,s[0]);const h=await e.apply(n,s);return gb(h,f,(p=i.recordOutputs)!=null?p:!1)}catch(h){throw f.setStatus({code:oe,message:"internal_error"}),xe(h,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),f.end(),h}}):ar({name:"".concat(u," ").concat(c),op:Mu(t),attributes:a},async f=>{try{i.recordInputs&&s[0]&&typeof s[0]=="object"&&Nu(f,s[0]);const p=await e.apply(n,s);return bb(f,p,i.recordOutputs),p}catch(p){throw xe(p,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),p}})}}function Pf(e,t="",n){return new Proxy(e,{get(r,o){const s=r[o],i=cb(t,String(o));return typeof s=="function"&&ab(i)?vb(s,i,r,n):typeof s=="function"?s.bind(r):s&&typeof s=="object"?Pf(s,i,n):s}})}function $A(e,t){return Pf(e,"",t)}function Tb(e,t){var n,r;return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:oe,message:(r=(n=e.error)==null?void 0:n.type)!=null?r:"internal_error"}),xe(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function Ib(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){const n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function wb(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function kb(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){const r=t.activeToolBlocks[e.index];r&&r.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function Rb(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;const n=t.activeToolBlocks[e.index];if(!n)return;const r=n.inputJsonParts.join("");let o;try{o=r?JSON.parse(r):{}}catch(s){o={__unparsed:r}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:o}),delete t.activeToolBlocks[e.index]}function Lf(e,t,n,r){!(e&&typeof e=="object")||Tb(e,r)||(Ib(e,t),wb(e,t),kb(e,t,n),Rb(e,t))}function Cb(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[$r]:e.responseId}),e.responseModel&&t.setAttributes({[Dr]:e.responseModel}),Wa(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[Cs]:!0}),e.finishReasons.length>0&&t.setAttributes({[lr]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[mt]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[nn]:JSON.stringify(e.toolCalls)}),t.end())}async function*Ab(e,t,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(const o of e)Lf(o,r,n,t),yield o}finally{r.responseId&&t.setAttributes({[$r]:r.responseId}),r.responseModel&&t.setAttributes({[Dr]:r.responseModel}),Wa(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[Cs]:!0}),r.finishReasons.length>0&&t.setAttributes({[lr]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[mt]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[nn]:JSON.stringify(r.toolCalls)}),t.end()}}function xb(e,t,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",o=>{Lf(o,r,n,t)}),e.on("message",()=>{Cb(r,t,n)}),e.on("error",o=>{xe(o,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:oe,message:"stream_error"}),t.end())}),e}const Mb=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function Nb(e){return Mb.includes(e)}function Ob(e,t){t.error&&(e.setStatus({code:oe,message:t.error.type||"internal_error"}),xe(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function Pb(e,t){var r;const n={[Da]:"anthropic",[Ua]:Fr(t),[Q]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const o=e[0];o.tools&&Array.isArray(o.tools)&&(n[Ha]=JSON.stringify(o.tools)),n[ct]=(r=o.model)!=null?r:"unknown","temperature"in o&&(n[$a]=o.temperature),"top_p"in o&&(n[Ba]=o.top_p),"stream"in o&&(n[Cf]=o.stream),"top_k"in o&&(n[Mf]=o.top_k),"frequency_penalty"in o&&(n[Fa]=o.frequency_penalty),"max_tokens"in o&&(n[Af]=o.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[ct]=e[0]:n[ct]="unknown";return n}function $i(e,t){if("messages"in t){const n=hn(t.messages);e.setAttributes({[pn]:n})}if("input"in t){const n=hn(t.input);e.setAttributes({[pn]:n})}"prompt"in t&&e.setAttributes({[WS]:JSON.stringify(t.prompt)})}function Lb(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[mt]:t.content.map(r=>r.text).filter(r=>!!r).join("")});const n=[];for(const r of t.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&e.setAttributes({[nn]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[mt]:t.completion}),"input_tokens"in t&&e.setAttributes({[mt]:JSON.stringify(t.input_tokens)})}function Db(e,t){"id"in t&&"model"in t&&(e.setAttributes({[$r]:t.id,[Dr]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[Au]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[Au]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&Wa(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function $b(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){Ob(e,t);return}n&&Lb(e,t),Db(e,t)}}function Ou(e,t,n){throw xe(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:oe,message:"internal_error"}),t.end()),e}function Fb(e,t,n,r,o,s,i,a,c,u,d){var p;const l=(p=o[ct])!=null?p:"unknown",f={name:"".concat(s," ").concat(l," stream-response"),op:Xo(i),attributes:o};return u&&!d?Go(f,async h=>{var m;try{c.recordInputs&&a&&$i(h,a);const g=await e.apply(n,r);return Ab(g,h,(m=c.recordOutputs)!=null?m:!1)}catch(g){return Ou(g,h,i)}}):Go(f,h=>{var m;try{c.recordInputs&&a&&$i(h,a);const g=t.apply(n,r);return xb(g,h,(m=c.recordOutputs)!=null?m:!1)}catch(g){return Ou(g,h,i)}})}function Bb(e,t,n,r){return new Proxy(e,{apply(o,s,i){var p;const a=Pb(i,t),c=(p=a[ct])!=null?p:"unknown",u=Fr(t),d=typeof i[0]=="object"?i[0]:void 0,l=!!(d!=null&&d.stream),f=t==="messages.stream";return l||f?Fb(e,o,n,i,a,u,t,d,r,l,f):ar({name:"".concat(u," ").concat(c),op:Xo(t),attributes:a},h=>(r.recordInputs&&d&&$i(h,d),Es(()=>o.apply(n,i),m=>{xe(m,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},m=>$b(h,m,r.recordOutputs))))}})}function Df(e,t="",n){return new Proxy(e,{get(r,o){const s=r[o],i=Of(t,String(o));return typeof s=="function"&&Nb(i)?Bb(s,i,r,n):typeof s=="function"?s.bind(r):s&&typeof s=="object"?Df(s,i,n):s}})}function FA(e,t){var o;const n=!!((o=N())!=null&&o.getOptions().sendDefaultPii),r={recordInputs:n,recordOutputs:n,...t};return Df(e,"",r)}const Pu=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],Ub="google_genai",$f="chats.create",Hb="chat";function Wb(e,t){var r;const n=e==null?void 0:e.promptFeedback;if(n!=null&&n.blockReason){const o=(r=n.blockReasonMessage)!=null?r:n.blockReason;return t.setStatus({code:oe,message:"Content blocked: ".concat(o)}),xe("Content blocked: ".concat(o),{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function jb(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);const n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function zb(e,t,n){var r,o,s;Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(const i of(r=e.candidates)!=null?r:[]){i!=null&&i.finishReason&&!t.finishReasons.includes(i.finishReason)&&t.finishReasons.push(i.finishReason);for(const a of(s=(o=i==null?void 0:i.content)==null?void 0:o.parts)!=null?s:[])n&&a.text&&t.responseTexts.push(a.text),a.functionCall&&t.toolCalls.push({type:"function",id:a.functionCall.id,name:a.functionCall.name,arguments:a.functionCall.args})}}function qb(e,t,n,r){!e||Wb(e,r)||(jb(e,t),zb(e,t,n))}async function*Gb(e,t,n){const r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(const o of e)qb(o,r,n,t),yield o}finally{const o={[Cs]:!0};r.responseId&&(o[$r]=r.responseId),r.responseModel&&(o[Dr]=r.responseModel),r.promptTokens!==void 0&&(o[ws]=r.promptTokens),r.completionTokens!==void 0&&(o[ks]=r.completionTokens),r.totalTokens!==void 0&&(o[Rs]=r.totalTokens),r.finishReasons.length&&(o[lr]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(o[mt]=r.responseTexts.join("")),n&&r.toolCalls.length&&(o[nn]=JSON.stringify(r.toolCalls)),t.setAttributes(o),t.end()}}function Vb(e){if(Pu.includes(e))return!0;const t=e.split(".").pop();return Pu.includes(t)}function Yb(e){return e.includes("Stream")||e.endsWith("generateContentStream")||e.endsWith("sendMessageStream")}function Lu(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){const n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function Kb(e){const t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[$a]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[Ba]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[Mf]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[Af]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[Fa]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[xf]=e.presencePenalty),t}function Jb(e,t,n){const r={[Da]:Ub,[Ua]:Fr(e),[Q]:"auto.ai.google_genai"};if(t){if(r[ct]=Lu(t,n),"config"in t&&typeof t.config=="object"&&t.config){const o=t.config;if(Object.assign(r,Kb(o)),"tools"in o&&Array.isArray(o.tools)){const s=o.tools.map(i=>i.functionDeclarations);r[Ha]=JSON.stringify(s)}}}else r[ct]=Lu({},n);return r}function Du(e,t){if("contents"in t){const n=t.contents,r=hn(n);e.setAttributes({[pn]:r})}if("message"in t){const n=t.message,r=hn(n);e.setAttributes({[pn]:r})}if("history"in t){const n=t.history,r=hn(n);e.setAttributes({[pn]:r})}}function Xb(e,t,n){if(!(!t||typeof t!="object")){if(t.usageMetadata&&typeof t.usageMetadata=="object"){const r=t.usageMetadata;typeof r.promptTokenCount=="number"&&e.setAttributes({[ws]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&e.setAttributes({[ks]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&e.setAttributes({[Rs]:r.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){const r=t.candidates.map(o=>{var s;return(s=o.content)!=null&&s.parts&&Array.isArray(o.content.parts)?o.content.parts.map(i=>typeof i.text=="string"?i.text:"").filter(i=>i.length>0).join(""):""}).filter(o=>o.length>0);r.length>0&&e.setAttributes({[mt]:r.join("")})}if(n&&t.functionCalls){const r=t.functionCalls;Array.isArray(r)&&r.length>0&&e.setAttributes({[nn]:JSON.stringify(r)})}}}function $u(e,t,n,r){const o=t===$f;return new Proxy(e,{apply(s,i,a){var f;const c=a[0],u=Jb(t,c,n),d=(f=u[ct])!=null?f:"unknown",l=Fr(t);return Yb(t)?Go({name:"".concat(l," ").concat(d," stream-response"),op:Xo(t),attributes:u},async p=>{try{r.recordInputs&&c&&Du(p,c);const h=await s.apply(n,a);return Gb(h,p,!!r.recordOutputs)}catch(h){throw p.setStatus({code:oe,message:"internal_error"}),xe(h,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),p.end(),h}}):ar({name:o?"".concat(l," ").concat(d," create"):"".concat(l," ").concat(d),op:Xo(t),attributes:u},p=>(r.recordInputs&&c&&Du(p,c),Es(()=>s.apply(n,a),h=>{xe(h,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},h=>{o||Xb(p,h,r.recordOutputs)})))}})}function Fi(e,t="",n){return new Proxy(e,{get:(r,o,s)=>{const i=Reflect.get(r,o,s),a=Of(t,String(o));if(typeof i=="function"&&Vb(a)){if(a===$f){const c=$u(i,a,r,n);return function(...d){const l=c(...d);return l&&typeof l=="object"?Fi(l,Hb,n):l}}return $u(i,a,r,n)}return typeof i=="function"?i.bind(r):i&&typeof i=="object"?Fi(i,a,n):i}})}function BA(e,t){var o;const n=!!((o=N())!=null&&o.getOptions().sendDefaultPii),r={recordInputs:n,recordOutputs:n,...t};return Fi(e,"",r)}function Ff(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Yn=H;function Qb(){return"history"in Yn&&!!Yn.history}function Zb(){if(!("fetch"in Yn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Bi(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Bf(){var n;if(typeof EdgeRuntime=="string")return!0;if(!Zb())return!1;if(Bi(Yn.fetch))return!0;let e=!1;const t=Yn.document;if(t&&typeof t.createElement=="function")try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),(n=r.contentWindow)!=null&&n.fetch&&(e=Bi(r.contentWindow.fetch)),t.head.removeChild(r)}catch(r){C&&_.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return e}function eE(){return"ReportingObserver"in Yn}function Ga(e,t){const n="fetch";Qt(n,e),Zt(n,()=>Uf(void 0,t))}function tE(e){const t="fetch-body-resolved";Qt(t,e),Zt(t,()=>Uf(rE))}function Uf(e,t=!1){t&&!Bf()||Ne(H,"fetch",function(n){return function(...r){const o=new Error,{method:s,url:i}=oE(r),a={args:r,fetchData:{method:s,url:i},startTimestamp:pe()*1e3,virtualError:o,headers:sE(r)};return e||Ze("fetch",{...a}),n.apply(H,r).then(async c=>(e?e(c):Ze("fetch",{...a,endTimestamp:pe()*1e3,response:c}),c),c=>{if(Ze("fetch",{...a,endTimestamp:pe()*1e3,error:c}),wt(c)&&c.stack===void 0&&(c.stack=o.stack,Ae(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const u=new URL(a.fetchData.url);c.message="".concat(c.message," (").concat(u.host,")")}catch(u){}throw c})}})}async function nE(e,t){if(e!=null&&e.body){const n=e.body,r=n.getReader(),o=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let s=!0;for(;s;){let i;try{i=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(i),a&&(t(),s=!1)}catch(a){s=!1}finally{clearTimeout(i)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,()=>{})}}function rE(e){let t;try{t=e.clone()}catch(n){return}nE(t,()=>{Ze("fetch-body-resolved",{endTimestamp:pe()*1e3,response:e})})}function Ui(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Fu(e){return typeof e=="string"?e:e?Ui(e,"url")?e.url:e.toString?e.toString():"":""}function oE(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:Fu(n),method:Ui(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:Fu(t),method:Ui(t,"method")?String(t.method).toUpperCase():"GET"}}function sE(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(yd(t))return new Headers(t.headers)}catch(r){}}function iE(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function aE(){return"npm"}function cE(){return!iE()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Qo(){return typeof window<"u"&&(!cE()||uE())}function uE(){const e=H.process;return(e==null?void 0:e.type)==="renderer"}const ot=H,ae=ot.document,gr=ot.navigator,Hf="Report a Bug",lE="Cancel",dE="Send Bug Report",fE="Confirm",pE="Report a Bug",hE="your.email@example.org",mE="Email",gE="What's the bug? What did you expect?",_E="Description",yE="Your Name",SE="Name",bE="Thank you for your report!",EE="(required)",vE="Add a screenshot",TE="Remove screenshot",IE="Highlight",wE="Hide",kE="Remove",RE="widget",CE="api",AE=5e3,xE=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=N();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&G().setTags(e.tags);const r=TS({source:CE,url:Tn(),...e},t);return new Promise((o,s)=>{const i=setTimeout(()=>s("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(i),a(),u!=null&&u.statusCode&&u.statusCode>=200&&u.statusCode<300?o(r):(u==null?void 0:u.statusCode)===403?s("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):s("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},Ro=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function ME(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(gr.userAgent)||/Macintosh/i.test(gr.userAgent)&&gr.maxTouchPoints&&gr.maxTouchPoints>1||!isSecureContext)}function io(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{var n,r;(n=t.onFormOpen)==null||n.call(t),(r=e.onFormOpen)==null||r.call(e)},onFormClose:()=>{var n,r;(n=t.onFormClose)==null||n.call(t),(r=e.onFormClose)==null||r.call(e)},onSubmitSuccess:(n,r)=>{var o,s;(o=t.onSubmitSuccess)==null||o.call(t,n,r),(s=e.onSubmitSuccess)==null||s.call(e,n,r)},onSubmitError:n=>{var r,o;(r=t.onSubmitError)==null||r.call(t,n),(o=e.onSubmitError)==null||o.call(e,n)},onFormSubmitted:()=>{var n,r;(n=t.onFormSubmitted)==null||n.call(t),(r=e.onFormSubmitted)==null||r.call(e)},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function NE(e){const t=ae.createElement("style");return t.textContent='\n.widget__actor {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: var(--page-margin);\n  inset: var(--actor-inset);\n\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 16px;\n\n  font-family: inherit;\n  font-size: var(--font-size);\n  font-weight: 600;\n  line-height: 1.14em;\n  text-decoration: none;\n\n  background: var(--actor-background, var(--background));\n  border-radius: var(--actor-border-radius, 1.7em/50%);\n  border: var(--actor-border, var(--border));\n  box-shadow: var(--actor-box-shadow, var(--box-shadow));\n  color: var(--actor-color, var(--foreground));\n  fill: var(--actor-color, var(--foreground));\n  cursor: pointer;\n  opacity: 1;\n  transition: transform 0.2s ease-in-out;\n  transform: translate(0, 0) scale(1);\n}\n.widget__actor[aria-hidden="true"] {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n  transform: translate(0, 16px) scale(0.98);\n}\n\n.widget__actor:hover {\n  background: var(--actor-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n\n.widget__actor svg {\n  width: 1.14em;\n  height: 1.14em;\n}\n\n@media (max-width: 600px) {\n  .widget__actor span {\n    display: none;\n  }\n}\n',e&&t.setAttribute("nonce",e),t}function Ve(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const Rn=20,OE="http://www.w3.org/2000/svg";function PE(){const e=a=>ot.document.createElementNS(OE,a),t=Ve(e("svg"),{width:"".concat(Rn),height:"".concat(Rn),viewBox:"0 0 ".concat(Rn," ").concat(Rn),fill:"var(--actor-color, var(--foreground))"}),n=Ve(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Ve(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const o=e("defs"),s=Ve(e("clipPath"),{id:"clip0_57_80"}),i=Ve(e("rect"),{width:"".concat(Rn),height:"".concat(Rn),fill:"white"});return s.appendChild(i),o.appendChild(s),t.appendChild(o).appendChild(s).appendChild(i),t}function LE({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const o=ae.createElement("button");if(o.type="button",o.className="widget__actor",o.ariaHidden="false",o.ariaLabel=t||e||Hf,o.appendChild(PE()),e){const i=ae.createElement("span");i.appendChild(ae.createTextNode(e)),o.appendChild(i)}const s=NE(r);return{el:o,appendToDom(){n.appendChild(s),n.appendChild(o)},removeFromDom(){o.remove(),s.remove()},show(){o.ariaHidden="false"},hide(){o.ariaHidden="true"}}}const Wf="rgba(88, 74, 192, 1)",DE={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Wf,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Bu={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Wf,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Uu(e){return"\n  --foreground: ".concat(e.foreground,";\n  --background: ").concat(e.background,";\n  --accent-foreground: ").concat(e.accentForeground,";\n  --accent-background: ").concat(e.accentBackground,";\n  --success-color: ").concat(e.successColor,";\n  --error-color: ").concat(e.errorColor,";\n  --border: ").concat(e.border,";\n  --box-shadow: ").concat(e.boxShadow,";\n  --outline: ").concat(e.outline,";\n  --interactive-filter: ").concat(e.interactiveFilter,";\n  ")}function $E({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const o=ae.createElement("style");return o.textContent="\n:host {\n  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;\n  --font-size: 14px;\n  --z-index: 100000;\n\n  --page-margin: 16px;\n  --inset: auto 0 0 auto;\n  --actor-inset: var(--inset);\n\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n\n  ".concat(e!=="system"?"color-scheme: only light;":"","\n\n  ").concat(Uu(e==="dark"?{...Bu,...t}:{...DE,...n}),"\n}\n\n").concat(e==="system"?"\n@media (prefers-color-scheme: dark) {\n  :host {\n    ".concat(Uu({...Bu,...t}),"\n  }\n}"):"","\n}\n"),r&&o.setAttribute("nonce",r),o}const jf=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:o="sentry-feedback",autoInject:s=!0,showBranding:i=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:m,colorScheme:g="system",themeLight:y={},themeDark:b={},addScreenshotButtonLabel:I=vE,cancelButtonLabel:T=lE,confirmButtonLabel:S=fE,emailLabel:w=mE,emailPlaceholder:E=hE,formTitle:R=pE,isRequiredLabel:v=EE,messageLabel:x=_E,messagePlaceholder:B=gE,nameLabel:k=SE,namePlaceholder:A=yE,removeScreenshotButtonLabel:U=TE,submitButtonLabel:J=dE,successMessageText:X=bE,triggerLabel:F=Hf,triggerAriaLabel:D="",highlightToolText:L=IE,hideToolText:O=wE,removeHighlightText:V=kE,onFormOpen:se,onFormClose:he,onSubmitSuccess:ve,onSubmitError:De,onFormSubmitted:Dt}={})=>{const $e={id:o,autoInject:s,showBranding:i,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:f,tags:p,styleNonce:h,scriptNonce:m,colorScheme:g,themeDark:b,themeLight:y,triggerLabel:F,triggerAriaLabel:D,cancelButtonLabel:T,submitButtonLabel:J,confirmButtonLabel:S,formTitle:R,emailLabel:w,emailPlaceholder:E,messageLabel:x,messagePlaceholder:B,nameLabel:k,namePlaceholder:A,successMessageText:X,isRequiredLabel:v,addScreenshotButtonLabel:I,removeScreenshotButtonLabel:U,highlightToolText:L,hideToolText:O,removeHighlightText:V,onFormClose:he,onFormOpen:se,onSubmitError:De,onSubmitSuccess:ve,onFormSubmitted:Dt};let Ue=null,dt=[];const $t=te=>{if(!Ue){const me=ae.createElement("div");me.id=String(te.id),ae.body.appendChild(me),Ue=me.attachShadow({mode:"open"}),Ue.appendChild($E(te))}return Ue},pr=async te=>{const me=te.enableScreenshot&&ME();let He,Me;try{He=(t?t():await e("feedbackModalIntegration",m))(),au(He)}catch(Re){throw Ro&&_.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const Re=me?n?n():await e("feedbackScreenshotIntegration",m):void 0;Re&&(Me=Re(),au(Me))}catch(Re){Ro&&_.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const ge=He.createDialog({options:{...te,onFormClose:()=>{var Re;ge==null||ge.close(),(Re=te.onFormClose)==null||Re.call(te)},onFormSubmitted:()=>{var Re;ge==null||ge.close(),(Re=te.onFormSubmitted)==null||Re.call(te)}},screenshotIntegration:Me,sendFeedback:xE,shadow:$t(te)});return ge},eo=(te,me={})=>{const He=io($e,me),Me=typeof te=="string"?ae.querySelector(te):typeof te.addEventListener=="function"?te:null;if(!Me)throw Ro&&_.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let ge=null;const Re=async()=>{ge||(ge=await pr({...He,onFormSubmitted:()=>{var Oe;ge==null||ge.removeFromDom(),(Oe=He.onFormSubmitted)==null||Oe.call(He)}})),ge.appendToDom(),ge.open()};Me.addEventListener("click",Re);const Z=()=>{dt=dt.filter(Oe=>Oe!==Z),ge==null||ge.removeFromDom(),ge=null,Me.removeEventListener("click",Re)};return dt.push(Z),Z},hr=(te={})=>{const me=io($e,te),He=$t(me),Me=LE({triggerLabel:me.triggerLabel,triggerAriaLabel:me.triggerAriaLabel,shadow:He,styleNonce:h});return eo(Me.el,{...me,onFormOpen(){Me.hide()},onFormClose(){Me.show()},onFormSubmitted(){Me.show()}}),Me};return{name:"Feedback",setupOnce(){!Qo()||!$e.autoInject||(ae.readyState==="loading"?ae.addEventListener("DOMContentLoaded",()=>hr().appendToDom()):hr().appendToDom())},attachTo:eo,createWidget(te={}){const me=hr(io($e,te));return me.appendToDom(),me},async createForm(te={}){return pr(io($e,te))},remove(){var te;Ue&&((te=Ue.parentElement)==null||te.remove(),Ue=null),dt.forEach(me=>me()),dt=[]}}});function UA(){const e=N();return e==null?void 0:e.getIntegrationByName("Feedback")}var As,ue,zf,sn,Hu,qf,Hi,Ir={},Va=[],FE=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ya=Array.isArray;function Wt(e,t){for(var n in t)e[n]=t[n];return e}function Gf(e){var t=e.parentNode;t&&t.removeChild(e)}function K(e,t,n){var r,o,s,i={};for(s in t)s=="key"?r=t[s]:s=="ref"?o=t[s]:i[s]=t[s];if(arguments.length>2&&(i.children=arguments.length>3?As.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)i[s]===void 0&&(i[s]=e.defaultProps[s]);return Co(e,i,r,o,null)}function Co(e,t,n,r,o){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o==null?++zf:o,__i:-1,__u:0};return o==null&&ue.vnode!=null&&ue.vnode(s),s}function Br(e){return e.children}function Ao(e,t){this.props=e,this.context=t}function Kn(e,t){if(t==null)return e.__?Kn(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Kn(e):null}function BE(e,t,n){var r,o=e.__v,s=o.__e,i=e.__P;if(i)return(r=Wt({},o)).__v=o.__v+1,ue.vnode&&ue.vnode(r),Ka(i,r,o,e.__n,i.ownerSVGElement!==void 0,32&o.__u?[s]:null,t,s==null?Kn(o):s,!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=s&&Vf(r),r}function Vf(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Vf(e)}}function Wu(e){(!e.__d&&(e.__d=!0)&&sn.push(e)&&!Zo.__r++||Hu!==ue.debounceRendering)&&((Hu=ue.debounceRendering)||qf)(Zo)}function Zo(){var e,t,n,r=[],o=[];for(sn.sort(Hi);e=sn.shift();)e.__d&&(n=sn.length,t=BE(e,r,o)||t,n===0||sn.length>n?(Wi(r,t,o),o.length=r.length=0,t=void 0,sn.sort(Hi)):t&&ue.__c&&ue.__c(t,Va));t&&Wi(r,t,o),Zo.__r=0}function Yf(e,t,n,r,o,s,i,a,c,u,d){var l,f,p,h,m,g=r&&r.__k||Va,y=t.length;for(n.__d=c,UE(n,t,g),c=n.__d,l=0;l<y;l++)(p=n.__k[l])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?Ir:g[p.__i]||Ir,p.__i=l,Ka(e,p,f,o,s,i,a,c,u,d),h=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&Ja(f.ref,null,p),d.push(p.ref,p.__c||h,p)),m==null&&h!=null&&(m=h),65536&p.__u||f.__k===p.__k?c=Kf(p,c,e):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:h&&(c=h.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=m}function UE(e,t,n){var r,o,s,i,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(o=e.__k[r]=(o=t[r])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Co(null,o,null,null,o):Ya(o)?Co(Br,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?Co(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=e,o.__b=e.__b+1,a=HE(o,n,i=r+l,d),o.__i=a,s=null,a!==-1&&(d--,(s=n[a])&&(s.__u|=131072)),s==null||s.__v===null?(a==-1&&l--,typeof o.type!="function"&&(o.__u|=65536)):a!==i&&(a===i+1?l++:a>i?d>c-i?l+=a-i:l--:l=a<i&&a==i-1?a-i:0,a!==r+l&&(o.__u|=65536))):(s=n[r])&&s.key==null&&s.__e&&(s.__e==e.__d&&(e.__d=Kn(s)),ji(s,s,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(s=n[r])!=null&&(131072&s.__u)==0&&(s.__e==e.__d&&(e.__d=Kn(s)),ji(s,s))}function Kf(e,t,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=Kf(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function HE(e,t,n,r){var o=e.key,s=e.type,i=n-1,a=n+1,c=t[n];if(c===null||c&&o==c.key&&s===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;i>=0||a<t.length;){if(i>=0){if((c=t[i])&&(131072&c.__u)==0&&o==c.key&&s===c.type)return i;i--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&o==c.key&&s===c.type)return a;a++}}return-1}function ju(e,t,n){t[0]==="-"?e.setProperty(t,n==null?"":n):e[t]=n==null?"":typeof n!="number"||FE.test(t)?n:n+"px"}function ao(e,t,n,r,o){var s;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||ju(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||ju(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,s?qu:zu,s)):e.removeEventListener(t,s?qu:zu,s);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n==null?"":n;break e}catch(i){}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function zu(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(ue.event?ue.event(e):e)}}function qu(e){if(this.l)return this.l[e.type+!0](ue.event?ue.event(e):e)}function Ka(e,t,n,r,o,s,i,a,c,u){var d,l,f,p,h,m,g,y,b,I,T,S,w,E,R,v=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),s=[a=t.__e=n.__e]),(d=ue.__b)&&d(t);e:if(typeof v=="function")try{if(y=t.props,b=(d=v.contextType)&&r[d.__c],I=d?b?b.props.value:d.__:r,n.__c?g=(l=t.__c=n.__c).__=l.__E:("prototype"in v&&v.prototype.render?t.__c=l=new v(y,I):(t.__c=l=new Ao(y,I),l.constructor=v,l.render=jE),b&&b.sub(l),l.props=y,l.state||(l.state={}),l.context=I,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),v.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=Wt({},l.__s)),Wt(l.__s,v.getDerivedStateFromProps(y,l.__s))),p=l.props,h=l.state,l.__v=t,f)v.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(v.getDerivedStateFromProps==null&&y!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(y,I),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(y,l.__s,I)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=y,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(x){x&&(x.__=t)}),T=0;T<l._sb.length;T++)l.__h.push(l._sb[T]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(y,l.__s,I),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,h,m)})}if(l.context=I,l.props=y,l.__P=e,l.__e=!1,S=ue.__r,w=0,"prototype"in v&&v.prototype.render){for(l.state=l.__s,l.__d=!1,S&&S(t),d=l.render(l.props,l.state,l.context),E=0;E<l._sb.length;E++)l.__h.push(l._sb[E]);l._sb=[]}else do l.__d=!1,S&&S(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++w<25);l.state=l.__s,l.getChildContext!=null&&(r=Wt(Wt({},r),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(m=l.getSnapshotBeforeUpdate(p,h)),Yf(e,Ya(R=d!=null&&d.type===Br&&d.key==null?d.props.children:d)?R:[R],t,n,r,o,s,i,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&i.push(l),g&&(l.__E=l.__=null)}catch(x){t.__v=null,c||s!=null?(t.__e=a,t.__u|=c?160:32,s[s.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),ue.__e(x,t,n)}else s==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=WE(n.__e,t,n,r,o,s,i,c,u);(d=ue.diffed)&&d(t)}function Wi(e,t,n){for(var r=0;r<n.length;r++)Ja(n[r],n[++r],n[++r]);ue.__c&&ue.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(s){s.call(o)})}catch(s){ue.__e(s,o.__v)}})}function WE(e,t,n,r,o,s,i,a,c){var u,d,l,f,p,h,m,g=n.props,y=t.props,b=t.type;if(b==="svg"&&(o=!0),s!=null){for(u=0;u<s.length;u++)if((p=s[u])&&"setAttribute"in p==!!b&&(b?p.localName===b:p.nodeType===3)){e=p,s[u]=null;break}}if(e==null){if(b===null)return document.createTextNode(y);e=o?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,y.is&&y),s=null,a=!1}if(b===null)g===y||a&&e.data===y||(e.data=y);else{if(s=s&&As.call(e.childNodes),g=n.props||Ir,!a&&s!=null)for(g={},u=0;u<e.attributes.length;u++)g[(p=e.attributes[u]).name]=p.value;for(u in g)p=g[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=p:u==="key"||u in y||ao(e,u,null,p,o));for(u in y)p=y[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?h=p:u=="checked"?m=p:u==="key"||a&&typeof p!="function"||g[u]===p||ao(e,u,p,g[u],o);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),Yf(e,Ya(f)?f:[f],t,n,r,o&&b!=="foreignObject",s,i,s?s[0]:n.__k&&Kn(n,0),a,c),s!=null)for(u=s.length;u--;)s[u]!=null&&Gf(s[u]);a||(u="value",h!==void 0&&(h!==e[u]||b==="progress"&&!h||b==="option"&&h!==g[u])&&ao(e,u,h,g[u],!1),u="checked",m!==void 0&&m!==e[u]&&ao(e,u,m,g[u],!1))}return e}function Ja(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){ue.__e(r,n)}}function ji(e,t,n){var r,o;if(ue.unmount&&ue.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Ja(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){ue.__e(s,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&ji(r[o],t,n||typeof e.type!="function");n||e.__e==null||Gf(e.__e),e.__=e.__e=e.__d=void 0}function jE(e,t,n){return this.constructor(e,n)}function zE(e,t,n){var r,o,s,i;ue.__&&ue.__(e,t),o=(r=!1)?null:t.__k,s=[],i=[],Ka(t,e=t.__k=K(Br,null,[e]),o||Ir,Ir,t.ownerSVGElement!==void 0,o?null:t.firstChild?As.call(t.childNodes):null,s,o?o.__e:t.firstChild,r,i),e.__d=void 0,Wi(s,e,i)}As=Va.slice,ue={__e:function(e,t,n,r){for(var o,s,i;t=t.__;)if((o=t.__c)&&!o.__)try{if((s=o.constructor)&&s.getDerivedStateFromError!=null&&(o.setState(s.getDerivedStateFromError(e)),i=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),i=o.__d),i)return o.__E=o}catch(a){e=a}throw e}},zf=0,Ao.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Wt({},this.state),typeof e=="function"&&(e=e(Wt({},n),this.props)),e&&Wt(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Wu(this))},Ao.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Wu(this))},Ao.prototype.render=Br,sn=[],qf=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Hi=function(e,t){return e.__v.__b-t.__v.__b},Zo.__r=0;var Ot,ce,ri,Gu,Jn=0,Jf=[],xo=[],_e=ue,Vu=_e.__b,Yu=_e.__r,Ku=_e.diffed,Ju=_e.__c,Xu=_e.unmount,Qu=_e.__;function wn(e,t){_e.__h&&_e.__h(ce,e,Jn||t),Jn=0;var n=ce.__H||(ce.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:xo}),n.__[e]}function an(e){return Jn=1,Xf(Zf,e)}function Xf(e,t,n){var r=wn(Ot++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Zf(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=ce,!ce.u)){var o=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!s||s.call(this,a,c,u);var l=!1;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!s||s.call(this,a,c,u))};ce.u=!0;var s=ce.shouldComponentUpdate,i=ce.componentWillUpdate;ce.componentWillUpdate=function(a,c,u){if(this.__e){var d=s;s=void 0,o(a,c,u),s=d}i&&i.call(this,a,c,u)},ce.shouldComponentUpdate=o}return r.__N||r.__}function qE(e,t){var n=wn(Ot++,3);!_e.__s&&Xa(n.__H,t)&&(n.__=e,n.i=t,ce.__H.__h.push(n))}function Qf(e,t){var n=wn(Ot++,4);!_e.__s&&Xa(n.__H,t)&&(n.__=e,n.i=t,ce.__h.push(n))}function GE(e){return Jn=5,Ur(function(){return{current:e}},[])}function VE(e,t,n){Jn=6,Qf(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function Ur(e,t){var n=wn(Ot++,7);return Xa(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Un(e,t){return Jn=8,Ur(function(){return e},t)}function YE(e){var t=ce.context[e.__c],n=wn(Ot++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(ce)),t.props.value):e.__}function KE(e,t){_e.useDebugValue&&_e.useDebugValue(t?t(e):e)}function JE(e){var t=wn(Ot++,10),n=an();return t.__=e,ce.componentDidCatch||(ce.componentDidCatch=function(r,o){t.__&&t.__(r,o),n[1](r)}),[n[0],function(){n[1](void 0)}]}function XE(){var e=wn(Ot++,11);if(!e.__){for(var t=ce.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function QE(){for(var e;e=Jf.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Mo),e.__H.__h.forEach(zi),e.__H.__h=[]}catch(t){e.__H.__h=[],_e.__e(t,e.__v)}}_e.__b=function(e){ce=null,Vu&&Vu(e)},_e.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Qu&&Qu(e,t)},_e.__r=function(e){Yu&&Yu(e),Ot=0;var t=(ce=e.__c).__H;t&&(ri===ce?(t.__h=[],ce.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=xo,n.__N=n.i=void 0})):(t.__h.forEach(Mo),t.__h.forEach(zi),t.__h=[],Ot=0)),ri=ce},_e.diffed=function(e){Ku&&Ku(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Jf.push(t)!==1&&Gu===_e.requestAnimationFrame||((Gu=_e.requestAnimationFrame)||ZE)(QE)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==xo&&(n.__=n.__V),n.i=void 0,n.__V=xo})),ri=ce=null},_e.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Mo),n.__h=n.__h.filter(function(r){return!r.__||zi(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],_e.__e(r,n.__v)}}),Ju&&Ju(e,t)},_e.unmount=function(e){Xu&&Xu(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Mo(r)}catch(o){t=o}}),n.__H=void 0,t&&_e.__e(t,n.__v))};var Zu=typeof requestAnimationFrame=="function";function ZE(e){var t,n=function(){clearTimeout(r),Zu&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Zu&&(t=requestAnimationFrame(n))}function Mo(e){var t=ce,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),ce=t}function zi(e){var t=ce;e.__c=e.__(),ce=t}function Xa(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Zf(e,t){return typeof t=="function"?t(e):t}const ev=Object.defineProperty({__proto__:null,useCallback:Un,useContext:YE,useDebugValue:KE,useEffect:qE,useErrorBoundary:JE,useId:XE,useImperativeHandle:VE,useLayoutEffect:Qf,useMemo:Ur,useReducer:Xf,useRef:GE,useState:an},Symbol.toStringTag,{value:"Module"}),tv="http://www.w3.org/2000/svg";function nv(){const e=r=>ae.createElementNS(tv,r),t=Ve(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=Ve(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function rv({options:e}){const t=Ur(()=>({__html:nv().outerHTML}),[]);return K("h2",{class:"dialog__header"},K("span",{class:"dialog__title"},e.formTitle),e.showBranding?K("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function ov(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function oi(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function sv({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:s,onSubmitError:i,showEmail:a,showName:c,screenshotInput:u}){const{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:h,emailPlaceholder:m,isEmailRequired:g,isNameRequired:y,messageLabel:b,messagePlaceholder:I,nameLabel:T,namePlaceholder:S,submitButtonLabel:w,isRequiredLabel:E}=e,[R,v]=an(!1),[x,B]=an(null),[k,A]=an(!1),U=u==null?void 0:u.input,[J,X]=an(null),F=Un(O=>{X(O),A(!1)},[]),D=Un(O=>{const V=ov(O,{emailLabel:h,isEmailRequired:g,isNameRequired:y,messageLabel:b,nameLabel:T});return V.length>0?B("Please enter in the following required fields: ".concat(V.join(", "))):B(null),V.length===0},[h,g,y,b,T]),L=Un(async O=>{v(!0);try{if(O.preventDefault(),!(O.target instanceof HTMLFormElement))return;const V=new FormData(O.target),se=await(u&&k?u.value():void 0),he={name:oi(V,"name"),email:oi(V,"email"),message:oi(V,"message"),attachments:se?[se]:void 0};if(!D(he))return;try{const ve=await o({name:he.name,email:he.email,message:he.message,source:RE,tags:d},{attachments:he.attachments});s(he,ve)}catch(ve){Ro&&_.error(ve),B(ve),i(ve)}}finally{v(!1)}},[u&&k,s,i]);return K("form",{class:"form",onSubmit:L},U&&k?K(U,{onError:F}):null,K("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:R},K("div",{class:"form__top"},x?K("div",{class:"form__error-container"},x):null,c?K("label",{for:"name",class:"form__label"},K(si,{label:T,isRequiredLabel:E,isRequired:y}),K("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:S,required:y,type:"text"})):K("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?K("label",{for:"email",class:"form__label"},K(si,{label:h,isRequiredLabel:E,isRequired:g}),K("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:m,required:g,type:"email"})):K("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),K("label",{for:"message",class:"form__label"},K(si,{label:b,isRequiredLabel:E,isRequired:!0}),K("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:I,required:!0,rows:5})),U?K("label",{for:"screenshot",class:"form__label"},K("button",{class:"btn btn--default",disabled:R,type:"button",onClick:()=>{X(null),A(O=>!O)}},k?f:l),J?K("div",{class:"form__error-container"},J.message):null):null),K("div",{class:"btn-group"},K("button",{class:"btn btn--primary",disabled:R,type:"submit"},w),K("button",{class:"btn btn--default",disabled:R,type:"button",onClick:r},p))))}function si({label:e,isRequired:t,isRequiredLabel:n}){return K("span",{class:"form__label__text"},e,t&&K("span",{class:"form__label__text--required"},n))}const co=16,el=17,iv="http://www.w3.org/2000/svg";function av(){const e=c=>ot.document.createElementNS(iv,c),t=Ve(e("svg"),{width:"".concat(co),height:"".concat(el),viewBox:"0 0 ".concat(co," ").concat(el),fill:"inherit"}),n=Ve(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Ve(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=Ve(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);const s=e("defs"),i=Ve(e("clipPath"),{id:"clip0_57_156"}),a=Ve(e("rect"),{width:"".concat(co),height:"".concat(co),fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),s.appendChild(i),t.appendChild(s).appendChild(i).appendChild(a),t}function cv({open:e,onFormSubmitted:t,...n}){const r=n.options,o=Ur(()=>({__html:av().outerHTML}),[]),[s,i]=an(null),a=Un(()=>{s&&(clearTimeout(s),i(null)),t()},[s]),c=Un((u,d)=>{n.onSubmitSuccess(u,d),i(setTimeout(()=>{t(),i(null)},AE))},[t]);return K(Br,null,s?K("div",{class:"success__position",onClick:a},K("div",{class:"success__content"},r.successMessageText,K("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):K("dialog",{class:"dialog",onClick:r.onFormClose,open:e},K("div",{class:"dialog__position"},K("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},K(rv,{options:r}),K(sv,{...n,onSubmitSuccess:c})))))}const uv="\n.dialog {\n  position: fixed;\n  z-index: var(--z-index);\n  margin: 0;\n  inset: 0;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  height: 100vh;\n  width: 100vw;\n\n  color: var(--dialog-color, var(--foreground));\n  fill: var(--dialog-color, var(--foreground));\n  line-height: 1.75em;\n\n  background-color: rgba(0, 0, 0, 0.05);\n  border: none;\n  inset: 0;\n  opacity: 1;\n  transition: opacity 0.2s ease-in-out;\n}\n\n.dialog__position {\n  position: fixed;\n  z-index: var(--z-index);\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  display: flex;\n  max-height: calc(100vh - (2 * var(--page-margin)));\n}\n@media (max-width: 600px) {\n  .dialog__position {\n    inset: var(--page-margin);\n    padding: 0;\n  }\n}\n\n.dialog__position:has(.editor) {\n  inset: var(--page-margin);\n  padding: 0;\n}\n\n.dialog:not([open]) {\n  opacity: 0;\n  pointer-events: none;\n  visibility: hidden;\n}\n.dialog:not([open]) .dialog__content {\n  transform: translate(0, -16px) scale(0.98);\n}\n\n.dialog__content {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  padding: var(--dialog-padding, 24px);\n  max-width: 100%;\n  width: 100%;\n  max-height: 100%;\n  overflow: auto;\n\n  background: var(--dialog-background, var(--background));\n  border-radius: var(--dialog-border-radius, 20px);\n  border: var(--dialog-border, var(--border));\n  box-shadow: var(--dialog-box-shadow, var(--box-shadow));\n  transform: translate(0, 0) scale(1);\n  transition: transform 0.2s ease-in-out;\n}\n\n",lv="\n.dialog__header {\n  display: flex;\n  gap: 4px;\n  justify-content: space-between;\n  font-weight: var(--dialog-header-weight, 600);\n  margin: 0;\n}\n.dialog__title {\n  align-self: center;\n  width: var(--form-width, 272px);\n}\n\n@media (max-width: 600px) {\n  .dialog__title {\n    width: auto;\n  }\n}\n\n.dialog__position:has(.editor) .dialog__title {\n  width: auto;\n}\n\n\n.brand-link {\n  display: inline-flex;\n}\n.brand-link:focus-visible {\n  outline: var(--outline);\n}\n",dv="\n.form {\n  display: flex;\n  overflow: auto;\n  flex-direction: row;\n  gap: 16px;\n  flex: 1 0;\n}\n\n.form fieldset {\n  border: none;\n  margin: 0;\n  padding: 0;\n}\n\n.form__right {\n  flex: 0 0 auto;\n  display: flex;\n  overflow: auto;\n  flex-direction: column;\n  justify-content: space-between;\n  gap: 20px;\n  width: var(--form-width, 100%);\n}\n\n.dialog__position:has(.editor) .form__right {\n  width: var(--form-width, 272px);\n}\n\n.form__top {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form__error-container {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n\n.form__label {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  margin: 0px;\n}\n\n.form__label__text {\n  display: flex;\n  gap: 4px;\n  align-items: center;\n}\n\n.form__label__text--required {\n  font-size: 0.85em;\n}\n\n.form__input {\n  font-family: inherit;\n  line-height: inherit;\n  background: transparent;\n  box-sizing: border-box;\n  border: var(--input-border, var(--border));\n  border-radius: var(--input-border-radius, 6px);\n  color: var(--input-color, inherit);\n  fill: var(--input-color, inherit);\n  font-size: var(--input-font-size, inherit);\n  font-weight: var(--input-font-weight, 500);\n  padding: 6px 12px;\n}\n\n.form__input::placeholder {\n  opacity: 0.65;\n  color: var(--input-placeholder-color, inherit);\n  filter: var(--interactive-filter);\n}\n\n.form__input:focus-visible {\n  outline: var(--input-focus-outline, var(--outline));\n}\n\n.form__input--textarea {\n  font-family: inherit;\n  resize: vertical;\n}\n\n.error {\n  color: var(--error-color);\n  fill: var(--error-color);\n}\n",fv="\n.btn-group {\n  display: grid;\n  gap: 8px;\n}\n\n.btn {\n  line-height: inherit;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  cursor: pointer;\n  font-family: inherit;\n  font-size: var(--button-font-size, inherit);\n  font-weight: var(--button-font-weight, 600);\n  padding: var(--button-padding, 6px 16px);\n}\n.btn[disabled] {\n  opacity: 0.6;\n  pointer-events: none;\n}\n\n.btn--primary {\n  color: var(--button-primary-color, var(--accent-foreground));\n  fill: var(--button-primary-color, var(--accent-foreground));\n  background: var(--button-primary-background, var(--accent-background));\n  border: var(--button-primary-border, var(--border));\n  border-radius: var(--button-primary-border-radius, 6px);\n  font-weight: var(--button-primary-font-weight, 500);\n}\n.btn--primary:hover {\n  color: var(--button-primary-hover-color, var(--accent-foreground));\n  fill: var(--button-primary-hover-color, var(--accent-foreground));\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n}\n.btn--primary:focus-visible {\n  background: var(--button-primary-hover-background, var(--accent-background));\n  filter: var(--interactive-filter);\n  outline: var(--button-primary-focus-outline, var(--outline));\n}\n\n.btn--default {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-background, var(--background));\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  font-weight: var(--button-font-weight, 500);\n}\n.btn--default:hover {\n  color: var(--button-color, var(--foreground));\n  fill: var(--button-color, var(--foreground));\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n}\n.btn--default:focus-visible {\n  background: var(--button-hover-background, var(--background));\n  filter: var(--interactive-filter);\n  outline: var(--button-focus-outline, var(--outline));\n}\n",pv="\n.success__position {\n  position: fixed;\n  inset: var(--dialog-inset);\n  padding: var(--page-margin);\n  z-index: var(--z-index);\n}\n.success__content {\n  background: var(--success-background, var(--background));\n  border: var(--success-border, var(--border));\n  border-radius: var(--success-border-radius, 1.7em/50%);\n  box-shadow: var(--success-box-shadow, var(--box-shadow));\n  font-weight: var(--success-font-weight, 600);\n  color: var(--success-color);\n  fill: var(--success-color);\n  padding: 12px 24px;\n  line-height: 1.75em;\n\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  gap: 6px;\n  cursor: default;\n}\n\n.success__icon {\n  display: flex;\n}\n";function hv(e){const t=ae.createElement("style");return t.textContent="\n:host {\n  --dialog-inset: var(--inset);\n}\n\n".concat(uv,"\n").concat(lv,"\n").concat(dv,"\n").concat(fv,"\n").concat(pv,"\n"),e&&t.setAttribute("nonce",e),t}function mv(){const e=G().getUser(),t=ke().getUser(),n=mn().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const gv=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const o=r,s=e.useSentryUser,i=mv(),a=ae.createElement("div"),c=hv(e.styleNonce);let u="";const d={get el(){return a},appendToDom(){!o.contains(c)&&!o.contains(a)&&(o.appendChild(c),o.appendChild(a))},removeFromDom(){a.remove(),c.remove(),ae.body.style.overflow=u},open(){var p,h;f(!0),(p=e.onFormOpen)==null||p.call(e),(h=N())==null||h.emit("openFeedbackWidget"),u=ae.body.style.overflow,ae.body.style.overflow="hidden"},close(){f(!1),ae.body.style.overflow=u}},l=t==null?void 0:t.createInput({h:K,hooks:ev,dialog:d,options:e}),f=p=>{zE(K(cv,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:s&&(i==null?void 0:i[s.name])||"",defaultEmail:s&&(i==null?void 0:i[s.email])||"",onFormClose:()=>{var h;f(!1),(h=e.onFormClose)==null||h.call(e)},onSubmit:n,onSubmitSuccess:(h,m)=>{var g;f(!1),(g=e.onSubmitSuccess)==null||g.call(e,h,m)},onSubmitError:h=>{var m;(m=e.onSubmitError)==null||m.call(e,h)},onFormSubmitted:()=>{var h;(h=e.onFormSubmitted)==null||h.call(e)},open:p}),a)};return d}}));function _v({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function yv(e){const t=ae.createElement("style"),n="#1A141F",r="#302735";return t.textContent="\n.editor {\n  display: flex;\n  flex-grow: 1;\n  flex-direction: column;\n}\n\n.editor__image-container {\n  justify-items: center;\n  padding: 15px;\n  position: relative;\n  height: 100%;\n  border-radius: var(--menu-border-radius, 6px);\n\n  background-color: ".concat(n,";\n  background-image: repeating-linear-gradient(\n      -145deg,\n      transparent,\n      transparent 8px,\n      ").concat(n," 8px,\n      ").concat(n," 11px\n    ),\n    repeating-linear-gradient(\n      -45deg,\n      transparent,\n      transparent 15px,\n      ").concat(r," 15px,\n      ").concat(r," 16px\n    );\n}\n\n.editor__canvas-container {\n  width: 100%;\n  height: 100%;\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.editor__canvas-container > * {\n  object-fit: contain;\n  position: absolute;\n}\n\n.editor__tool-container {\n  padding-top: 8px;\n  display: flex;\n  justify-content: center;\n}\n\n.editor__tool-bar {\n  display: flex;\n  gap: 8px;\n}\n\n.editor__tool {\n  display: flex;\n  padding: 8px 12px;\n  justify-content: center;\n  align-items: center;\n  border: var(--button-border, var(--border));\n  border-radius: var(--button-border-radius, 6px);\n  background: var(--button-background, var(--background));\n  color: var(--button-color, var(--foreground));\n}\n\n.editor__tool--active {\n  background: var(--button-primary-background, var(--accent-background));\n  color: var(--button-primary-color, var(--accent-foreground));\n}\n\n.editor__rect {\n  position: absolute;\n  z-index: 2;\n}\n\n.editor__rect button {\n  opacity: 0;\n  position: absolute;\n  top: -12px;\n  right: -12px;\n  cursor: pointer;\n  padding: 0;\n  z-index: 3;\n  border: none;\n  background: none;\n}\n\n.editor__rect:hover button {\n  opacity: 1;\n}\n"),e&&t.setAttribute("nonce",e),t}function Sv({h:e}){return function({action:n,setAction:r,options:o}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:"editor__tool ".concat(n==="highlight"?"editor__tool--active":""),onClick:()=>{r(n==="highlight"?"":"highlight")}},o.highlightToolText),e("button",{type:"button",class:"editor__tool ".concat(n==="hide"?"editor__tool--active":""),onClick:()=>{r(n==="hide"?"":"hide")}},o.hideToolText)))}}function bv({hooks:e}){function t(){var o;const[n,r]=e.useState((o=ot.devicePixelRatio)!=null?o:1);return e.useEffect(()=>{const s=()=>{r(ot.devicePixelRatio)},i=matchMedia("(resolution: ".concat(ot.devicePixelRatio,"dppx)"));return i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:o,onAfterScreenshot:s,onError:i}){const a=t();e.useEffect(()=>{(async()=>{r();const u=await gr.mediaDevices.getDisplayMedia({video:{width:ot.innerWidth*a,height:ot.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=ae.createElement("video");await new Promise((l,f)=>{d.srcObject=u,d.onloadedmetadata=()=>{o(d,a),u.getTracks().forEach(p=>p.stop()),l()},d.play().catch(f)}),s()})().catch(i)},[])}}function Ev(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function Bt(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function ii(e,t){Bt(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function ai(e,t,n){Bt(e,{alpha:!0},(r,o)=>{n.length&&(o.fillStyle="rgba(0, 0, 0, 0.25)",o.fillRect(0,0,r.width,r.height)),n.forEach(s=>{Ev(s,o,t)})})}function vv({h:e,hooks:t,outputBuffer:n,dialog:r,options:o}){const s=bv({hooks:t}),i=Sv({h:e}),a=_v({h:e}),c={__html:yv(o.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{const[f,p]=t.useState("highlight"),[h,m]=t.useState([]),g=t.useRef(null),y=t.useRef(null),b=t.useRef(null),I=t.useRef(null),[T,S]=t.useState(1),w=t.useMemo(()=>{const k=ae.getElementById(o.id);if(!k)return"white";const A=getComputedStyle(k);return A.getPropertyValue("--button-primary-background")||A.getPropertyValue("--accent-background")},[o.id]);t.useLayoutEffect(()=>{const k=()=>{const A=g.current;A&&(Bt(l.canvas,{alpha:!1},U=>{const J=Math.min(A.clientWidth/U.width,A.clientHeight/U.height);S(J)}),(A.clientHeight===0||A.clientWidth===0)&&setTimeout(k,0))};return k(),ot.addEventListener("resize",k),()=>{ot.removeEventListener("resize",k)}},[l]);const E=t.useCallback((k,A)=>{Bt(k,{alpha:!0},(U,J)=>{J.scale(A,A),U.width=l.canvas.width,U.height=l.canvas.height})},[l]);t.useEffect(()=>{E(y.current,l.dpi),ii(y.current,l.canvas)},[l]),t.useEffect(()=>{E(b.current,l.dpi),Bt(b.current,{alpha:!0},(k,A)=>{A.clearRect(0,0,k.width,k.height)}),ai(b.current,w,h)},[h,w]),t.useEffect(()=>{E(n,l.dpi),ii(n,l.canvas),Bt(ae.createElement("canvas"),{alpha:!0},(k,A)=>{A.scale(l.dpi,l.dpi),k.width=l.canvas.width,k.height=l.canvas.height,ai(k,w,h),ii(n,k)})},[h,l,w]);const R=k=>{if(!f||!I.current)return;const A=I.current.getBoundingClientRect(),U={type:f,x:k.offsetX/T,y:k.offsetY/T},J=(D,L)=>{const O=(L.clientX-A.x)/T,V=(L.clientY-A.y)/T;return{type:D.type,x:Math.min(D.x,O),y:Math.min(D.y,V),w:Math.abs(O-D.x),h:Math.abs(V-D.y)}},X=D=>{Bt(b.current,{alpha:!0},(L,O)=>{O.clearRect(0,0,L.width,L.height)}),ai(b.current,w,[...h,J(U,D)])},F=D=>{const L=J(U,D);L.w*T>=1&&L.h*T>=1&&m(O=>[...O,L]),ae.removeEventListener("mousemove",X),ae.removeEventListener("mouseup",F)};ae.addEventListener("mousemove",X),ae.addEventListener("mouseup",F)},v=t.useCallback(k=>A=>{A.preventDefault(),A.stopPropagation(),m(U=>{const J=[...U];return J.splice(k,1),J})},[]),x={width:"".concat(l.canvas.width*T,"px"),height:"".concat(l.canvas.height*T,"px")},B=k=>{k.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:o.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:g},e("canvas",{ref:y,id:"background",style:x}),e("canvas",{ref:b,id:"foreground",style:x}),e("div",{ref:I,onMouseDown:R,style:x},h.map((k,A)=>e("div",{key:A,class:"editor__rect",style:{top:"".concat(k.y*T,"px"),left:"".concat(k.x*T,"px"),width:"".concat(k.w*T,"px"),height:"".concat(k.h*T,"px")}},e("button",{"aria-label":o.removeHighlightText,onClick:v(A),onMouseDown:B,onMouseUp:B,type:"button"},e(a,null))))))),e(i,{options:o,action:f,setAction:p}))};return function({onError:f}){const[p,h]=t.useState();return s({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((m,g)=>{Bt(ae.createElement("canvas"),{alpha:!1},(y,b)=>{b.scale(g,g),y.width=m.videoWidth,y.height=m.videoHeight,b.drawImage(m,0,0,y.width,y.height),h({canvas:y,dpi:g})}),n.width=m.videoWidth,n.height=m.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(m=>{u.display="block",f(m)},[])}),p?e(d,{screenshot:p}):e("div",null)}}const Tv=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const o=ae.createElement("canvas");return{input:vv({h:e,hooks:t,outputBuffer:o,dialog:n,options:r}),value:async()=>{const s=await new Promise(i=>{o.toBlob(i,"image/png")});if(s)return{data:new Uint8Array(await s.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}})),P=H;let qi=0;function ep(){return qi>0}function Iv(){qi++,setTimeout(()=>{qi--})}function Xn(e,t={}){function n(o){return typeof o=="function"}if(!n(e))return e;try{const o=e.__sentry_wrapped__;if(o)return typeof o=="function"?o:e;if(ma(e))return e}catch(o){return e}const r=function(...o){try{const s=o.map(i=>Xn(i,t));return e.apply(this,s)}catch(s){throw Iv(),Ye(i=>{i.addEventProcessor(a=>(t.mechanism&&(ki(a,void 0),xt(a,t.mechanism)),a.extra={...a.extra,arguments:o},a)),xe(s)}),s}};try{for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}catch(o){}bd(r,e),Ae(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch(o){}return r}function Qa(){const e=Tn(),{referrer:t}=P.document||{},{userAgent:n}=P.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}const wv={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient"},tl=P;async function kv(e,t){const n=wv[e],r=tl.Sentry=tl.Sentry||{};if(!n)throw new Error("Cannot lazy load integration: ".concat(e));const o=r[e];if(typeof o=="function"&&!("_isShim"in o))return o;const s=Rv(n),i=P.document.createElement("script");i.src=s,i.crossOrigin="anonymous",i.referrerPolicy="strict-origin",t&&i.setAttribute("nonce",t);const a=new Promise((l,f)=>{i.addEventListener("load",()=>l()),i.addEventListener("error",f)}),c=P.document.currentScript,u=P.document.body||P.document.head||(c==null?void 0:c.parentElement);if(u)u.appendChild(i);else throw new Error("Could not find parent element to insert lazy-loaded ".concat(e," script"));try{await a}catch(l){throw new Error("Error when loading integration: ".concat(e))}const d=r[e];if(typeof d!="function")throw new Error("Could not load integration: ".concat(e));return d}function Rv(e){var r;const t=N(),n=((r=t==null?void 0:t.getOptions())==null?void 0:r.cdnBaseUrl)||"https://browser.sentry-cdn.com";return new URL("/".concat(jt,"/").concat(e,".min.js"),n).toString()}const HA=jf({lazyLoadIntegration:kv}),WA=jf({getModalIntegration:()=>gv,getScreenshotIntegration:()=>Tv});function Za(e,t){const n=ec(e,t),r={type:Nv(t),value:Ov(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Cv(e,t,n,r){const o=N(),s=o==null?void 0:o.getOptions().normalizeDepth,i=Fv(t),a={__serialized__:zd(t,s)};if(i)return{exception:{values:[Za(e,i)]},extra:a};const c={exception:{values:[{type:_s(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Dv(t,{isUnhandledRejection:r})}]},extra:a};if(n){const u=ec(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function ci(e,t){return{exception:{values:[Za(e,t)]}}}function ec(e,t){const n=t.stacktrace||t.stack||"",r=xv(t),o=Mv(t);try{return e(n,r,o)}catch(s){}return[]}const Av=/Minified React error #\d+;/i;function xv(e){return e&&Av.test(e.message)?1:0}function Mv(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function tp(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Nv(e){const t=e==null?void 0:e.name;return!t&&tp(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function Ov(e){const t=e==null?void 0:e.message;return tp(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Pv(e,t,n,r){const o=(n==null?void 0:n.syntheticException)||void 0,s=xs(e,t,o,r);return xt(s),s.level="error",n!=null&&n.event_id&&(s.event_id=n.event_id),vs(s)}function Lv(e,t,n="info",r,o){const s=(r==null?void 0:r.syntheticException)||void 0,i=Gi(e,t,s,o);return i.level=n,r!=null&&r.event_id&&(i.event_id=r.event_id),vs(i)}function xs(e,t,n,r,o){let s;if(gd(t)&&t.error)return ci(e,t.error);if(Dc(t)||mm(t)){const i=t;if("stack"in t)s=ci(e,t);else{const a=i.name||(Dc(i)?"DOMError":"DOMException"),c=i.message?"".concat(a,": ").concat(i.message):a;s=Gi(e,c,n,r),ki(s,c)}return"code"in i&&(s.tags={...s.tags,"DOMException.code":"".concat(i.code)}),s}return wt(t)?ci(e,t):ht(t)||_s(t)?(s=Cv(e,t,n,o),xt(s,{synthetic:!0}),s):(s=Gi(e,t,n,r),ki(s,"".concat(t)),xt(s,{synthetic:!0}),s)}function Gi(e,t,n,r){const o={};if(r&&n){const s=ec(e,n);s.length&&(o.exception={values:[{value:t,stacktrace:{frames:s}}]}),xt(o,{synthetic:!0})}if(gs(t)){const{__sentry_template_string__:s,__sentry_template_values__:i}=t;return o.logentry={message:s,params:i},o}return o.message=t,o}function Dv(e,{isUnhandledRejection:t}){const n=Em(e),r=t?"promise rejection":"exception";if(gd(e))return"Event `ErrorEvent` captured as ".concat(r," with message `").concat(e.message,"`");if(_s(e)){const o=$v(e);return"Event `".concat(o,"` (type=").concat(e.type,") captured as ").concat(r)}return"Object captured as ".concat(r," with keys: ").concat(n)}function $v(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(t){}}function Fv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class Bv extends D_{constructor(t){var c;const n=Uv(t),r=P.SENTRY_SDK_SOURCE||aE();Sf(n,"browser",["browser"],r),(c=n._metadata)!=null&&c.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:o,sendClientReports:s,enableLogs:i,_experiments:a}=this._options;P.document&&(s||i||a!=null&&a.enableMetrics)&&P.document.addEventListener("visibilitychange",()=>{P.document.visibilityState==="hidden"&&(s&&this._flushOutcomes(),i&&Ra(this),a!=null&&a.enableMetrics&&Aa(this))}),o&&this.on("beforeSendSession",ry)}eventFromException(t,n){return Pv(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return Lv(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,o)}}function Uv(e){var t;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(t=P.SENTRY_RELEASE)==null?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const bn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,z=H,Hv=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Hr=(e,t,n,r)=>{let o,s;return i=>{t.value>=0&&(i||r)&&(s=t.value-(o!=null?o:0),(s||o===void 0)&&(o=t.value,t.delta=s,t.rating=Hv(t.value,n),e(t)))}},Wv=()=>"v5-".concat(Date.now(),"-").concat(Math.floor(Math.random()*(9e12-1))+1e12),Wr=(e=!0)=>{var n,r;const t=(r=(n=z.performance)==null?void 0:n.getEntriesByType)==null?void 0:r.call(n,"navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},dr=()=>{var t;const e=Wr();return(t=e==null?void 0:e.activationStart)!=null?t:0},jr=(e,t=-1)=>{var s,i;const n=Wr();let r="navigate";return n&&((s=z.document)!=null&&s.prerendering||dr()>0?r="prerender":(i=z.document)!=null&&i.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:Wv(),navigationType:r}},ui=new WeakMap;function tc(e,t){return ui.get(e)||ui.set(e,new t),ui.get(e)}class es{constructor(){es.prototype.__init.call(this),es.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){var o;if(t.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),(o=this._onAfterProcessingUnexpectedShift)==null||o.call(this,t)}}const fr=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch(r){}},nc=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let _r=-1;const jv=()=>{var e,t;return((e=z.document)==null?void 0:e.visibilityState)==="hidden"&&!((t=z.document)!=null&&t.prerendering)?0:1/0},ts=e=>{z.document.visibilityState==="hidden"&&_r>-1&&(_r=e.type==="visibilitychange"?e.timeStamp:0,qv())},zv=()=>{addEventListener("visibilitychange",ts,!0),addEventListener("prerenderingchange",ts,!0)},qv=()=>{removeEventListener("visibilitychange",ts,!0),removeEventListener("prerenderingchange",ts,!0)},rc=()=>{var e;if(z.document&&_r<0){const t=dr(),n=z.document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(r=>r.name==="hidden"&&r.startTime>t)[0])==null?void 0:e.startTime;_r=n!=null?n:jv(),zv()}return{get firstHiddenTime(){return _r}}},Ms=e=>{var t;(t=z.document)!=null&&t.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},Gv=[1800,3e3],Vv=(e,t={})=>{Ms(()=>{const n=rc(),r=jr("FCP");let o;const i=fr("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(i.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-dr(),0),r.entries.push(c),o(!0)))});i&&(o=Hr(e,r,Gv,t.reportAllChanges))})},Yv=[.1,.25],Kv=(e,t={})=>{Vv(nc(()=>{var a,c;const n=jr("CLS",0);let r;const o=tc(t,es),s=u=>{for(const d of u)o._processEntry(d);o._sessionValue>n.value&&(n.value=o._sessionValue,n.entries=o._sessionEntries,r())},i=fr("layout-shift",s);i&&(r=Hr(e,n,Yv,t.reportAllChanges),(a=z.document)==null||a.addEventListener("visibilitychange",()=>{var u;((u=z.document)==null?void 0:u.visibilityState)==="hidden"&&(s(i.takeRecords()),r(!0))}),(c=z==null?void 0:z.setTimeout)==null||c.call(z,r))}))};let np=0,li=1/0,uo=0;const Jv=e=>{e.forEach(t=>{t.interactionId&&(li=Math.min(li,t.interactionId),uo=Math.max(uo,t.interactionId),np=uo?(uo-li)/7+1:0)})};let Vi;const rp=()=>Vi?np:performance.interactionCount||0,Xv=()=>{"interactionCount"in performance||Vi||(Vi=fr("event",Jv,{type:"event",buffered:!0,durationThreshold:0}))},di=10;let op=0;const Qv=()=>rp()-op;class ns{constructor(){ns.prototype.__init.call(this),ns.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){op=rp(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(Qv()/50));return this._longestInteractionList[t]}_processEntry(t){var o,s;if((o=this._onBeforeProcessingEntry)==null||o.call(this,t),!(t.interactionId||t.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<di||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((i,a)=>a._latency-i._latency),this._longestInteractionList.length>di){const i=this._longestInteractionList.splice(di);for(const a of i)this._longestInteractionMap.delete(a.id)}(s=this._onAfterProcessingINPCandidate)==null||s.call(this,r)}}}const oc=e=>{const t=n=>{var r;(n.type==="pagehide"||((r=z.document)==null?void 0:r.visibilityState)==="hidden")&&e(n)};z.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},sp=e=>{var n;const t=z.requestIdleCallback||z.setTimeout;((n=z.document)==null?void 0:n.visibilityState)==="hidden"?e():(e=nc(e),t(e),oc(e))},Zv=[200,500],e0=40,t0=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Ms(()=>{var a;Xv();const n=jr("INP");let r;const o=tc(t,ns),s=c=>{sp(()=>{for(const d of c)o._processEntry(d);const u=o._estimateP98LongestInteraction();u&&u._latency!==n.value&&(n.value=u._latency,n.entries=u.entries,r())})},i=fr("event",s,{durationThreshold:(a=t.durationThreshold)!=null?a:e0});r=Hr(e,n,Zv,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),oc(()=>{s(i.takeRecords()),r(!0)}))})};class n0{_processEntry(t){var n;(n=this._onBeforeProcessingEntry)==null||n.call(this,t)}}const r0=[2500,4e3],o0=(e,t={})=>{Ms(()=>{const n=rc(),r=jr("LCP");let o;const s=tc(t,n0),i=c=>{t.reportAllChanges||(c=c.slice(-1));for(const u of c)s._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-dr(),0),r.entries=[u],o())},a=fr("largest-contentful-paint",i);if(a){o=Hr(e,r,r0,t.reportAllChanges);const c=nc(()=>{i(a.takeRecords()),a.disconnect(),o(!0)});for(const u of["keydown","click","visibilitychange"])z.document&&addEventListener(u,()=>sp(c),{capture:!0,once:!0})}})},s0=[800,1800],Yi=e=>{var t,n;(t=z.document)!=null&&t.prerendering?Ms(()=>Yi(e)):((n=z.document)==null?void 0:n.readyState)!=="complete"?addEventListener("load",()=>Yi(e),!0):setTimeout(e)},i0=(e,t={})=>{const n=jr("TTFB"),r=Hr(e,n,s0,t.reportAllChanges);Yi(()=>{const o=Wr();o&&(n.value=Math.max(o.responseStart-dr(),0),n.entries=[o],r(!0))})},yr={},rs={};let ip,ap,cp,up;function sc(e,t=!1){return Ns("cls",e,c0,ip,t)}function ic(e,t=!1){return Ns("lcp",e,u0,ap,t)}function a0(e){return Ns("ttfb",e,l0,cp)}function lp(e){return Ns("inp",e,d0,up)}function En(e,t){return dp(e,t),rs[e]||(f0(e),rs[e]=!0),fp(e,t)}function zr(e,t){const n=yr[e];if(n!=null&&n.length)for(const r of n)try{r(t)}catch(o){bn&&_.error("Error while triggering instrumentation handler.\nType: ".concat(e,"\nName: ").concat(Ct(r),"\nError:"),o)}}function c0(){return Kv(e=>{zr("cls",{metric:e}),ip=e},{reportAllChanges:!0})}function u0(){return o0(e=>{zr("lcp",{metric:e}),ap=e},{reportAllChanges:!0})}function l0(){return i0(e=>{zr("ttfb",{metric:e}),cp=e})}function d0(){return t0(e=>{zr("inp",{metric:e}),up=e})}function Ns(e,t,n,r,o=!1){dp(e,t);let s;return rs[e]||(s=n(),rs[e]=!0),r&&t({metric:r}),fp(e,t,o?s:void 0)}function f0(e){const t={};e==="event"&&(t.durationThreshold=0),fr(e,n=>{zr(e,{entries:n})},t)}function dp(e,t){yr[e]=yr[e]||[],yr[e].push(t)}function fp(e,t,n){return()=>{n&&n();const r=yr[e];if(!r)return;const o=r.indexOf(t);o!==-1&&r.splice(o,1)}}function p0(e){return"duration"in e}function fi(e){return typeof e=="number"&&isFinite(e)}function Jt(e,t,n,{...r}){const o=$(e).start_timestamp;return o&&o>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),Gn(e,()=>{const s=at({startTime:t,...r});return s&&s.end(n),s})}function ac(e){var g;const t=N();if(!t)return;const{name:n,transaction:r,attributes:o,startTime:s}=e,{release:i,environment:a,sendDefaultPii:c}=t.getOptions(),u=t.getIntegrationByName("Replay"),d=u==null?void 0:u.getReplayId(),l=G(),f=l.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let h;try{h=l.getScopeData().contexts.profile.profile_id}catch(y){}const m={release:i,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":(g=z.navigator)==null?void 0:g.userAgent,"client.address":c?"{{auto}}":void 0,...o};return at({name:n,attributes:m,startTime:s,experimental:{standalone:!0}})}function qr(){return z.addEventListener&&z.performance}function Ee(e){return e/1e3}function h0(e){let t="unknown",n="unknown",r="";for(const o of e){if(o==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}function pp(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch(t){return!1}}function hp(e,t){let n,r=!1;function o(a){!r&&n&&t(a,n),r=!0}oc(()=>{o("pagehide")});const s=e.on("beforeStartNavigationSpan",(a,c)=>{c!=null&&c.isRedirect||(o("navigation"),s(),i())}),i=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,i()})}function m0(e){let t=0,n;if(!pp("layout-shift"))return;const r=sc(({metric:o})=>{const s=o.entries[o.entries.length-1];s&&(t=o.value,n=s)},!0);hp(e,(o,s)=>{g0(t,n,s,o),r()})}function g0(e,t,n,r){var u;bn&&_.log("Sending CLS span (".concat(e,")"));const o=t?Ee((Le()||0)+t.startTime):pe(),s=G().getScopeData().transactionName,i=t?ze((u=t.sources[0])==null?void 0:u.node):"Layout shift",a={[Q]:"auto.http.browser.cls",[Ie]:"ui.webvital.cls",[ir]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t!=null&&t.sources&&t.sources.forEach((d,l)=>{a["cls.source.".concat(l+1)]=ze(d.node)});const c=ac({name:i,transaction:s,attributes:a,startTime:o});c&&(c.addEvent("cls",{[Nr]:"",[Or]:e}),c.end(o))}function _0(e){let t=0,n;if(!pp("largest-contentful-paint"))return;const r=ic(({metric:o})=>{const s=o.entries[o.entries.length-1];s&&(t=o.value,n=s)},!0);hp(e,(o,s)=>{y0(t,n,s,o),r()})}function y0(e,t,n,r){bn&&_.log("Sending LCP span (".concat(e,")"));const o=Ee((Le()||0)+((t==null?void 0:t.startTime)||0)),s=G().getScopeData().transactionName,i=t?ze(t.element):"Largest contentful paint",a={[Q]:"auto.http.browser.lcp",[Ie]:"ui.webvital.lcp",[ir]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=ze(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url.trim().slice(0,200)),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));const c=ac({name:i,transaction:s,attributes:a,startTime:o});c&&(c.addEvent("lcp",{[Nr]:"millisecond",[Or]:e}),c.end(o))}function Je(e){return e&&((Le()||performance.timeOrigin)+e)/1e3}function mp(e){var n;const t={};if(e.nextHopProtocol!=null){const{name:r,version:o}=h0(e.nextHopProtocol);t["network.protocol.version"]=o,t["network.protocol.name"]=r}return Le()||(n=qr())!=null&&n.timeOrigin?S0({...t,"http.request.redirect_start":Je(e.redirectStart),"http.request.redirect_end":Je(e.redirectEnd),"http.request.worker_start":Je(e.workerStart),"http.request.fetch_start":Je(e.fetchStart),"http.request.domain_lookup_start":Je(e.domainLookupStart),"http.request.domain_lookup_end":Je(e.domainLookupEnd),"http.request.connect_start":Je(e.connectStart),"http.request.secure_connection_start":Je(e.secureConnectionStart),"http.request.connection_end":Je(e.connectEnd),"http.request.request_start":Je(e.requestStart),"http.request.response_start":Je(e.responseStart),"http.request.response_end":Je(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function S0(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}const b0=2147483647;let nl=0,rt={},je,On;function E0({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=qr();if(r&&Le()){r.mark&&z.performance.mark("sentry-tracing-init");const o=t?_0(n):k0(),s=R0(),i=e?m0(n):w0();return()=>{o==null||o(),s(),i==null||i()}}return()=>{}}function v0(){En("longtask",({entries:e})=>{const t=ye();if(!t)return;const{op:n,start_timestamp:r}=$(t);for(const o of e){const s=Ee(Le()+o.startTime),i=Ee(o.duration);n==="navigation"&&r&&s<r||Jt(t,s,s+i,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Q]:"auto.ui.browser.metrics"}})}})}function T0(){new PerformanceObserver(t=>{const n=ye();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const o=Ee(Le()+r.startTime),{start_timestamp:s,op:i}=$(n);if(i==="navigation"&&s&&o<s)continue;const a=Ee(r.duration),c={[Q]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:f,sourceFunctionName:p,sourceCharPosition:h}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),h!==-1&&(c["browser.script.source_char_position"]=h),Jt(n,o,o+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function I0(){En("event",({entries:e})=>{const t=ye();if(t){for(const n of e)if(n.name==="click"){const r=Ee(Le()+n.startTime),o=Ee(n.duration),s={name:ze(n.target),op:"ui.interaction.".concat(n.name),startTime:r,attributes:{[Q]:"auto.ui.browser.metrics"}},i=Sd(n.target);i&&(s.attributes["ui.component_name"]=i),Jt(t,r,r+o,s)}}})}function w0(){return sc(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(rt.cls={value:e.value,unit:""},On=t)},!0)}function k0(){return ic(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(rt.lcp={value:e.value,unit:"millisecond"},je=t)},!0)}function R0(){return a0(({metric:e})=>{e.entries[e.entries.length-1]&&(rt.ttfb={value:e.value,unit:"millisecond"})})}function C0(e,t){const n=qr(),r=Le();if(!(n!=null&&n.getEntries)||!r)return;const o=Ee(r),s=n.getEntries(),{op:i,start_timestamp:a}=$(e);s.slice(nl).forEach(c=>{const u=Ee(c.startTime),d=Ee(Math.max(0,c.duration));if(!(i==="navigation"&&a&&o+u<a))switch(c.entryType){case"navigation":{N0(e,c,o);break}case"mark":case"paint":case"measure":{x0(e,c,u,d,o,t.ignorePerformanceApiSpans);const l=rc(),f=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&f&&(rt.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(rt.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{L0(e,c,c.name,u,d,o,t.ignoreResourceSpans);break}}}),nl=Math.max(s.length-1,0),D0(e),i==="pageload"&&(B0(rt),t.recordClsOnPageloadSpan||delete rt.cls,t.recordLcpOnPageloadSpan||delete rt.lcp,Object.entries(rt).forEach(([c,u])=>{Mg(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",o),e.setAttribute("performance.activationStart",dr()),$0(e,t)),je=void 0,On=void 0,rt={}}function A0(e){if((e==null?void 0:e.entryType)==="measure")try{return e.detail.devtools.track==="Components "}catch(t){return}}function x0(e,t,n,r,o,s){if(A0(t)||["mark","measure"].includes(t.entryType)&&it(t.name,s))return;const i=Wr(!1),a=Ee(i?i.requestStart:0),c=o+Math.max(n,a),u=o+n,d=u+r,l={[Q]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),M0(l,t),c<=d&&Jt(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function M0(e,t){try{const n=t.detail;if(!n)return;if(typeof n=="object"){for(const[r,o]of Object.entries(n))if(o&&Kt(o))e["sentry.browser.measure.detail.".concat(r)]=o;else if(o!==void 0)try{e["sentry.browser.measure.detail.".concat(r)]=JSON.stringify(o)}catch(s){}return}if(Kt(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch(r){}}catch(n){}}function N0(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{lo(e,t,r,n)}),lo(e,t,"secureConnection",n,"TLS/SSL"),lo(e,t,"fetch",n,"cache"),lo(e,t,"domainLookup",n,"DNS"),P0(e,t,n)}function lo(e,t,n,r,o=n){const s=O0(n),i=t[s],a=t["".concat(n,"Start")];!a||!i||Jt(e,r+Ee(a),r+Ee(i),{op:"browser.".concat(o),name:t.name,attributes:{[Q]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function O0(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":"".concat(e,"End")}function P0(e,t,n){const r=n+Ee(t.requestStart),o=n+Ee(t.responseEnd),s=n+Ee(t.responseStart);t.responseEnd&&(Jt(e,r,o,{op:"browser.request",name:t.name,attributes:{[Q]:"auto.ui.browser.metrics"}}),Jt(e,s,o,{op:"browser.response",name:t.name,attributes:{[Q]:"auto.ui.browser.metrics"}}))}function L0(e,t,n,r,o,s,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a=t.initiatorType?"resource.".concat(t.initiatorType):"resource.other";if(i!=null&&i.includes(a))return;const c={[Q]:"auto.resource.browser.metrics"},u=fn(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(z.location.origin),F0(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const d={...c,...mp(t)},l=s+r,f=l+o;Jt(e,l,f,{name:n.replace(z.location.origin,""),op:a,attributes:d})}function D0(e){const t=z.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),fi(n.rtt)&&(rt["connection.rtt"]={value:n.rtt,unit:"millisecond"})),fi(t.deviceMemory)&&e.setAttribute("deviceMemory","".concat(t.deviceMemory," GB")),fi(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function $0(e,t){je&&t.recordLcpOnPageloadSpan&&(je.element&&e.setAttribute("lcp.element",ze(je.element)),je.id&&e.setAttribute("lcp.id",je.id),je.url&&e.setAttribute("lcp.url",je.url.trim().slice(0,200)),je.loadTime!=null&&e.setAttribute("lcp.loadTime",je.loadTime),je.renderTime!=null&&e.setAttribute("lcp.renderTime",je.renderTime),e.setAttribute("lcp.size",je.size)),On!=null&&On.sources&&t.recordClsOnPageloadSpan&&On.sources.forEach((n,r)=>e.setAttribute("cls.source.".concat(r+1),ze(n.node)))}function F0(e,t,n){n.forEach(([r,o])=>{const s=e[r];s!=null&&(typeof s=="number"&&s<b0||typeof s=="string")&&(t[o]=s)})}function B0(e){const t=Wr(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function U0(){return qr()&&Le()?En("element",H0):()=>{}}const H0=({entries:e})=>{const t=ye(),n=t?be(t):void 0,r=n?$(n).description:G().getScopeData().transactionName;e.forEach(o=>{var p,h;const s=o;if(!s.identifier)return;const i=s.name,a=s.renderTime,c=s.loadTime,[u,d]=c?[Ee(c),"load-time"]:a?[Ee(a),"render-time"]:[pe(),"entry-emission"],l=i==="image-paint"?Ee(Math.max(0,(a!=null?a:0)-(c!=null?c:0))):0,f={[Q]:"auto.ui.browser.elementtiming",[Ie]:"ui.elementtiming",[fe]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":s.id,"element.type":((h=(p=s.element)==null?void 0:p.tagName)==null?void 0:h.toLowerCase())||"unknown","element.size":s.naturalWidth&&s.naturalHeight?"".concat(s.naturalWidth,"x").concat(s.naturalHeight):void 0,"element.render_time":a,"element.load_time":c,"element.url":s.url||void 0,"element.identifier":s.identifier,"element.paint_type":i};ar({name:"element[".concat(s.identifier,"]"),attributes:f,startTime:u,onlyIfParent:!0},m=>{m.end(u+l)})})},W0=1e3;let rl,Ki,Ji;function gp(e){Qt("dom",e),Zt("dom",j0)}function j0(){if(!z.document)return;const e=Ze.bind(null,"dom"),t=ol(e,!0);z.document.addEventListener("click",t,!1),z.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{var s,i;const o=(s=z[n])==null?void 0:s.prototype;(i=o==null?void 0:o.hasOwnProperty)!=null&&i.call(o,"addEventListener")&&(Ne(o,"addEventListener",function(a){return function(c,u,d){if(c==="click"||c=="keypress")try{const l=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=l[c]=l[c]||{refCount:0};if(!f.handler){const p=ol(e);f.handler=p,a.call(this,c,p,d)}f.refCount++}catch(l){}return a.call(this,c,u,d)}}),Ne(o,"removeEventListener",function(a){return function(c,u,d){if(c==="click"||c=="keypress")try{const l=this.__sentry_instrumentation_handlers__||{},f=l[c];f&&(f.refCount--,f.refCount<=0&&(a.call(this,c,f.handler,d),f.handler=void 0,delete l[c]),Object.keys(l).length===0&&delete this.__sentry_instrumentation_handlers__)}catch(l){}return a.call(this,c,u,d)}}))})}function z0(e){if(e.type!==Ki)return!1;try{if(!e.target||e.target._sentryId!==Ji)return!1}catch(t){}return!0}function q0(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function ol(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=G0(n);if(q0(n.type,r))return;Ae(n,"_sentryCaptured",!0),r&&!r._sentryId&&Ae(r,"_sentryId",we());const o=n.type==="keypress"?"input":n.type;z0(n)||(e({event:n,name:o,global:t}),Ki=n.type,Ji=r?r._sentryId:void 0),clearTimeout(rl),rl=z.setTimeout(()=>{Ji=void 0,Ki=void 0},W0)}}function G0(e){try{return e.target}catch(t){return null}}let fo;function Os(e){const t="history";Qt(t,e),Zt(t,V0)}function V0(){if(z.addEventListener("popstate",()=>{const t=z.location.href,n=fo;if(fo=t,n===t)return;Ze("history",{from:n,to:t})}),!Qb())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const o=fo,s=Y0(String(r));if(fo=s,o===s)return t.apply(this,n);Ze("history",{from:o,to:s})}return t.apply(this,n)}}Ne(z.history,"pushState",e),Ne(z.history,"replaceState",e)}function Y0(e){try{return new URL(e,z.location.origin).toString()}catch(t){return e}}const No={};function cc(e){const t=No[e];if(t)return t;let n=z[e];if(Bi(n))return No[e]=n.bind(z);const r=z.document;if(r&&typeof r.createElement=="function")try{const o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o);const s=o.contentWindow;s!=null&&s[e]&&(n=s[e]),r.head.removeChild(o)}catch(o){bn&&_.warn("Could not create sandbox iframe for ".concat(e," check, bailing to window.").concat(e,": "),o)}return n&&(No[e]=n.bind(z))}function K0(e){No[e]=void 0}function Gr(...e){return cc("setTimeout")(...e)}const It="__sentry_xhr_v3__";function uc(e){Qt("xhr",e),Zt("xhr",J0)}function J0(){if(!z.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const o=new Error,s=pe()*1e3,i=st(r[0])?r[0].toUpperCase():void 0,a=X0(r[1]);if(!i||!a)return t.apply(n,r);n[It]={method:i,url:a,request_headers:{}},i==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[It];if(u&&n.readyState===4){try{u.status_code=n.status}catch(l){}const d={endTimestamp:pe()*1e3,startTimestamp:s,xhr:n,virtualError:o};Ze("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){const[f,p]=l,h=d[It];return h&&st(f)&&st(p)&&(h.request_headers[f.toLowerCase()]=p),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const o=n[It];if(!o)return t.apply(n,r);r[0]!==void 0&&(o.body=r[0]);const s={startTimestamp:pe()*1e3,xhr:n};return Ze("xhr",s),t.apply(n,r)}})}function X0(e){if(st(e))return e;try{return e.toString()}catch(t){}}function _p(e){return new URLSearchParams(e).toString()}function os(e,t=_){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[_p(e)];if(!e)return[void 0]}catch(n){return bn&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return bn&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function lc(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function yp(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return bn&&_.error(n,"Failed to get xhr response headers",e),{}}return t?t.split("\r\n").reduce((n,r)=>{const[o,s]=r.split(": ");return s&&(n[o.toLowerCase()]=s),n},{}):{}}const pi=[],Oo=new Map,Cn=new Map,Q0=60;function Z0(){if(qr()&&Le()){const t=eT();return()=>{t()}}return()=>{}}const Xi={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function eT(){return lp(tT)}const tT=({metric:e})=>{if(e.value==null)return;const t=Ee(e.value);if(t>Q0)return;const n=e.entries.find(h=>h.duration===e.value&&Xi[h.name]);if(!n)return;const{interactionId:r}=n,o=Xi[n.name],s=Ee(Le()+n.startTime),i=ye(),a=i?be(i):void 0,c=r!=null?Oo.get(r):void 0,u=(c==null?void 0:c.span)||a,d=u?$(u).description:G().getScopeData().transactionName,l=(c==null?void 0:c.elementName)||ze(n.target),f={[Q]:"auto.http.browser.inp",[Ie]:"ui.interaction.".concat(o),[ir]:n.duration},p=ac({name:l,transaction:d,attributes:f,startTime:s});p&&(p.addEvent("inp",{[Nr]:"millisecond",[Or]:e.value}),p.end(s+t))};function nT(){const e=Object.keys(Xi);Qo()&&e.forEach(o=>{z.addEventListener(o,t,{capture:!0,passive:!0})});function t(o){const s=o.target;if(!s)return;const i=ze(s),a=Math.round(o.timeStamp);if(Cn.set(a,i),Cn.size>50){const c=Cn.keys().next().value;c!==void 0&&Cn.delete(c)}}function n(o){const s=Math.round(o.startTime);let i=Cn.get(s);if(!i)for(let a=-5;a<=5;a++){const c=Cn.get(s+a);if(c){i=c;break}}return i||"<unknown>"}const r=({entries:o})=>{const s=ye(),i=s&&be(s);o.forEach(a=>{if(!p0(a))return;const c=a.interactionId;if(c==null||Oo.has(c))return;const u=a.target?ze(a.target):n(a);if(pi.length>10){const d=pi.shift();Oo.delete(d)}pi.push(c),Oo.set(c,{span:i,elementName:u})})};En("event",r),En("first-input",r)}const rT=40;function Sp(e,t=cc("fetch")){let n=0,r=0;async function o(s){const i=s.body.length;n+=i,r++;const a={body:s.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{const c=await t(e.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw K0("fetch"),c}finally{n-=i,r--}}return G_(e,o,ff(e.bufferSize||rT))}const oT=10,sT=20,iT=30,aT=40,cT=50;function Qn(e,t,n,r){const o={filename:e,function:t==="<anonymous>"?gt:t,in_app:!0};return n!==void 0&&(o.lineno=n),r!==void 0&&(o.colno=r),o}const uT=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,lT=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,dT=/\((\S*)(?::(\d+))(?::(\d+))\)/,fT=/at (.+?) ?\(data:(.+?),/,pT=e=>{const t=e.match(fT);if(t)return{filename:"<data:".concat(t[2],">"),function:t[1]};const n=uT.exec(e);if(n){const[,o,s,i]=n;return Qn(o,gt,+s,+i)}const r=lT.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=dT.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[s,i]=bp(r[1]||gt,r[2]);return Qn(i,s,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},hT=[iT,pT],mT=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,gT=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,_T=e=>{const t=mT.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=gT.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let r=t[3],o=t[1]||gt;return[o,r]=bp(o,r),Qn(r,o,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},yT=[cT,_T],ST=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,bT=e=>{const t=ST.exec(e);return t?Qn(t[2],t[1]||gt,+t[3],t[4]?+t[4]:void 0):void 0},jA=[aT,bT],ET=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,vT=e=>{const t=ET.exec(e);return t?Qn(t[2],t[3]||gt,+t[1]):void 0},zA=[oT,vT],TT=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,IT=e=>{const t=TT.exec(e);return t?Qn(t[5],t[3]||t[4]||gt,+t[1],+t[2]):void 0},qA=[sT,IT],wT=[hT,yT],kT=fd(...wT),bp=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:gt,n?"safari-extension:".concat(t):"safari-web-extension:".concat(t)]:[e,t]};function GA(e,{metadata:t,tunnel:n,dsn:r}){const o={event_id:e.event_id,sent_at:new Date().toISOString(),...(t==null?void 0:t.sdk)&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Lt(r)}},s=RT(e);return lt(o,[s])}function RT(e){return[{type:"user_report"},e]}const M=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,po=1024,CT="Breadcrumbs",AT=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:CT,setup(n){t.console&&Oa(OT(n)),t.dom&&gp(NT(n,t.dom)),t.xhr&&uc(PT(n)),t.fetch&&Ga(LT(n)),t.history&&Os(DT(n)),t.sentry&&n.on("beforeSendEvent",MT(n))}}}),xT=AT;function MT(e){return function(n){N()===e&&St({category:"sentry.".concat(n.type==="transaction"?"transaction":"event"),event_id:n.event_id,level:n.level,message:on(n)},{event:n})}}function NT(e,t){return function(r){if(N()!==e)return;let o,s,i=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>po&&(M&&_.warn("`dom.maxStringLength` cannot exceed ".concat(po,", but a value of ").concat(a," was configured. Sentry will use ").concat(po," instead.")),a=po),typeof i=="string"&&(i=[i]);try{const u=r.event,d=$T(u)?u.target:u;o=ze(d,{keyAttrs:i,maxStringLength:a}),s=Sd(d)}catch(u){o="<unknown>"}if(o.length===0)return;const c={category:"ui.".concat(r.name),message:o};s&&(c.data={"ui.component_name":s}),St(c,{event:r.event,name:r.name,global:r.global})}}function OT(e){return function(n){if(N()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Pa(n.level),message:Bo(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message="Assertion failed: ".concat(Bo(n.args.slice(1)," ")||"console.assert"),r.data.arguments=n.args.slice(1);else return;St(r,{input:n.args,level:n.level})}}function PT(e){return function(n){if(N()!==e)return;const{startTimestamp:r,endTimestamp:o}=n,s=n.xhr[It];if(!r||!o||!s)return;const{method:i,url:a,status_code:c,body:u}=s,d={method:i,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:o},f={category:"xhr",data:d,type:"http",level:Ff(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,l),St(f,l)}}function LT(e){return function(n){if(N()!==e)return;const{startTimestamp:r,endTimestamp:o}=n;if(o&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const s=n.fetchData,i={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o},a={category:"fetch",data:s,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,i),St(a,i)}else{const s=n.response,i={...n.fetchData,status_code:s==null?void 0:s.status};n.fetchData.request_body_size,n.fetchData.response_body_size,s==null||s.status;const a={input:n.args,response:s,startTimestamp:r,endTimestamp:o},c={category:"fetch",data:i,type:"http",level:Ff(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),St(c,a)}}}function DT(e){return function(n){if(N()!==e)return;let r=n.from,o=n.to;const s=fn(P.location.href);let i=r?fn(r):void 0;const a=fn(o);i!=null&&i.path||(i=s),s.protocol===a.protocol&&s.host===a.host&&(o=a.relative),s.protocol===i.protocol&&s.host===i.host&&(r=i.relative),St({category:"navigation",data:{from:r,to:o}})}}function $T(e){return!!e&&!!e.target}const FT=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],BT="BrowserApiErrors",UT=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:BT,setupOnce(){t.setTimeout&&Ne(P,"setTimeout",sl),t.setInterval&&Ne(P,"setInterval",sl),t.requestAnimationFrame&&Ne(P,"requestAnimationFrame",WT),t.XMLHttpRequest&&"XMLHttpRequest"in P&&Ne(XMLHttpRequest.prototype,"send",jT);const n=t.eventTarget;n&&(Array.isArray(n)?n:FT).forEach(o=>zT(o,t))}}}),HT=UT;function sl(e){return function(...t){const n=t[0];return t[0]=Xn(n,{mechanism:{handled:!1,type:"auto.browser.browserapierrors.".concat(Ct(e))}}),e.apply(this,t)}}function WT(e){return function(t){return e.apply(this,[Xn(t,{mechanism:{data:{handler:Ct(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function jT(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(o=>{o in n&&typeof n[o]=="function"&&Ne(n,o,function(s){const i={mechanism:{data:{handler:Ct(s)},handled:!1,type:"auto.browser.browserapierrors.xhr.".concat(o)}},a=ma(s);return a&&(i.mechanism.data.handler=Ct(a)),Xn(s,i)})}),e.apply(this,t)}}function zT(e,t){var o,s;const r=(o=P[e])==null?void 0:o.prototype;(s=r==null?void 0:r.hasOwnProperty)!=null&&s.call(r,"addEventListener")&&(Ne(r,"addEventListener",function(i){return function(a,c,u){try{qT(c)&&(c.handleEvent=Xn(c.handleEvent,{mechanism:{data:{handler:Ct(c),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch(d){}return t.unregisterOriginalCallbacks&&GT(this,a,c),i.apply(this,[a,Xn(c,{mechanism:{data:{handler:Ct(c),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),u])}}),Ne(r,"removeEventListener",function(i){return function(a,c,u){try{const d=c.__sentry_wrapped__;d&&i.call(this,a,d,u)}catch(d){}return i.call(this,a,c,u)}}))}function qT(e){return typeof e.handleEvent=="function"}function GT(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}const VT=()=>({name:"BrowserSession",setupOnce(){if(typeof P.document>"u"){M&&_.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}ru({ignoreDuration:!0}),ou(),Os(({from:e,to:t})=>{e!==void 0&&e!==t&&(ru({ignoreDuration:!0}),ou())})}}),YT="GlobalHandlers",KT=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:YT,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(XT(n),il("onerror")),t.onunhandledrejection&&(QT(n),il("onunhandledrejection"))}}}),JT=KT;function XT(e){pd(t=>{const{stackParser:n,attachStacktrace:r}=Tp();if(N()!==e||ep())return;const{msg:o,url:s,line:i,column:a,error:c}=t,u=ZT(xs(n,c||o,void 0,r,!1),s,i,a);u.level="error",Lr(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function QT(e){hd(t=>{const{stackParser:n,attachStacktrace:r}=Tp();if(N()!==e||ep())return;const o=Ep(t),s=Kt(o)?vp(o):xs(n,o,void 0,r,!0);s.level="error",Lr(s,{originalException:o,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function Ep(e){if(Kt(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(t){}return e}function vp(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: ".concat(String(e))}]}}}function ZT(e,t,n,r){var f;const o=e.exception=e.exception||{},s=o.values=o.values||[],i=s[0]=s[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=(f=eI(t))!=null?f:Tn();return c.length===0&&c.push({colno:u,filename:l,function:gt,in_app:!0,lineno:d}),e}function il(e){M&&_.log("Global Handler attached: ".concat(e))}function Tp(){const e=N();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function eI(e){if(!(!st(e)||e.length===0)){if(e.startsWith("data:")){const t=e.match(/^data:([^;]+)/),n=t?t[1]:"text/javascript",r=e.includes("base64,");return"<data:".concat(n).concat(r?",base64":"",">")}return e.slice(0,1024)}}const tI=()=>({name:"HttpContext",preprocessEvent(e){var r;if(!P.navigator&&!P.location&&!P.document)return;const t=Qa(),n={...t.headers,...(r=e.request)==null?void 0:r.headers};e.request={...t,...e.request,headers:n}}}),nI="cause",rI=5,oI="LinkedErrors",sI=((e={})=>{const t=e.limit||rI,n=e.key||nI;return{name:oI,preprocessEvent(r,o,s){const i=s.getOptions();vy(Za,i.stackParser,n,t,r,o)}}}),iI=sI;function aI(){return cI()?(M&&Xt(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function cI(){var s;if(typeof P.window>"u")return!1;const e=P;if(e.nw)return!1;const t=e.chrome||e.browser;if(!((s=t==null?void 0:t.runtime)!=null&&s.id))return!1;const n=Tn(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(P===P.top&&r.some(i=>n.startsWith("".concat(i,"://"))))}function uI(e){return[hy(),ly(),HT(),xT(),JT(),iI(),My(),tI(),VT()]}function lI(e={}){const t=!e.skipBrowserExtensionCheck&&aI(),n={...e,enabled:t?!1:e.enabled,stackParser:dm(e.stackParser||kT),integrations:g_({integrations:e.integrations,defaultIntegrations:e.defaultIntegrations==null?uI():e.defaultIntegrations}),transport:e.transport||Sp};return H_(Bv,n)}function VA(){}function YA(e){e()}function al(e={}){const t=P.document,n=(t==null?void 0:t.head)||(t==null?void 0:t.body);if(!n){M&&_.error("[showReportDialog] Global document not defined");return}const r=G(),o=N(),s=o==null?void 0:o.getDsn();if(!s){M&&_.error("[showReportDialog] DSN not configured");return}const i={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||c_()},a=P.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=h_(s,i);const{onLoad:c,onClose:u}=i;if(c&&(a.onload=c),u){const d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{P.removeEventListener("message",d)}};P.addEventListener("message",d)}n.appendChild(a)}const dI=H,fI="ReportingObserver",cl=new WeakMap,pI=((e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(r){if(cl.has(N()))for(const o of r)Ye(s=>{s.setExtra("url",o.url);const i="ReportingObserver [".concat(o.type,"]");let a="No details available";if(o.body){const c={};for(const u in o.body)c[u]=o.body[u];if(s.setExtra("body",c),o.type==="crash"){const u=o.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=o.body.message||a}Oi("".concat(i,": ").concat(a))})}return{name:fI,setupOnce(){if(!eE())return;new dI.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){cl.set(r,!0)}}}),KA=pI,hI="HttpClient",mI=((e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:hI,setup(n){TI(n,t),II(n,t)}}}),JA=mI;function gI(e,t,n,r,o){if(wp(e,n.status,n.url)){const s=wI(t,r);let i,a,c,u;Rp()&&([i,c]=ul("Cookie",s),[a,u]=ul("Set-Cookie",n));const d=kp({url:s.url,method:s.method,status:n.status,requestHeaders:i,responseHeaders:a,requestCookies:c,responseCookies:u,error:o,type:"fetch"});Lr(d)}}function ul(e,t){const n=SI(t.headers);let r;try{const o=n[e]||n[e.toLowerCase()]||void 0;o&&(r=Ip(o))}catch(o){}return[n,r]}function _I(e,t,n,r,o){if(wp(e,t.status,t.responseURL)){let s,i,a;if(Rp()){try{const u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(i=Ip(u))}catch(u){}try{a=bI(t)}catch(u){}s=r}const c=kp({url:t.responseURL,method:n,status:t.status,requestHeaders:s,responseHeaders:a,responseCookies:i,error:o,type:"xhr"});Lr(c)}}function yI(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Ip(e){return e.split("; ").reduce((t,n)=>{const[r,o]=n.split("=");return r&&o&&(t[r]=o),t},{})}function SI(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function bI(e){const t=e.getAllResponseHeaders();return t?t.split("\r\n").reduce((n,r)=>{const[o,s]=r.split(": ");return o&&s&&(n[o]=s),n},{}):{}}function EI(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function vI(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function TI(e,t){Bf()&&Ga(n=>{if(N()!==e)return;const{response:r,args:o,error:s,virtualError:i}=n,[a,c]=o;r&&gI(t,a,r,c,s||i)},!1)}function II(e,t){"XMLHttpRequest"in H&&uc(n=>{if(N()!==e)return;const{error:r,virtualError:o}=n,s=n.xhr,i=s[It];if(!i)return;const{method:a,request_headers:c}=i;try{_I(t,s,a,c,r||o)}catch(u){M&&_.warn("Error while extracting response event form XHR response",u)}})}function wp(e,t,n){return vI(e.failedRequestStatusCodes,t)&&EI(e.failedRequestTargets,n)&&!yf(n,N())}function kp(e){const t=N(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,o="HTTP Client Error with status code: ".concat(e.status),s={message:o,exception:{values:[{type:"Error",value:o,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:yI(e.responseHeaders)}}};return xt(s,{type:"auto.http.client.".concat(e.type),handled:!1}),s}function wI(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function Rp(){const e=N();return e?!!e.getOptions().sendDefaultPii:!1}const hi=H,kI=7,RI="ContextLines",CI=((e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:kI;return{name:RI,processEvent(n){return AI(n,t)}}}),XA=CI;function AI(e,t){var a;const n=hi.document,r=hi.location&&_f(hi.location.href);if(!n||!r)return e;const o=(a=e.exception)==null?void 0:a.values;if(!(o!=null&&o.length))return e;const s=n.documentElement.innerHTML;if(!s)return e;const i=["<!DOCTYPE html>","<html>",...s.split("\n"),"</html>"];return o.forEach(c=>{const u=c.stacktrace;u!=null&&u.frames&&(u.frames=u.frames.map(d=>xI(d,i,r,t)))}),e}function xI(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||Im(t,e,r),e}const MI="GraphQLClient",NI=(e=>({name:MI,setup(t){OI(t,e),PI(t,e)}}));function OI(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{const s=$(n).data||{};if(!(s[Ie]==="http.client"))return;const c=s[Bm]||s["http.url"],u=s[Fm]||s["http.method"];if(!st(c)||!st(u))return;const{endpoints:d}=t,l=it(c,d),f=Ap(r);if(l&&f){const p=xp(f);if(p){const h=Cp(p);n.updateName("".concat(u," ").concat(c," (").concat(h,")")),n.setAttribute("graphql.document",f)}}})}function PI(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{const{category:o,type:s,data:i}=n;if(s==="http"&&(o==="fetch"||o==="xhr")){const d=i==null?void 0:i.url,{endpoints:l}=t,f=it(d,l),p=Ap(r);if(f&&i&&p){const h=xp(p);if(!i.graphql&&h){const m=Cp(h);i["graphql.document"]=h.query,i["graphql.operation"]=m}}}})}function Cp(e){const{query:t,operationName:n}=e,{operationName:r=n,operationType:o}=LI(t);return r?"".concat(o," ").concat(r):"".concat(o)}function Ap(e){const t="xhr"in e;let n;if(t){const r=e.xhr[It];n=r&&os(r.body)[0]}else{const r=lc(e.input);n=os(r)[0]}return n}function LI(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};const o=e.match(n);return o?{operationType:o[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function xp(e){let t;try{const n=JSON.parse(e);!!n.query&&(t=n)}finally{return t}}const QA=NI,de=H,dc="sentryReplaySession",DI="replay_event",fc="Unable to send Replay",$I=3e5,FI=9e5,BI=5e3,UI=5500,HI=6e4,WI=5e3,jI=3,ll=15e4,ho=5e3,zI=3e3,qI=300,pc=2e7,GI=4999,VI=15e3,dl=36e5;var YI=Object.defineProperty,KI=(e,t,n)=>t in e?YI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fl=(e,t,n)=>KI(e,typeof t!="symbol"?t+"":t,n),Te=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Te||{});function JI(e){return e.nodeType===e.ELEMENT_NODE}function Sr(e){const t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function br(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function XI(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function QI(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import","url(".concat(JSON.stringify(e.href),")")];return e.layerName===""?n.push("layer"):e.layerName&&n.push("layer(".concat(e.layerName,")")),e.supportsText&&n.push("supports(".concat(e.supportsText,")")),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function ss(e){try{const t=e.rules||e.cssRules;return t?XI(Array.from(t,Mp).join("")):null}catch(t){return null}}function ZI(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,o=r[n],s=r.getPropertyPriority(o);t+="".concat(o,":").concat(r.getPropertyValue(o)).concat(s?" !important":"",";")}return"".concat(e.selectorText," { ").concat(t," }")}function Mp(e){let t;if(tw(e))try{t=ss(e.styleSheet)||QI(e)}catch(n){}else if(nw(e)){let n=e.cssText;const r=e.selectorText.includes(":"),o=typeof e.style.all=="string"&&e.style.all;if(o&&(n=ZI(e)),r&&(n=ew(n)),r||o)return n}return t||e.cssText}function ew(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function tw(e){return"styleSheet"in e}function nw(e){return"selectorText"in e}let Np=class{constructor(){fl(this,"idNodeMap",new Map),fl(this,"nodeMetaMap",new WeakMap)}getId(t){var r;if(!t)return-1;const n=(r=this.getMeta(t))==null?void 0:r.id;return n!=null?n:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function rw(){return new Np}function Ps({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function wr({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function Zn(e){return e.toLowerCase()}function Qi(e){return e.toUpperCase()}const pl="__rrweb_original__";function ow(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let o=0;o<e.height;o+=n){const s=t.getImageData,i=pl in s?s[pl]:s;if(new Uint32Array(i.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer).some(c=>c!==0))return!1}return!0}function hc(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Zn(t):null}function is(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Op(e,t){var s;let n;try{n=new URL(e,t!=null?t:window.location.href)}catch(i){return null}const r=/\.([0-9a-z]+)(?:$)/i,o=n.pathname.match(r);return(s=o==null?void 0:o[1])!=null?s:null}const hl={};function Pp(e){const t=hl[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);const s=o.contentWindow;s&&s[e]&&(r=s[e]),n.head.removeChild(o)}catch(o){}return hl[e]=r.bind(window)}function Zi(...e){return Pp("setTimeout")(...e)}function Lp(...e){return Pp("clearTimeout")(...e)}function Dp(e){try{return e.contentDocument}catch(t){}}let sw=1;const iw=new RegExp("[^a-z0-9-_:]"),kr=-2;function mc(){return sw++}function aw(e){if(e instanceof HTMLFormElement)return"form";const t=Zn(e.tagName);return iw.test(t)?"div":t}function cw(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let An,ml;const uw=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,lw=/^(?:[a-z+]+:)?\/\//i,dw=/^www\..*/i,fw=/^(data:)([^,]*),(.*)/i;function as(e,t){return(e||"").replace(uw,(n,r,o,s,i,a)=>{const c=o||i||a,u=r||s||"";if(!c)return n;if(lw.test(c)||dw.test(c)||fw.test(c))return"url(".concat(u).concat(c).concat(u,")");if(c[0]==="/")return"url(".concat(u).concat(cw(t)+c).concat(u,")");const d=t.split("/"),l=c.split("/");d.pop();for(const f of l)f!=="."&&(f===".."?d.pop():d.push(f));return"url(".concat(u).concat(d.join("/")).concat(u,")")})}const pw=/^[^ \t\n\r\u000c]+/,hw=/^[, \t\n\r\u000c]+/;function mw(e,t){if(t.trim()==="")return t;let n=0;function r(s){let i;const a=s.exec(t.substring(n));return a?(i=a[0],n+=i.length,i):""}const o=[];for(;r(hw),!(n>=t.length);){let s=r(pw);if(s.slice(-1)===",")s=Pn(e,s.substring(0,s.length-1)),o.push(s);else{let i="";s=Pn(e,s);let a=!1;for(;;){const c=t.charAt(n);if(c===""){o.push((s+i).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,o.push((s+i).trim());break}else c==="("&&(a=!0);i+=c,n+=1}}}return o.join(", ")}const gl=new WeakMap;function Pn(e,t){return!t||t.trim()===""?t:Ls(e,t)}function gw(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Ls(e,t){let n=gl.get(e);if(n||(n=e.createElement("a"),gl.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function $p(e,t,n,r,o,s){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?Pn(e,r):n==="srcset"?mw(e,r):n==="style"?as(r,Ls(e)):t==="object"&&n==="data"?Pn(e,r):typeof s=="function"?s(n,r,o):r)}function Fp(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function _w(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let o=e.classList.length;o--;){const s=e.classList[o];if(t.test(s))return!0}if(n)return e.matches(n)}catch(o){}return!1}function yw(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function cn(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:cn(e.parentNode,t,n,r+1)}function Ln(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(".".concat(e)))return!0}else if(yw(r,e))return!0}return!!(t&&r.matches(t))}catch(o){return!1}}}function er(e,t,n,r,o,s){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(i===null)return!1;if(i.tagName==="INPUT"){const u=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(s){if(c=cn(i,Ln(r,o)),c<0)return!0;a=cn(i,Ln(t,n),c>=0?c:1/0)}else{if(a=cn(i,Ln(t,n)),a<0)return!1;c=cn(i,Ln(r,o),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!s}catch(i){}return!!s}function Sw(e,t,n){const r=e.contentWindow;if(!r)return;let o=!1,s;try{s=r.document.readyState}catch(a){return}if(s!=="complete"){const a=Zi(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{Lp(a),o=!0,t()});return}const i="about:blank";if(r.location.href!==i||e.src===i||e.src==="")return Zi(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function bw(e,t,n){let r=!1,o;try{o=e.sheet}catch(i){return}if(o)return;const s=Zi(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{Lp(s),r=!0,t()})}function Ew(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:b,recordCanvas:I,keepIframeSrcFn:T,newlyAddedElement:S=!1}=t,w=vw(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Te.Document,childNodes:[],compatMode:e.compatMode}:{type:Te.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Te.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return Iw(e,{doc:n,blockClass:o,blockSelector:s,unblockSelector:i,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:g,dataURLOptions:y,inlineImages:b,recordCanvas:I,keepIframeSrcFn:T,newlyAddedElement:S,rootId:w,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f});case e.TEXT_NODE:return Tw(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:m,maskInputOptions:h,maskInputFn:g,rootId:w});case e.CDATA_SECTION_NODE:return{type:Te.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:Te.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function vw(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function Tw(e,t){var y;const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:s,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const p=l==="STYLE"?!0:void 0,h=l==="SCRIPT"?!0:void 0,m=l==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||(y=e.parentNode.sheet)!=null&&y.cssRules&&(f=ss(e.parentNode.sheet))}catch(b){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(b),e)}f=as(f,Ls(t.doc))}h&&(f="SCRIPT_PLACEHOLDER");const g=er(e,r,s,o,i,n);if(!p&&!h&&!m&&f&&g&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),m&&f&&(c.textarea||g)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){const b=Ps({type:null,tagName:l,maskInputOptions:c});f=wr({isMasked:er(e,r,s,o,i,b),element:e,value:f,maskInputFn:u})}return{type:Te.Text,textContent:f||"",isStyle:p,rootId:d}}function Iw(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:s,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:m,maskTextClass:g,unmaskTextClass:y,maskTextSelector:b,unmaskTextSelector:I}=t,T=_w(e,r,o,s),S=aw(e);let w={};const E=e.attributes.length;for(let v=0;v<E;v++){const x=e.attributes[v];x.name&&!Fp(S,x.name,x.value)&&(w[x.name]=$p(n,S,Zn(x.name),x.value,e,c))}if(S==="link"&&i){const v=Array.from(n.styleSheets).find(B=>B.href===e.href);let x=null;v&&(x=ss(v)),x&&(w.rel=null,w.href=null,w.crossorigin=null,w._cssText=as(x,v.href))}if(S==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const v=ss(e.sheet);v&&(w._cssText=as(v,Ls(n)))}if(S==="input"||S==="textarea"||S==="select"||S==="option"){const v=e,x=hc(v),B=is(v,Qi(S),x),k=v.checked;if(x!=="submit"&&x!=="button"&&B){const A=er(v,g,b,y,I,Ps({type:x,tagName:Qi(S),maskInputOptions:a}));w.value=wr({isMasked:A,element:v,value:B,maskInputFn:u})}k&&(w.checked=k)}if(S==="option"&&(e.selected&&!a.select?w.selected=!0:delete w.selected),S==="canvas"&&f){if(e.__context==="2d")ow(e)||(w.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const v=e.toDataURL(d.type,d.quality),x=n.createElement("canvas");x.width=e.width,x.height=e.height;const B=x.toDataURL(d.type,d.quality);v!==B&&(w.rr_dataURL=v)}}if(S==="img"&&l){An||(An=n.createElement("canvas"),ml=An.getContext("2d"));const v=e,x=v.currentSrc||v.getAttribute("src")||"<unknown-src>",B=v.crossOrigin,k=()=>{v.removeEventListener("load",k);try{An.width=v.naturalWidth,An.height=v.naturalHeight,ml.drawImage(v,0,0),w.rr_dataURL=An.toDataURL(d.type,d.quality)}catch(A){if(v.crossOrigin!=="anonymous"){v.crossOrigin="anonymous",v.complete&&v.naturalWidth!==0?k():v.addEventListener("load",k);return}else console.warn("Cannot inline img src=".concat(x,"! Error: ").concat(A))}v.crossOrigin==="anonymous"&&(B?w.crossOrigin=B:v.removeAttribute("crossorigin"))};v.complete&&v.naturalWidth!==0?k():v.addEventListener("load",k)}if((S==="audio"||S==="video")&&(w.rr_mediaState=e.paused?"paused":"played",w.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(w.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(w.rr_scrollTop=e.scrollTop)),T){const{width:v,height:x}=e.getBoundingClientRect();w={class:w.class,rr_width:"".concat(v,"px"),rr_height:"".concat(x,"px")}}S==="iframe"&&!p(w.src)&&(!T&&!Dp(e)&&(w.rr_src=w.src),delete w.src);let R;try{customElements.get(S)&&(R=!0)}catch(v){}return{type:Te.Element,tagName:S,attributes:w,childNodes:[],isSVG:gw(e)||void 0,needBlock:T,rootId:m,isCustom:R}}function le(e){return e==null?"":e.toLowerCase()}function ww(e,t){if(t.comment&&e.type===Te.Comment)return!0;if(e.type===Te.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Op(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(le(e.attributes.name).match(/^msapplication-tile(image|color)$/)||le(e.attributes.name)==="application-name"||le(e.attributes.rel)==="icon"||le(e.attributes.rel)==="apple-touch-icon"||le(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&le(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(le(e.attributes.property).match(/^(og|twitter|fb):/)||le(e.attributes.name).match(/^(og|twitter):/)||le(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(le(e.attributes.name)==="robots"||le(e.attributes.name)==="googlebot"||le(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(le(e.attributes.name)==="author"||le(e.attributes.name)==="generator"||le(e.attributes.name)==="framework"||le(e.attributes.name)==="publisher"||le(e.attributes.name)==="progid"||le(e.attributes.property).match(/^article:/)||le(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(le(e.attributes.name)==="google-site-verification"||le(e.attributes.name)==="yandex-verification"||le(e.attributes.name)==="csrf-token"||le(e.attributes.name)==="p:domain_verify"||le(e.attributes.name)==="verify-v1"||le(e.attributes.name)==="verification"||le(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Dn(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:I={},inlineImages:T=!1,recordCanvas:S=!1,onSerialize:w,onIframeLoad:E,iframeLoadTimeout:R=5e3,onBlockedImageLoad:v,onStylesheetLoad:x,stylesheetLoadTimeout:B=5e3,keepIframeSrcFn:k=()=>!1,newlyAddedElement:A=!1}=t;let{preserveWhiteSpace:U=!0}=t;const J=Ew(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:I,inlineImages:T,recordCanvas:S,keepIframeSrcFn:k,newlyAddedElement:A});if(!J)return console.warn(e,"not serialized"),null;let X;r.hasNode(e)?X=r.getId(e):ww(J,b)||!U&&J.type===Te.Text&&!J.isStyle&&!J.textContent.replace(/^\s+|\s+$/gm,"").length?X=kr:X=mc();const F=Object.assign(J,{id:X});if(r.add(e,F),X===kr)return null;w&&w(e);let D=!f;if(F.type===Te.Element){D=D&&!F.needBlock;const L=e.shadowRoot;L&&br(L)&&(F.isShadowHost=!0)}if((F.type===Te.Document||F.type===Te.Element)&&D){b.headWhitespace&&F.type===Te.Element&&F.tagName==="head"&&(U=!1);const L={doc:n,mirror:r,blockClass:o,blockSelector:s,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:I,inlineImages:T,recordCanvas:S,preserveWhiteSpace:U,onSerialize:w,onIframeLoad:E,iframeLoadTimeout:R,onBlockedImageLoad:v,onStylesheetLoad:x,stylesheetLoadTimeout:B,keepIframeSrcFn:k},O=e.childNodes?Array.from(e.childNodes):[];for(const V of O){const se=Dn(V,L);se&&F.childNodes.push(se)}if(JI(e)&&e.shadowRoot)for(const V of Array.from(e.shadowRoot.childNodes)){const se=Dn(V,L);se&&(br(e.shadowRoot)&&(se.isShadow=!0),F.childNodes.push(se))}}if(e.parentNode&&Sr(e.parentNode)&&br(e.parentNode)&&(F.isShadow=!0),F.type===Te.Element&&F.tagName==="iframe"&&!F.needBlock&&Sw(e,()=>{const L=Dp(e);if(L&&E){const O=Dn(L,{doc:L,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:I,inlineImages:T,recordCanvas:S,preserveWhiteSpace:U,onSerialize:w,onIframeLoad:E,iframeLoadTimeout:R,onStylesheetLoad:x,stylesheetLoadTimeout:B,keepIframeSrcFn:k});O&&E(e,O)}},R),F.type===Te.Element&&F.tagName==="img"&&!e.complete&&F.needBlock){const L=e,O=()=>{if(L.isConnected&&!L.complete&&v)try{const V=L.getBoundingClientRect();V.width>0&&V.height>0&&v(L,F,V)}catch(V){}L.removeEventListener("load",O)};L.isConnected&&L.addEventListener("load",O)}return F.type===Te.Element&&F.tagName==="link"&&typeof F.attributes.rel=="string"&&(F.attributes.rel==="stylesheet"||F.attributes.rel==="preload"&&typeof F.attributes.href=="string"&&Op(F.attributes.href)==="css")&&bw(e,()=>{if(x){const L=Dn(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:I,inlineImages:T,recordCanvas:S,preserveWhiteSpace:U,onSerialize:w,onIframeLoad:E,iframeLoadTimeout:R,onStylesheetLoad:x,stylesheetLoadTimeout:B,keepIframeSrcFn:k});L&&x(e,L)}},B),F.type===Te.Element&&delete F.needBlock,F}function kw(e,t){const{mirror:n=new Np,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:s=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:b=!1,dataURLOptions:I,preserveWhiteSpace:T,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:E,onBlockedImageLoad:R,onStylesheetLoad:v,stylesheetLoadTimeout:x,keepIframeSrcFn:B=()=>!1}=t||{};return Dn(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:b==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:b===!1?{}:b,dataURLOptions:I,inlineImages:f,recordCanvas:p,preserveWhiteSpace:T,onSerialize:S,onIframeLoad:w,iframeLoadTimeout:E,onBlockedImageLoad:R,onStylesheetLoad:v,stylesheetLoadTimeout:x,keepIframeSrcFn:B,newlyAddedElement:!1})}function Be(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const xn="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let _l={map:{},getId(){return console.error(xn),-1},getNode(){return console.error(xn),null},removeNodeFromMap(){console.error(xn)},has(){return console.error(xn),!1},reset(){console.error(xn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(_l=new Proxy(_l,{get(e,t,n){return t==="map"&&console.error(xn),Reflect.get(e,t,n)}}));function Rr(e,t,n={}){let r=null,o=0;return function(...s){const i=Date.now();!o&&n.leading===!1&&(o=i);const a=t-(i-o),c=this;a<=0||a>t?(r&&(Ow(r),r=null),o=i,e.apply(c,s)):!r&&n.trailing!==!1&&(r=Ds(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(c,s)},a))}}function Bp(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(i){Ds(()=>{n.set.call(this,i)},0),s&&s.set&&s.set.call(this,i)}}),()=>Bp(e,t,s||{},!0)}function gc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(r){return()=>{}}}let cs=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(cs=()=>new Date().getTime());function Up(e){var n,r,o,s,i,a;const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(t==null?void 0:t.documentElement.scrollLeft)||((r=(n=t==null?void 0:t.body)==null?void 0:n.parentElement)==null?void 0:r.scrollLeft)||((o=t==null?void 0:t.body)==null?void 0:o.scrollLeft)||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(t==null?void 0:t.documentElement.scrollTop)||((i=(s=t==null?void 0:t.body)==null?void 0:s.parentElement)==null?void 0:i.scrollTop)||((a=t==null?void 0:t.body)==null?void 0:a.scrollTop)||0}}function Hp(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Wp(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function jp(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(t){return null}}function Ge(e,t,n,r,o){if(!e)return!1;const s=jp(e);if(!s)return!1;const i=Ln(t,n);if(!o){const u=r&&s.matches(r);return i(s)&&!u}const a=cn(s,i);let c=-1;return a<0?!1:(r&&(c=cn(s,Ln(null,r))),a>-1&&c<0?!0:a<c)}function Rw(e,t){return t.getId(e)!==-1}function mi(e,t){return t.getId(e)===kr}function zp(e,t){if(Sr(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?zp(e.parentNode,t):!0:!0}function ea(e){return!!e.changedTouches}function Cw(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function qp(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Gp(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function ta(e){return!!(e!=null&&e.shadowRoot)}class Aw{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var n;return(n=this.styleIDMap.get(t))!=null?n:-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Vp(e){var n,r;let t=null;return((r=(n=e.getRootNode)==null?void 0:n.call(e))==null?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function xw(e){let t=e,n;for(;n=Vp(t);)t=n;return t}function Mw(e){const t=e.ownerDocument;if(!t)return!1;const n=xw(e);return t.contains(n)}function Yp(e){const t=e.ownerDocument;return t?t.contains(e)||Mw(e):!1}const yl={};function _c(e){const t=yl[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);const s=o.contentWindow;s&&s[e]&&(r=s[e]),n.head.removeChild(o)}catch(o){}return yl[e]=r.bind(window)}function Nw(...e){return _c("requestAnimationFrame")(...e)}function Ds(...e){return _c("setTimeout")(...e)}function Ow(...e){return _c("clearTimeout")(...e)}var Y=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Y||{}),q=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(q||{}),Fe=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Fe||{}),Tt=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Tt||{}),Mn=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Mn||{});function yc(e){try{return e.contentDocument}catch(t){}}function Pw(e){try{return e.contentWindow}catch(t){}}function Sl(e){return"__ln"in e}class Lw{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=(n==null?void 0:n.next)||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&Sl(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&Sl(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const bl=(e,t)=>"".concat(e,"@").concat(t);class Dw{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new Lw,o=c=>{let u=c,d=kr;for(;d===kr;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},s=c=>{if(!c.parentNode||!Yp(c))return;const u=Sr(c.parentNode)?this.mirror.getId(Vp(c)):this.mirror.getId(c.parentNode),d=o(c);if(u===-1||d===-1)return r.addNode(c);const l=Dn(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{qp(f,this.mirror)&&!Ge(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),Gp(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),ta(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{Ge(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)},onBlockedImageLoad:(f,p,{width:h,height:m})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:p.id,attributes:{style:{width:"".concat(h,"px"),height:"".concat(m,"px")}}}]})}});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)El(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||s(c);for(const c of this.addedSet)!vl(this.droppedSet,c)&&!El(this.removes,c,this.mirror)||vl(this.movedSet,c)?s(c):this.droppedSet.add(c);let i=null;for(;r.length;){let c=null;if(i){const u=this.mirror.getId(i.value.parentNode),d=o(i.value);u!==-1&&d!==-1&&(c=i)}if(!c){let u=r.tail;for(;u;){const d=u;if(u=u.previous,d){const l=this.mirror.getId(d.value.parentNode);if(o(d.value)===-1)continue;if(l!==-1){c=d;break}else{const p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}i=c.previous,r.removeNode(c.value),s(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!mi(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!Ge(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:er(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,jp(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,o=t.target.getAttribute(r);if(r==="value"){const i=hc(n),a=n.tagName;o=is(n,a,i);const c=Ps({maskInputOptions:this.maskInputOptions,tagName:a,type:i}),u=er(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);o=wr({isMasked:u,element:n,value:o,maskInputFn:this.maskInputFn})}if(Ge(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===t.oldValue)return;let s=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(o))if(!yc(n))r="rr_src";else return;if(s||(s={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(t.target,s)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Fp(n.tagName,r)&&(s.attributes[r]=$p(this.doc,Zn(n.tagName),Zn(r),o,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(a){this.unattachedDoc=this.doc}const i=this.unattachedDoc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==i.style.getPropertyValue(a)||u!==i.style.getPropertyPriority(a)?u===""?s.styleDiff[a]=c:s.styleDiff[a]=[c,u]:s._unchangedStyles[a]=[c,u]}for(const a of Array.from(i.style))n.style.getPropertyValue(a)===""&&(s.styleDiff[a]=!1)}break}case"childList":{if(Ge(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),o=Sr(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ge(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||mi(n,this.mirror)||!Rw(n,this.mirror)||(this.addedSet.has(n)?(na(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||zp(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[bl(r,o)]?na(this.movedSet,n):this.removes.push({parentId:o,id:r,isShadow:Sr(t.target)&&br(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(mi(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[bl(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ge(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),ta(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function na(e,t){var n;e.delete(t),(n=t.childNodes)==null||n.forEach(r=>na(e,r))}function El(e,t,n){return e.length===0?!1:$w(e,t,n)}function $w(e,t,n){let r=t.parentNode;for(;r;){const o=n.getId(r);if(e.some(s=>s.id===o))return!0;r=r.parentNode}return!1}function vl(e,t){return e.size===0?!1:Kp(e,t)}function Kp(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:Kp(e,n):!1}let Er;function Fw(e){Er=e}function Bw(){Er=void 0}const ne=e=>Er?(...n)=>{try{return e(...n)}catch(r){if(Er&&Er(r)===!0)return()=>{};throw r}}:e,$n=[];function Vr(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(t){}return e&&e.target}function Jp(e,t){var i,a;const n=new Dw;$n.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const o=(a=(i=window==null?void 0:window.Zone)==null?void 0:i.__symbol__)==null?void 0:a.call(i,"MutationObserver");o&&window[o]&&(r=window[o]);const s=new r(ne(c=>{e.onMutation&&e.onMutation(c)===!1||n.processMutations.bind(n)(c)}));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Uw({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const o=typeof t.mousemove=="number"?t.mousemove:50,s=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let i=[],a;const c=Rr(ne(l=>{const f=Date.now()-a;e(i.map(p=>(p.timeOffset-=f,p)),l),i=[],a=null}),s),u=ne(Rr(ne(l=>{const f=Vr(l),{clientX:p,clientY:h}=ea(l)?l.changedTouches[0]:l;a||(a=cs()),i.push({x:p,y:h,id:r.getId(f),timeOffset:cs()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?q.Drag:l instanceof MouseEvent?q.MouseMove:q.TouchMove)}),o,{trailing:!1})),d=[Be("mousemove",u,n),Be("touchmove",u,n),Be("drag",u,n)];return ne(()=>{d.forEach(l=>l())})}function Hw({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){if(i.mouseInteraction===!1)return()=>{};const a=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,c=[];let u=null;const d=l=>f=>{const p=Vr(f);if(Ge(p,r,o,s,!0))return;let h=null,m=l;if("pointerType"in f){switch(f.pointerType){case"mouse":h=Tt.Mouse;break;case"touch":h=Tt.Touch;break;case"pen":h=Tt.Pen;break}h===Tt.Touch?Fe[l]===Fe.MouseDown?m="TouchStart":Fe[l]===Fe.MouseUp&&(m="TouchEnd"):Tt.Pen}else ea(f)&&(h=Tt.Touch);h!==null?(u=h,(m.startsWith("Touch")&&h===Tt.Touch||m.startsWith("Mouse")&&h===Tt.Mouse)&&(h=null)):Fe[l]===Fe.Click&&(h=u,u=null);const g=ea(f)?f.changedTouches[0]:f;if(!g)return;const y=n.getId(p),{clientX:b,clientY:I}=g;ne(e)({type:Fe[m],id:y,x:b,y:I,...h!==null&&{pointerType:h}})};return Object.keys(Fe).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=Zn(l);const p=d(l);if(window.PointerEvent)switch(Fe[l]){case Fe.MouseDown:case Fe.MouseUp:f=f.replace("mouse","pointer");break;case Fe.TouchStart:case Fe.TouchEnd:return}c.push(Be(f,p,t))}),ne(()=>{c.forEach(l=>l())})}function Xp({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,sampling:i}){const a=ne(Rr(ne(c=>{const u=Vr(c);if(!u||Ge(u,r,o,s,!0))return;const d=n.getId(u);if(u===t&&t.defaultView){const l=Up(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),i.scroll||100));return Be("scroll",a,t)}function Ww({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const o=ne(Rr(ne(()=>{const s=Hp(),i=Wp();(n!==s||r!==i)&&(e({width:Number(i),height:Number(s)}),n=s,r=i)}),200));return Be("resize",o,t)}const jw=["INPUT","TEXTAREA","SELECT"],Tl=new WeakMap;function zw({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:m}){function g(E){let R=Vr(E);const v=E.isTrusted,x=R&&Qi(R.tagName);if(x==="OPTION"&&(R=R.parentElement),!R||!x||jw.indexOf(x)<0||Ge(R,r,o,s,!0))return;const B=R;if(B.classList.contains(i)||a&&B.matches(a))return;const k=hc(R);let A=is(B,x,k),U=!1;const J=Ps({maskInputOptions:c,tagName:x,type:k}),X=er(R,f,h,p,m,J);(k==="radio"||k==="checkbox")&&(U=R.checked),A=wr({isMasked:X,element:R,value:A,maskInputFn:u}),y(R,l?{text:A,isChecked:U,userTriggered:v}:{text:A,isChecked:U});const F=R.name;k==="radio"&&F&&U&&t.querySelectorAll('input[type="radio"][name="'.concat(F,'"]')).forEach(D=>{if(D!==R){const L=wr({isMasked:X,element:D,value:is(D,x,k),maskInputFn:u});y(D,l?{text:L,isChecked:!U,userTriggered:!1}:{text:L,isChecked:!U})}})}function y(E,R){const v=Tl.get(E);if(!v||v.text!==R.text||v.isChecked!==R.isChecked){Tl.set(E,R);const x=n.getId(E);ne(e)({...R,id:x})}}const I=(d.input==="last"?["change"]:["input","change"]).map(E=>Be(E,ne(g),t)),T=t.defaultView;if(!T)return()=>{I.forEach(E=>E())};const S=T.Object.getOwnPropertyDescriptor(T.HTMLInputElement.prototype,"value"),w=[[T.HTMLInputElement.prototype,"value"],[T.HTMLInputElement.prototype,"checked"],[T.HTMLSelectElement.prototype,"value"],[T.HTMLTextAreaElement.prototype,"value"],[T.HTMLSelectElement.prototype,"selectedIndex"],[T.HTMLOptionElement.prototype,"selected"]];return S&&S.set&&I.push(...w.map(E=>Bp(E[0],E[1],{set(){ne(g)({target:this,isTrusted:!1})}},!1,T))),ne(()=>{I.forEach(E=>E())})}function us(e){const t=[];function n(r,o){if(mo("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||mo("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||mo("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||mo("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const i=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(i)}else if(r.parentStyleSheet){const i=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(i)}return o}return n(e,t)}function Ut(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function qw({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:ne((d,l,f)=>{const[p,h]=f,{id:m,styleId:g}=Ut(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,adds:[{rule:p,index:h}]}),d.apply(l,f)})});const s=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:ne((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Ut(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,removes:[{index:p}]}),d.apply(l,f)})});let i;r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:ne((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Ut(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replace:p}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:ne((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Ut(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replaceSync:p}),d.apply(l,f)})}));const c={};go("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(go("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),go("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),go("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:ne((f,p,h)=>{const[m,g]=h,{id:y,styleId:b}=Ut(p.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||b&&b!==-1)&&e({id:y,styleId:b,adds:[{rule:m,index:[...us(p),g||0]}]}),f.apply(p,h)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:ne((f,p,h)=>{const[m]=h,{id:g,styleId:y}=Ut(p.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||y&&y!==-1)&&e({id:g,styleId:y,removes:[{index:[...us(p),m]}]}),f.apply(p,h)})})}),ne(()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=s,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function Qp({mirror:e,stylesheetManager:t},n){var i,a,c;let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const o=n.nodeName==="#document"?(i=n.defaultView)==null?void 0:i.Document:(c=(a=n.ownerDocument)==null?void 0:a.defaultView)==null?void 0:c.ShadowRoot,s=o!=null&&o.prototype?Object.getOwnPropertyDescriptor(o==null?void 0:o.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!o||!s?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){var u;return(u=s.get)==null?void 0:u.call(this)},set(u){var l;const d=(l=s.set)==null?void 0:l.call(this,u);if(r!==null&&r!==-1)try{t.adoptStyleSheets(u,r)}catch(f){}return d}}),ne(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))}function Gw({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:ne((a,c,u)=>{var m;const[d,l,f]=u;if(n.has(d))return s.apply(c,[d,l,f]);const{id:p,styleId:h}=Ut((m=c.parentRule)==null?void 0:m.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||h&&h!==-1)&&e({id:p,styleId:h,set:{property:d,value:l,priority:f},index:us(c.parentRule)}),a.apply(c,u)})});const i=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:ne((a,c,u)=>{var p;const[d]=u;if(n.has(d))return i.apply(c,[d]);const{id:l,styleId:f}=Ut((p=c.parentRule)==null?void 0:p.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:us(c.parentRule)}),a.apply(c,u)})}),ne(()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=i})}function Vw({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:s,doc:i}){const a=ne(u=>Rr(ne(d=>{const l=Vr(d);if(!l||Ge(l,t,n,r,!0))return;const{currentTime:f,volume:p,muted:h,playbackRate:m}=l;e({type:u,id:o.getId(l),currentTime:f,volume:p,muted:h,playbackRate:m})}),s.media||500)),c=[Be("play",a(Mn.Play),i),Be("pause",a(Mn.Pause),i),Be("seeked",a(Mn.Seeked),i),Be("volumechange",a(Mn.VolumeChange),i),Be("ratechange",a(Mn.RateChange),i)];return ne(()=>{c.forEach(u=>u())})}function Yw({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(c,u,d){const l=new s(c,u,d);return o.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};const i=gc(t.fonts,"add",function(a){return function(c){return Ds(ne(()=>{const u=o.get(c);u&&(e(u),o.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=s}),r.push(i),ne(()=>{r.forEach(a=>a())})}function Kw(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:s,selectionCb:i}=e;let a=!0;const c=ne(()=>{const u=t.getSelection();if(!u||a&&(u!=null&&u.isCollapsed))return;a=u.isCollapsed||!1;const d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){const p=u.getRangeAt(f),{startContainer:h,startOffset:m,endContainer:g,endOffset:y}=p;Ge(h,r,o,s,!0)||Ge(g,r,o,s,!0)||d.push({start:n.getId(h),startOffset:m,end:n.getId(g),endOffset:y})}i({ranges:d})});return c(),Be("selectionchange",c)}function Jw({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:gc(n.customElements,"define",function(o){return function(s,i,a){try{t({define:{name:s}})}catch(c){}return o.apply(this,[s,i,a])}})}function Xw(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=Jp(e,e.doc));const o=Uw(e),s=Hw(e),i=Xp(e),a=Ww(e,{win:n}),c=zw(e),u=Vw(e);let d=()=>{},l=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(d=qw(e,{win:n}),l=Qp(e,e.doc),f=Gw(e,{win:n}),e.collectFonts&&(p=Yw(e)));const h=Kw(e),m=Jw(e),g=[];for(const y of e.plugins)g.push(y.observer(y.callback,n,y.options));return ne(()=>{$n.forEach(y=>y.reset()),r==null||r.disconnect(),o(),s(),i(),a(),c(),u(),d(),l(),f(),p(),h(),m(),g.forEach(y=>y())})}function mo(e){return typeof window[e]<"u"}function go(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class ra{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,o){const s=r||this.getIdToRemoteIdMap(t),i=o||this.getRemoteIdToIdMap(t);let a=s.get(n);return a||(a=this.generateIdFn(),s.set(n,a),i.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(s=>this.getId(t,s,r,o))}getRemoteId(t,n,r){const o=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const s=o.get(n);return s||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class Qw{constructor(){this.crossOriginIframeMirror=new ra(mc),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Zw{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new ra(mc),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new ra(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){var o,s;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((o=t.contentWindow)==null||o.addEventListener("message",this.handleMessage.bind(this))),(s=this.loadListener)==null||s.call(this,t);const r=yc(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const o=this.crossOriginIframeMap.get(t.source);if(!o)return;const s=this.transformCrossOriginEvent(o,n.data.event);s&&this.wrappedEmit(s,n.data.isCheckout)}transformCrossOriginEvent(t,n){var r;switch(n.type){case Y.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const o=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,o),this.patchRootIdOnNode(n.data.node,o),{timestamp:n.timestamp,type:Y.IncrementalSnapshot,data:{source:q.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Y.Meta:case Y.Load:case Y.DomContentLoaded:return!1;case Y.Plugin:return n;case Y.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case Y.IncrementalSnapshot:switch(n.data.source){case q.Mutation:return n.data.adds.forEach(o=>{this.replaceIds(o,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(o.node,s)}),n.data.removes.forEach(o=>{this.replaceIds(o,t,["parentId","id"])}),n.data.attributes.forEach(o=>{this.replaceIds(o,t,["id"])}),n.data.texts.forEach(o=>{this.replaceIds(o,t,["id"])}),n;case q.Drag:case q.TouchMove:case q.MouseMove:return n.data.positions.forEach(o=>{this.replaceIds(o,t,["id"])}),n;case q.ViewportResize:return!1;case q.MediaInteraction:case q.MouseInteraction:case q.Scroll:case q.CanvasMutation:case q.Input:return this.replaceIds(n.data,t,["id"]),n;case q.StyleSheetRule:case q.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case q.Font:return n;case q.Selection:return n.data.ranges.forEach(o=>{this.replaceIds(o,t,["start","end"])}),n;case q.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),(r=n.data.styles)==null||r.forEach(o=>{this.replaceStyleIds(o,t,["styleId"])}),n}}return!1}replace(t,n,r,o){for(const s of o)!Array.isArray(n[s])&&typeof n[s]!="number"||(Array.isArray(n[s])?n[s]=t.getIds(r,n[s]):n[s]=t.getId(r,n[s]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Te.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class ek{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class tk{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!br(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const r=Jp({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Xp({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Ds(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Qp({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=yc(t),r=Pw(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(gc(t.prototype,"attachShadow",function(o){return function(s){const i=o.call(this,s);return this.shadowRoot&&Yp(this)&&r.addShadowRoot(this.shadowRoot,n),i}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch(n){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var Il="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nk=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var _o=0;_o<Il.length;_o++)nk[Il.charCodeAt(_o)]=_o;class wl{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class rk{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Aw,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},o=[];for(const s of t){let i;this.styleMirror.has(s)?i=this.styleMirror.getId(s):(i=this.styleMirror.add(s),o.push({styleId:i,rules:Array.from(s.rules||CSSRule,(a,c)=>({rule:Mp(a),index:c}))})),r.styleIds.push(i)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class ok{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(o=>o!==n)}add(t,n){this.active||(this.active=!0,Nw(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let Se,ls;var ad;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((ad=e.contentWindow)==null?void 0:ad.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const nt=rw();function Rt(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:b,maskInputFn:I,maskTextFn:T,maxCanvasSize:S=null,packFn:w,sampling:E={},dataURLOptions:R={},mousemoveWait:v,recordDOM:x=!0,recordCanvas:B=!1,recordCrossOriginIframes:k=!1,recordAfter:A=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:U=!1,collectFonts:J=!1,inlineImages:X=!1,plugins:F,keepIframeSrcFn:D=()=>!1,ignoreCSSAttributes:L=new Set([]),errorHandler:O,onMutation:V,getCanvasManager:se}=e;Fw(O);const he=k?window.parent===window:!0;let ve=!1;if(!he)try{window.parent.document&&(ve=!1)}catch(Z){ve=!0}if(he&&!t)throw new Error("emit function is required");if(!he&&!ve)return()=>{};v!==void 0&&E.mousemove===void 0&&(E.mousemove=v),nt.reset();const De=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},Dt=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};Cw();let $e,Ue=0;const dt=Z=>{for(const Oe of F||[])Oe.eventProcessor&&(Z=Oe.eventProcessor(Z));return w&&!ve&&(Z=w(Z)),Z};Se=(Z,Oe)=>{var We;const ee=Z;if(ee.timestamp=cs(),(We=$n[0])!=null&&We.isFrozen()&&ee.type!==Y.FullSnapshot&&!(ee.type===Y.IncrementalSnapshot&&ee.data.source===q.Mutation)&&$n.forEach(Ke=>Ke.unfreeze()),he)t==null||t(dt(ee),Oe);else if(ve){const Ke={type:"rrweb",event:dt(ee),origin:window.location.origin,isCheckout:Oe};window.parent.postMessage(Ke,"*")}if(ee.type===Y.FullSnapshot)$e=ee,Ue=0;else if(ee.type===Y.IncrementalSnapshot){if(ee.data.source===q.Mutation&&ee.data.isAttachIframe)return;Ue++;const Ke=r&&Ue>=r,ie=n&&$e&&ee.timestamp-$e.timestamp>n;(Ke||ie)&&Re(!0)}};const $t=Z=>{Se({type:Y.IncrementalSnapshot,data:{source:q.Mutation,...Z}})},pr=Z=>Se({type:Y.IncrementalSnapshot,data:{source:q.Scroll,...Z}}),eo=Z=>Se({type:Y.IncrementalSnapshot,data:{source:q.CanvasMutation,...Z}}),hr=Z=>Se({type:Y.IncrementalSnapshot,data:{source:q.AdoptedStyleSheet,...Z}}),te=new rk({mutationCb:$t,adoptedStyleSheetCb:hr}),me=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Qw:new Zw({mirror:nt,mutationCb:$t,stylesheetManager:te,recordCrossOriginIframes:k,wrappedEmit:Se});for(const Z of F||[])Z.getMirror&&Z.getMirror({nodeMirror:nt,crossOriginIframeMirror:me.crossOriginIframeMirror,crossOriginIframeStyleMirror:me.crossOriginIframeStyleMirror});const He=new ok,Me=ik(se,{mirror:nt,win:window,mutationCb:Z=>Se({type:Y.IncrementalSnapshot,data:{source:q.CanvasMutation,...Z}}),recordCanvas:B,blockClass:o,blockSelector:s,unblockSelector:i,maxCanvasSize:S,sampling:E.canvas,dataURLOptions:R,errorHandler:O}),ge=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new ek:new tk({mutationCb:$t,scrollCb:pr,bypassOptions:{onMutation:V,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:De,dataURLOptions:R,maskAttributeFn:b,maskTextFn:T,maskInputFn:I,recordCanvas:B,inlineImages:X,sampling:E,slimDOMOptions:Dt,iframeManager:me,stylesheetManager:te,canvasManager:Me,keepIframeSrcFn:D,processedNodeManager:He},mirror:nt}),Re=(Z=!1)=>{if(!x)return;Se({type:Y.Meta,data:{href:window.location.href,width:Wp(),height:Hp()}},Z),te.reset(),ge.init(),$n.forEach(ee=>ee.lock());const Oe=kw(document,{mirror:nt,blockClass:o,blockSelector:s,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:De,maskAttributeFn:b,maskInputFn:I,maskTextFn:T,slimDOM:Dt,dataURLOptions:R,recordCanvas:B,inlineImages:X,onSerialize:ee=>{qp(ee,nt)&&me.addIframe(ee),Gp(ee,nt)&&te.trackLinkElement(ee),ta(ee)&&ge.addShadowRoot(ee.shadowRoot,document)},onIframeLoad:(ee,We)=>{me.attachIframe(ee,We),ee.contentWindow&&Me.addWindow(ee.contentWindow),ge.observeAttachShadow(ee)},onStylesheetLoad:(ee,We)=>{te.attachLinkElement(ee,We)},onBlockedImageLoad:(ee,We,{width:Ke,height:ie})=>{$t({adds:[],removes:[],texts:[],attributes:[{id:We.id,attributes:{style:{width:"".concat(Ke,"px"),height:"".concat(ie,"px")}}}]})},keepIframeSrcFn:D});if(!Oe)return console.warn("Failed to snapshot the document");Se({type:Y.FullSnapshot,data:{node:Oe,initialOffset:Up(window)}}),$n.forEach(ee=>ee.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&te.adoptStyleSheets(document.adoptedStyleSheets,nt.getId(document))};ls=Re;try{const Z=[],Oe=We=>{var Ke;return ne(Xw)({onMutation:V,mutationCb:$t,mousemoveCb:(ie,Gs)=>Se({type:Y.IncrementalSnapshot,data:{source:Gs,positions:ie}}),mouseInteractionCb:ie=>Se({type:Y.IncrementalSnapshot,data:{source:q.MouseInteraction,...ie}}),scrollCb:pr,viewportResizeCb:ie=>Se({type:Y.IncrementalSnapshot,data:{source:q.ViewportResize,...ie}}),inputCb:ie=>Se({type:Y.IncrementalSnapshot,data:{source:q.Input,...ie}}),mediaInteractionCb:ie=>Se({type:Y.IncrementalSnapshot,data:{source:q.MediaInteraction,...ie}}),styleSheetRuleCb:ie=>Se({type:Y.IncrementalSnapshot,data:{source:q.StyleSheetRule,...ie}}),styleDeclarationCb:ie=>Se({type:Y.IncrementalSnapshot,data:{source:q.StyleDeclaration,...ie}}),canvasMutationCb:eo,fontCb:ie=>Se({type:Y.IncrementalSnapshot,data:{source:q.Font,...ie}}),selectionCb:ie=>{Se({type:Y.IncrementalSnapshot,data:{source:q.Selection,...ie}})},customElementCb:ie=>{Se({type:Y.IncrementalSnapshot,data:{source:q.CustomElement,...ie}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:De,inlineStylesheet:h,sampling:E,recordDOM:x,recordCanvas:B,inlineImages:X,userTriggeredOnInput:U,collectFonts:J,doc:We,maskAttributeFn:b,maskInputFn:I,maskTextFn:T,keepIframeSrcFn:D,blockSelector:s,unblockSelector:i,slimDOMOptions:Dt,dataURLOptions:R,mirror:nt,iframeManager:me,stylesheetManager:te,shadowDomManager:ge,processedNodeManager:He,canvasManager:Me,ignoreCSSAttributes:L,plugins:((Ke=F==null?void 0:F.filter(ie=>ie.observer))==null?void 0:Ke.map(ie=>({observer:ie.observer,options:ie.options,callback:Gs=>Se({type:Y.Plugin,data:{plugin:ie.name,payload:Gs}})})))||[]},{})};me.addLoadListener(We=>{try{Z.push(Oe(We.contentDocument))}catch(Ke){console.warn(Ke)}});const ee=()=>{Re(),Z.push(Oe(document))};return document.readyState==="interactive"||document.readyState==="complete"?ee():(Z.push(Be("DOMContentLoaded",()=>{Se({type:Y.DomContentLoaded,data:{}}),A==="DOMContentLoaded"&&ee()})),Z.push(Be("load",()=>{Se({type:Y.Load,data:{}}),A==="load"&&ee()},window))),()=>{Z.forEach(We=>We()),He.destroy(),ls=void 0,Bw()}}catch(Z){console.warn(Z)}}function sk(e){if(!ls)throw new Error("please take full snapshot after start recording");ls(e)}Rt.mirror=nt;Rt.takeFullSnapshot=sk;function ik(e,t){try{return e?e(t):new wl}catch(n){return console.warn("Unable to initialize CanvasManager"),new wl}}var kl;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(kl||(kl={}));const ak=3,ck=5;function Sc(e){return e>9999999999?e:e*1e3}function gi(e){return e>9999999999?e/1e3:e}function Yr(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:Y.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:qe(t,10,1e3)}}),t.category==="console")))}const uk="button,a";function Zp(e){return e.closest(uk)||e}function eh(e){const t=th(e);return!t||!(t instanceof Element)?t:Zp(t)}function th(e){return lk(e)?e.target:e}function lk(e){return typeof e=="object"&&!!e&&"target"in e}let Ht;function dk(e){return Ht||(Ht=[],fk()),Ht.push(e),()=>{const t=Ht?Ht.indexOf(e):-1;t>-1&&Ht.splice(t,1)}}function fk(){Ne(de,"open",function(e){return function(...t){if(Ht)try{Ht.forEach(n=>n())}catch(n){}return e.apply(de,t)}})}const pk=new Set([q.Mutation,q.StyleSheetRule,q.StyleDeclaration,q.AdoptedStyleSheet,q.CanvasMutation,q.Selection,q.MediaInteraction]);function hk(e,t,n){e.handleClick(t,n)}class mk{constructor(t,n,r=Yr){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=dk(()=>{this._lastMutation=Rl()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(_k(n,this._ignoreSelector)||!yk(t))return;const r={timestamp:gi(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(o=>o.node===r.node&&Math.abs(o.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=gi(t)}registerScroll(t=Date.now()){this._lastScroll=gi(t)}registerClick(t){const n=Zp(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=Rl();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const o=this._clicks.indexOf(r);o>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(o,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,o=t.mutationAfter&&t.mutationAfter<=this._threshold,s=!r&&!o,{clickCount:i,clickBreadcrumb:a}=t;if(s){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:de.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:i||1}};this._addBreadcrumbEvent(n,d);return}if(i>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:de.location.href,route:n.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Gr(()=>this._checkClicks(),1e3)}}const gk=["A","BUTTON","INPUT"];function _k(e,t){return!!(!gk.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function yk(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Rl(){return Date.now()/1e3}function Sk(e,t){try{if(!bk(t))return;const{source:n}=t.data;if(pk.has(n)&&e.registerMutation(t.timestamp),n===q.Scroll&&e.registerScroll(t.timestamp),Ek(t)){const{type:r,id:o}=t.data,s=Rt.mirror.getNode(o);s instanceof HTMLElement&&r===Fe.Click&&e.registerClick(s)}}catch(n){}}function bk(e){return e.type===ak}function Ek(e){return e.data.source===q.MouseInteraction}function pt(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var bc=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(bc||{});const vk=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Tk(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(vk.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const Ik=e=>t=>{if(!e.isEnabled())return;const n=wk(t);if(!n)return;const r=t.name==="click",o=r?t.event:void 0;r&&e.clickDetector&&(o!=null&&o.target)&&!o.altKey&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey&&hk(e.clickDetector,n,eh(t.event)),Yr(e,n)};function nh(e,t){const n=Rt.mirror.getId(e),r=n&&Rt.mirror.getNode(n),o=r&&Rt.mirror.getMeta(r),s=o&&Rk(o)?o:null;return{message:t,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map(i=>i.type===bc.Text&&i.textContent).filter(Boolean).map(i=>i.trim()).join(""),attributes:Tk(s.attributes)}}:{}}}function wk(e){const{target:t,message:n}=kk(e);return pt({category:"ui.".concat(e.name),...nh(t,n)})}function kk(e){const t=e.name==="click";let n,r=null;try{r=t?eh(e.event):th(e.event),n=ze(r,{maxStringLength:200})||"<unknown>"}catch(o){n="<unknown>"}return{target:r,message:n}}function Rk(e){return e.type===bc.Element}function Ck(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=Ak(t);n&&Yr(e,n)}function Ak(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s,target:i}=e;if(!i||xk(i)||!s)return null;const a=t||r||o,c=s.length===1;if(!a&&c)return null;const u=ze(i,{maxStringLength:200})||"<unknown>",d=nh(i,u);return pt({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:s}})}function xk(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const Mk={resource:Dk,paint:Pk,navigation:Lk};function _i(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function Nk(e){return e.map(Ok).filter(Boolean)}function Ok(e){const t=Mk[e.entryType];return t?t(e):null}function tr(e){return((Le()||de.performance.timeOrigin)+e)/1e3}function Pk(e){const{duration:t,entryType:n,name:r,startTime:o}=e,s=tr(o);return{type:n,name:r,start:s,end:s+t,data:void 0}}function Lk(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:s,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:p,transferSize:h,type:m}=e;return o===0?null:{type:"".concat(t,".").concat(m),start:tr(p),end:tr(s),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:i,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:s,redirectCount:f}}}function Dk(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:s,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:"".concat(t,".").concat(n),start:tr(s),end:tr(o),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}}function $k(e){const t=e.entries[e.entries.length-1],n=t!=null&&t.element?[t.element]:void 0;return Ec(e,"largest-contentful-paint",n)}function Fk(e){return e.sources!==void 0}function Bk(e){const t=[],n=[];for(const r of e.entries)if(Fk(r)){const o=[];for(const s of r.sources)if(s.node){n.push(s.node);const i=Rt.mirror.getId(s.node);i&&o.push(i)}t.push({value:r.value,nodeIds:o.length?o:void 0})}return Ec(e,"cumulative-layout-shift",n,t)}function Uk(e){const t=e.entries[e.entries.length-1],n=t!=null&&t.target?[t.target]:void 0;return Ec(e,"interaction-to-next-paint",n)}function Ec(e,t,n,r){const o=e.value,s=e.rating,i=tr(o);return{type:"web-vital",name:t,start:i,end:i,data:{value:o,size:o,rating:s,nodeIds:n?n.map(a=>Rt.mirror.getId(a)):void 0,attributions:r}}}function Hk(e){function t(o){e.performanceEntries.includes(o)||e.performanceEntries.push(o)}function n({entries:o}){o.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(o=>{r.push(En(o,n))}),r.push(ic(_i($k,e)),sc(_i(Bk,e)),lp(_i(Uk,e))),()=>{r.forEach(o=>o())}}const W=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Wk='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function jk(){const e=new Blob([Wk]);return URL.createObjectURL(e)}const Cl=["log","warn","error"],Po="[Replay] ";function yi(e,t="info"){St({category:"console",data:{logger:"replay"},level:t,message:"".concat(Po).concat(e)},{level:t})}function zk(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return W?(Cl.forEach(r=>{n[r]=(...o)=>{_[r](Po,...o),t&&yi(o.join(""),Pa(r))}}),n.exception=(r,...o)=>{o.length&&n.error&&n.error(...o),_.error(Po,r),e?xe(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&yi(r,"error")},n.infoTick=(...r)=>{_.log(Po,...r),t&&setTimeout(()=>yi(r[0]),0)}):Cl.forEach(r=>{n[r]=()=>{}}),n}const j=zk();class vc extends Error{constructor(){super("Event buffer exceeded maximum size of ".concat(pc,"."))}}class rh{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>pc)throw new vc;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?Sc(t):null}}class qk{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){W&&j.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((o,s)=>{const i=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",i),!c.success){W&&j.error("Error in compression worker: ",c.response),s(new Error("Error in compression worker"));return}o(c.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class Gk{constructor(t){this._worker=new qk(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=Sc(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>pc?Promise.reject(new vc):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{W&&j.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class Vk{constructor(t){this._fallback=new rh,this._compression=new Gk(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){W&&j.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,o=[];for(const s of t)o.push(this._compression.addEvent(s));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(o),this._fallback.clear()}catch(s){W&&j.exception(s,"Failed to add events when switching buffers.")}}}function Yk({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=Kk(t);if(n)return n}return W&&j.log("Using simple buffer"),new rh}function Kk(e){try{const t=e||Jk();if(!t)return;W&&j.log("Using compression worker".concat(e?" from ".concat(e):""));const n=new Worker(t);return new Vk(n)}catch(t){W&&j.exception(t,"Failed to create compression worker")}}function Jk(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?jk():""}function Tc(){try{return"sessionStorage"in de&&!!de.sessionStorage}catch(e){return!1}}function Xk(e){Qk(),e.session=void 0}function Qk(){if(Tc())try{de.sessionStorage.removeItem(dc)}catch(e){}}function oh(e){return e===void 0?!1:Math.random()<e}function $s(e){if(Tc())try{de.sessionStorage.setItem(dc,JSON.stringify(e))}catch(t){}}function sh(e){const t=Date.now(),n=e.id||we(),r=e.started||t,o=e.lastActivity||t,s=e.segmentId||0,i=e.sampled,a=e.previousSessionId,c=e.dirty||!1;return{id:n,started:r,lastActivity:o,segmentId:s,sampled:i,previousSessionId:a,dirty:c}}function Zk(e,t){return oh(e)?"session":t?"buffer":!1}function Al({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const o=Zk(e,t),s=sh({sampled:o,previousSessionId:r});return n&&$s(s),s}function e1(){if(!Tc())return null;try{const e=de.sessionStorage.getItem(dc);if(!e)return null;const t=JSON.parse(e);return W&&j.infoTick("Loading existing session"),sh(t)}catch(e){return null}}function oa(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function ih(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return oa(e.started,t,r)||oa(e.lastActivity,n,r)}function ah(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!ih(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Si({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const o=r.stickySession&&e1();return o?ah(o,{sessionIdleExpire:e,maxReplayDuration:t})?(W&&j.infoTick("Session in sessionStorage is expired, creating new one..."),Al(r,{previousSessionId:o.id})):o:(W&&j.infoTick("Creating new session"),Al(r,{previousSessionId:n}))}function t1(e){return e.type===Y.Custom}function Ic(e,t,n){return uh(e,t)?(ch(e,t,n),!0):!1}function n1(e,t,n){return uh(e,t)?ch(e,t,n):Promise.resolve(null)}async function ch(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const o=e.recordingMode==="buffer";try{n&&o&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const s=e.getOptions(),i=r1(t,s.beforeAddRecordingEvent);return i?await r.addEvent(i):void 0}catch(s){const i=s&&s instanceof vc,a=i?"addEventSizeExceeded":"addEvent",c=N();if(c){const u=i?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(i&&o)return r.clear(),r.waitForCheckout=!0,null;e.handleException(s),await e.stop({reason:a})}}function uh(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Sc(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(W&&j.infoTick("Skipping event with timestamp ".concat(n," because it is after maxReplayDuration")),!1):!0}function r1(e,t){try{if(typeof t=="function"&&t1(e))return t(e)}catch(n){return W&&j.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function wc(e){return!e.type}function sa(e){return e.type==="transaction"}function o1(e){return e.type==="replay_event"}function xl(e){return e.type==="feedback"}function s1(e){return(t,n)=>{if(!e.isEnabled()||!wc(t)&&!sa(t))return;const r=n.statusCode;if(!(!r||r<200||r>=300)){if(sa(t)){i1(e,t);return}a1(e,t)}}}function i1(e,t){var r,o;const n=e.getContext();(o=(r=t.contexts)==null?void 0:r.trace)!=null&&o.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function a1(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||Gr(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(o){e.handleException(o)}})}function c1(e){return t=>{!e.isEnabled()||!wc(t)||u1(e,t)}}function u1(e,t){var r,o,s;const n=(s=(o=(r=t.exception)==null?void 0:r.values)==null?void 0:o[0])==null?void 0:s.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const i=pt({category:"replay.hydrate-error",data:{url:Tn()}});Yr(e,i)}}function l1(e){const t=N();t&&t.on("beforeAddBreadcrumb",n=>d1(e,n))}function d1(e,t){if(!e.isEnabled()||!lh(t))return;const n=f1(t);n&&Yr(e,n)}function f1(e){return!lh(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?p1(e):pt(e)}function p1(e){var o;const t=(o=e.data)==null?void 0:o.arguments;if(!Array.isArray(t)||t.length===0)return pt(e);let n=!1;const r=t.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>ho?(n=!0,"".concat(s.slice(0,ho),"")):s;if(typeof s=="object")try{const i=qe(s,7);return JSON.stringify(i).length>ho?(n=!0,"".concat(JSON.stringify(i,null,2).slice(0,ho),"")):i}catch(i){}return s});return pt({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function lh(e){return!!e.category}function h1(e,t){var n,r,o;return e.type||!((r=(n=e.exception)==null?void 0:n.values)!=null&&r.length)?!1:!!((o=t.originalException)!=null&&o.__rrweb__)}function dh(){const e=G().getPropagationContext().dsc;e&&delete e.replay_id;const t=ye();if(t){const n=ut(t);delete n.replay_id}}function m1(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:Y.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function g1(e,t){return e.recordingMode!=="buffer"||t.message===fc||!t.exception||t.type?!1:oh(e.getOptions().errorSampleRate)}function _1(e){return Object.assign((t,n)=>{var i;if(!e.isEnabled()||e.isPaused())return t;if(o1(t))return delete t.breadcrumbs,t;if(!wc(t)&&!sa(t)&&!xl(t))return t;if(!e.checkAndHandleExpiredSession())return dh(),t;if(xl(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),m1(e,t),t;if(h1(t,n)&&!e.getOptions()._experiments.captureExceptions)return W&&j.log("Ignoring error from rrweb internals",t),null;const o=g1(e,t);if((o||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),o&&e.recordingMode==="buffer"&&((i=e.session)==null?void 0:i.sampled)==="buffer"){const a=e.session;a.dirty=!0,e.getOptions().stickySession&&$s(a)}return t},{id:"Replay"})}function Fs(e,t){return t.map(({type:n,start:r,end:o,name:s,data:i})=>{const a=e.throttledAddEvent({type:Y.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:s,startTimestamp:r,endTimestamp:o,data:i}}});return typeof a=="string"?Promise.resolve(null):a})}function y1(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function S1(e){return t=>{if(!e.isEnabled())return;const n=y1(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Fs(e,[n]),!1)))}}function b1(e,t){return W&&e.getOptions()._experiments.traceInternals?!1:yf(t,N())}function fh(e,t){e.isEnabled()&&t!==null&&(b1(e,t.name)||e.addUpdate(()=>(Fs(e,[t]),!0)))}function Bs(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=_p(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(n){}}function ph(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function ds(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function hh(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:s,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:{method:s,statusCode:i,request:a,response:c}}}function Cr(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function zt(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:s}=E1(n);return r.body=o,s!=null&&s.length&&(r._meta={warnings:s}),r}function ia(e,t){return Object.entries(e).reduce((n,[r,o])=>{const s=r.toLowerCase();return t.includes(s)&&e[r]&&(n[s]=o),n},{})}function E1(e){if(!e||typeof e!="string")return{body:e};const t=e.length>ll,n=v1(e);if(t){const r=e.slice(0,ll);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:"".concat(r,""),warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(r){}return{body:e}}function v1(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function fs(e,t){const n=T1(e);return it(n,t)}function T1(e,t=de.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(de.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function I1(e,t,n){try{const r=await k1(e,t,n),o=hh("resource.fetch",r);fh(n.replay,o)}catch(r){W&&j.exception(r,"Failed to capture fetch breadcrumb")}}function w1(e,t){const{input:n,response:r}=t,o=n?lc(n):void 0,s=Bs(o),i=r?ph(r.headers.get("content-length")):void 0;s!==void 0&&(e.data.request_body_size=s),i!==void 0&&(e.data.response_body_size=i)}async function k1(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r}=t,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=fs(i,n.networkDetailAllowUrls)&&!fs(i,n.networkDetailDenyUrls),f=l?R1(n,t.input,u):Cr(u),p=await C1(l,n,t.response,d);return{startTimestamp:o,endTimestamp:s,url:i,method:a,statusCode:c,request:f,response:p}}function R1({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const o=n?M1(n,t):{};if(!e)return zt(o,r,void 0);const s=lc(n),[i,a]=os(s,j),c=zt(o,r,i);return a?ds(c,a):c}async function C1(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&o!==void 0)return Cr(o);const s=r?mh(r.headers,n):{};if(!r||!t&&o!==void 0)return zt(s,o,void 0);const[i,a]=await x1(r),c=A1(i,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:s});return a?ds(c,a):c}function A1(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{const s=e!=null&&e.length&&n===void 0?Bs(e):n;return r?t?zt(o,s,e):zt(o,s,void 0):Cr(s)}catch(s){return W&&j.exception(s,"Failed to serialize response body"),zt(o,n,void 0)}}async function x1(e){const t=N1(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await O1(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(W&&j.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(W&&j.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function mh(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function M1(e,t){return e.length===1&&typeof e[0]!="string"?Ml(e[0],t):e.length===2?Ml(e[1],t):{}}function Ml(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?mh(n,t):Array.isArray(n)?{}:ia(n,t):{}}function N1(e){try{return e.clone()}catch(t){W&&j.exception(t,"Failed to clone response body")}}function O1(e){return new Promise((t,n)=>{const r=Gr(()=>n(new Error("Timeout while trying to read response body")),500);P1(e).then(o=>t(o),o=>n(o)).finally(()=>clearTimeout(r))})}async function P1(e){return await e.text()}async function L1(e,t,n){try{const r=$1(e,t,n),o=hh("resource.xhr",r);fh(n.replay,o)}catch(r){W&&j.exception(r,"Failed to capture xhr breadcrumb")}}function D1(e,t){const{xhr:n,input:r}=t;if(!n)return;const o=Bs(r),s=n.getResponseHeader("content-length")?ph(n.getResponseHeader("content-length")):U1(n.response,n.responseType);o!==void 0&&(e.data.request_body_size=o),s!==void 0&&(e.data.response_body_size=s)}function $1(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:s=r,input:i,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!fs(c,n.networkDetailAllowUrls)||fs(c,n.networkDetailDenyUrls)){const w=Cr(l),E=Cr(f);return{startTimestamp:o,endTimestamp:s,url:c,method:u,statusCode:d,request:w,response:E}}const p=a[It],h=p?ia(p.request_headers,n.networkRequestHeaders):{},m=ia(yp(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?os(i,j):[void 0],[b,I]=n.networkCaptureBodies?F1(a):[void 0],T=zt(h,l,g),S=zt(m,f,b);return{startTimestamp:o,endTimestamp:s,url:c,method:u,statusCode:d,request:y?ds(T,y):T,response:I?ds(S,I):S}}function F1(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return B1(e.response,e.responseType)}catch(n){t.push(n)}return W&&j.warn("Failed to get xhr response body",...t),[void 0]}function B1(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return W&&j.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return W&&j.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function U1(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return Bs(n)}catch(n){return}}function H1(e){const t=N();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:s,networkResponseHeaders:i}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:s,networkResponseHeaders:i};t&&t.on("beforeAddBreadcrumb",(c,u)=>W1(a,c,u))}catch(n){}}function W1(e,t,n){if(t.data)try{j1(t)&&q1(n)&&(D1(t,n),L1(t,n,e)),z1(t)&&G1(n)&&(w1(t,n),I1(t,n,e))}catch(r){W&&j.exception(r,"Error when enriching network breadcrumb")}}function j1(e){return e.category==="xhr"}function z1(e){return e.category==="fetch"}function q1(e){return e==null?void 0:e.xhr}function G1(e){return e==null?void 0:e.response}function V1(e){const t=N();gp(Ik(e)),Os(S1(e)),l1(e),H1(e);const n=_1(e);l_(n),t&&(t.on("beforeSendEvent",c1(e)),t.on("afterSendEvent",s1(e)),t.on("createDsc",r=>{const o=e.getSessionId();o&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=o)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,o)=>{var i;const s=e.getSessionId();o!=null&&o.includeReplay&&e.isEnabled()&&s&&((i=r.contexts)!=null&&i.feedback)&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=s)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function Y1(e){try{return Promise.all(Fs(e,[K1(de.performance.memory)]))}catch(t){return[]}}function K1(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function J1(e,t,n){return iy(e,t,{...n,setTimeoutImpl:Gr})}const Xe=H.navigator;function X1(){var e,t;return/iPhone|iPad|iPod/i.test((e=Xe==null?void 0:Xe.userAgent)!=null?e:"")||/Macintosh/i.test((t=Xe==null?void 0:Xe.userAgent)!=null?t:"")&&(Xe!=null&&Xe.maxTouchPoints)&&(Xe==null?void 0:Xe.maxTouchPoints)>1?{sampling:{mousemove:!1}}:{}}function Q1(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){W&&j.warn("Received replay event after session expired.");return}const o=r||!t;t=!0,e.clickDetector&&Sk(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&o&&e.setInitialState(),!Ic(e,n,o))return!0;if(!o)return!1;const s=e.session;if(eR(e,o),e.recordingMode==="buffer"&&s&&e.eventBuffer&&!s.dirty){const i=e.eventBuffer.getEarliestTimestamp();i&&(W&&j.log("Updating session start time to earliest event in buffer to ".concat(new Date(i))),s.started=i,e.getOptions().stickySession&&$s(s))}return s!=null&&s.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function Z1(e){const t=e.getOptions();return{type:Y.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function eR(e,t){!t||!e.session||e.session.segmentId!==0||Ic(e,Z1(e),!1)}function tR(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(t){return null}}function nR(e,t,n,r){return lt(qd(e,Ss(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function rR({recordingData:e,headers:t}){let n;const r="".concat(JSON.stringify(t),"\n");if(typeof e=="string")n="".concat(r).concat(e);else{const s=new TextEncoder().encode(r);n=new Uint8Array(s.length+e.length),n.set(s),n.set(e,s.length)}return n}async function oR({client:e,scope:t,replayId:n,event:r}){const o=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,s={event_id:n,integrations:o};e.emit("preprocessEvent",r,s);const i=await Kd(e.getOptions(),r,s,t,e,ke());if(!i)return null;e.emit("postprocessEvent",i,s),i.platform=i.platform||"javascript";const a=e.getSdkMetadata(),{name:c,version:u,settings:d}=(a==null?void 0:a.sdk)||{};return i.sdk={...i.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},i}async function sR({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:s}){const i=rR({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=N(),f=G(),p=l==null?void 0:l.getTransport(),h=l==null?void 0:l.getDsn();if(!l||!p||!h||!s.sampled)return Promise.resolve({});const m={type:DI,replay_start_timestamp:d/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:s.sampled},g=await oR({scope:f,client:l,replayId:t,event:m});if(!g)return l.recordDroppedEvent("event_processor","replay"),W&&j.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete g.sdkProcessingMetadata;const y=nR(g,i,h,l.getOptions().tunnel);let b;try{b=await p.send(y)}catch(T){const S=new Error(fc);try{S.cause=T}catch(w){}throw S}if(typeof b.statusCode=="number"&&(b.statusCode<200||b.statusCode>=300))throw new gh(b.statusCode);const I=mf({},b);if(hf(I,"replay"))throw new kc(I);return b}class gh extends Error{constructor(t){super("Transport returned status code ".concat(t))}}class kc extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function _h(e,t={count:0,interval:WI}){const{recordingData:n,onError:r}=e;if(n.length)try{return await sR(e),!0}catch(o){if(o instanceof gh||o instanceof kc)throw o;if(Jd("Replays",{_retryCount:t.count}),r&&r(o),t.count>=jI){const s=new Error("".concat(fc," - max retries exceeded"));try{s.cause=o}catch(i){}throw s}return t.interval*=++t.count,new Promise((s,i)=>{Gr(async()=>{try{await _h(e,t),s(!0)}catch(a){i(a)}},t.interval)})}}const yh="__THROTTLED",iR="__SKIPPED";function aR(e,t,n){const r=new Map,o=a=>{const c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},s=()=>[...r.values()].reduce((a,c)=>a+c,0);let i=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(o(c),s()>=t){const d=i;return i=!0,d?iR:yh}i=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class cR{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:$I,sessionIdleExpire:FI},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=J1(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=aR((i,a)=>n1(this,i,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),s=r?{threshold:Math.min(zI,r),timeout:r,scrollTimeout:qI,ignoreSelector:o?o.join(","):""}:void 0;if(s&&(this.clickDetector=new mk(this,s)),W){const i=t._experiments;j.setConfig({captureExceptions:!!i.captureExceptions,traceInternals:!!i.traceInternals})}this._handleVisibilityChange=()=>{de.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const i=pt({category:"ui.blur"});this._doChangeToBackgroundTasks(i)},this._handleWindowFocus=()=>{const i=pt({category:"ui.focus"});this._doChangeToForegroundTasks(i)},this._handleKeyboardEvent=i=>{Ck(this,i)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){W&&j.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options,o=n<=0&&r<=0;if(this._requiresManualStart=o,!o){if(this._initializeSessionForSampling(t),!this.session){W&&j.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",W&&j.infoTick("Starting replay in ".concat(this.recordingMode," mode")),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){W&&j.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){W&&j.log("Buffering is in progress, call `flush()` to save the replay");return}W&&j.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=Si({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){W&&j.log("Buffering is in progress, call `flush()` to save the replay");return}W&&j.infoTick("Starting replay in buffer mode");const t=Si({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=Rt({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:HI}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Q1(this),...X1(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){var r;if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{W&&j.log("Stopping Replay".concat(n?" triggered by ".concat(n):"")),dh(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),(r=this.eventBuffer)==null||r.destroy(),this.eventBuffer=null,Xk(this)}catch(o){this.handleException(o)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),W&&j.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),W&&j.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();W&&j.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){var n,r;if(!(t&&((n=this.session)==null?void 0:n.sampled)===!1))return(r=this.session)==null?void 0:r.id}checkAndHandleExpiredSession(){if(this._lastActivity&&oa(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t="".concat(de.location.pathname).concat(de.location.hash).concat(de.location.search),n="".concat(de.location.origin).concat(t);this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===yh){const o=pt({category:"replay.throttled"});this.addUpdate(()=>!Ic(this,{type:ck,timestamp:o.timestamp||0,data:{tag:"breadcrumb",payload:o,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastActiveSpan||ye(),n=t&&be(t),o=(n&&$(n).data||{})[fe];if(!(!n||!o||!["route","custom"].includes(o)))return $(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Yk({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=Si({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return ah(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{de.document.addEventListener("visibilitychange",this._handleVisibilityChange),de.addEventListener("blur",this._handleWindowBlur),de.addEventListener("focus",this._handleWindowFocus),de.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(V1(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=Hk(this)}_removeListeners(){try{de.document.removeEventListener("visibilitychange",this._handleVisibilityChange),de.removeEventListener("blur",this._handleWindowBlur),de.removeEventListener("focus",this._handleWindowFocus),de.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||ih(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){W&&j.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:Y.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=Nk(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(Fs(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){var n;const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){W&&j.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!((n=this.eventBuffer)!=null&&n.hasEvents)&&(await Y1(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const r=Date.now();if(r-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const o=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await _h({replayId:t,recordingData:i,segmentId:s,eventContext:o,session:this.session,timestamp:r,onError:a=>this.handleException(a)})}catch(r){this.handleException(r),this.stop({reason:"sendReplay"});const o=N();if(o){const s=r instanceof kc?"ratelimit_backoff":"send_error";o.recordDroppedEvent(s,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){W&&j.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,o=Date.now()-n;this._debouncedFlush.cancel();const s=o<this._options.minReplayDuration,i=o>this._options.maxReplayDuration+5e3;if(s||i){W&&j.log("Session duration (".concat(Math.floor(o/1e3),"s) is too ").concat(s?"short":"long",", not sending replay.")),s&&this._debouncedFlush();return}const a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&W&&j.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&$s(this.session)}_onMutationHandler(t){const{ignoreMutations:n}=this._options._experiments;if(n!=null&&n.length&&t.some(a=>{const c=tR(a.target),u=n.join(",");return c==null?void 0:c.matches(u)}))return!1;const r=t.length,o=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,i=o&&r>o;if(r>s||i){const a=pt({category:"replay.mutations",data:{count:r,limit:i}});this._createCustomBreadcrumb(a)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function mr(e,t){return[...e,...t].join(",")}function uR({mask:e,unmask:t,block:n,unblock:r,ignore:o}){const s=["base","iframe[srcdoc]:not([src])"],i=mr(e,[".sentry-mask","[data-sentry-mask]"]),a=mr(t,[]);return{maskTextSelector:i,unmaskTextSelector:a,blockSelector:mr(n,[".sentry-block","[data-sentry-block]",...s]),unblockSelector:mr(r,[]),ignoreSelector:mr(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function lR({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:s}){return!r||o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?s:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s}const Nl='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',dR=["content-length","content-type","accept"];let Ol=!1;const ex=(e=>new fR(e));class fR{constructor({flushMinDelay:t=BI,flushMaxDelay:n=UI,minReplayDuration:r=GI,maxReplayDuration:o=dl,stickySession:s=!0,useCompression:i=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:y=[],networkCaptureBodies:b=!0,networkRequestHeaders:I=[],networkResponseHeaders:T=[],mask:S=[],maskAttributes:w=["title","placeholder","aria-label"],unmask:E=[],block:R=[],unblock:v=[],ignore:x=[],maskFn:B,beforeAddRecordingEvent:k,beforeErrorSampling:A,onError:U}={}){this.name="Replay";const J=uR({mask:S,unmask:E,block:R,unblock:v,ignore:x});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:B,maskInputFn:B,maskAttributeFn:(X,F,D)=>lR({maskAttributes:w,maskAllText:u,privacyOptions:J,key:X,value:F,el:D}),...J,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:X=>{try{X.__rrweb__=!0}catch(F){}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,VI),maxReplayDuration:Math.min(o,dl),stickySession:s,useCompression:i,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:m,networkDetailAllowUrls:g,networkDetailDenyUrls:y,networkCaptureBodies:b,networkRequestHeaders:Pl(I),networkResponseHeaders:Pl(T),beforeAddRecordingEvent:k,beforeErrorSampling:A,onError:U,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?"".concat(this._recordingOptions.blockSelector,",").concat(Nl):Nl),this._isInitialized&&Qo())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Ol}set _isInitialized(t){Ol=t}afterAllSetup(t){!Qo()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){var n;if((n=this._replay)!=null&&n.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){var t;if((t=this._replay)!=null&&t.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=pR(this._initialOptions,t);this._replay=new cR({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch(n){}}}function pR(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},o=gn(n.replaysSessionSampleRate),s=gn(n.replaysOnErrorSampleRate);return o==null&&s==null&&Xt(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),o!=null&&(r.sessionSampleRate=o),s!=null&&(r.errorSampleRate=s),r}function Pl(e){return[...dR,...e.map(t=>t.toLowerCase())]}function tx(){const e=N();return e==null?void 0:e.getIntegrationByName("Replay")}var hR=Object.defineProperty,mR=(e,t,n)=>t in e?hR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ll=(e,t,n)=>mR(e,typeof t!="symbol"?t+"":t,n);class gR{constructor(){Ll(this,"idNodeMap",new Map),Ll(this,"nodeMetaMap",new WeakMap)}getId(t){var r;if(!t)return-1;const n=(r=this.getMeta(t))==null?void 0:r.id;return n!=null?n:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function _R(){return new gR}function yR(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function aa(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:aa(e.parentNode,t,n,r+1)}function Dl(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(".".concat(e)))return!0}else if(yR(r,e))return!0}return!!(t&&r.matches(t))}catch(o){return!1}}}const Nn="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let $l={map:{},getId(){return console.error(Nn),-1},getNode(){return console.error(Nn),null},removeNodeFromMap(){console.error(Nn)},has(){return console.error(Nn),!1},reset(){console.error(Nn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&($l=new Proxy($l,{get(e,t,n){return t==="map"&&console.error(Nn),Reflect.get(e,t,n)}}));function Rc(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(i){bh(()=>{n.set.call(this,i)},0),s&&s.set&&s.set.call(this,i)}}),()=>Rc(e,t,s||{},!0)}function Cc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(r){return()=>{}}}Date.now().toString();function SR(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(t){return null}}function Us(e,t,n,r,o){if(!e)return!1;const s=SR(e);if(!s)return!1;const i=Dl(t,n),a=aa(s,i);let c=-1;return a<0?!1:(r&&(c=aa(s,Dl(null,r))),a>-1&&c<0?!0:a<c)}const Fl={};function Sh(e){const t=Fl[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);const s=o.contentWindow;s&&s[e]&&(r=s[e]),n.head.removeChild(o)}catch(o){}return Fl[e]=r.bind(window)}function rn(...e){return Sh("requestAnimationFrame")(...e)}function bh(...e){return Sh("setTimeout")(...e)}var nr=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(nr||{});let Lo;function bR(e){Lo=e}const bi=e=>Lo?(...n)=>{try{return e(...n)}catch(r){if(Lo&&Lo(r)===!0)return()=>{};throw r}}:e;var Fn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ER=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var yo=0;yo<Fn.length;yo++)ER[Fn.charCodeAt(yo)]=yo;var vR=function(e){var t=new Uint8Array(e),n,r=t.length,o="";for(n=0;n<r;n+=3)o+=Fn[t[n]>>2],o+=Fn[(t[n]&3)<<4|t[n+1]>>4],o+=Fn[(t[n+1]&15)<<2|t[n+2]>>6],o+=Fn[t[n+2]&63];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o};const Bl=new Map;function TR(e,t){let n=Bl.get(e);return n||(n=new Map,Bl.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const Eh=(e,t,n)=>{if(!e||!(Th(e,t)||typeof e=="object"))return;const r=e.constructor.name,o=TR(n,r);let s=o.indexOf(e);return s===-1&&(s=o.length,o.push(e)),s};function Do(e,t,n){if(e instanceof Array)return e.map(r=>Do(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,o=vR(e);return{rr_type:r,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Do(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:o}=e;return{rr_type:r,src:o}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",o=e.toDataURL();return{rr_type:r,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Do(e.data,t,n),e.width,e.height]};if(Th(e,t)||typeof e=="object"){const r=e.constructor.name,o=Eh(e,t,n);return{rr_type:r,index:o}}}}return e}const vh=(e,t,n)=>e.map(r=>Do(r,t,n)),Th=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function").find(o=>e instanceof t[o]);function IR(e,t,n,r,o){const s=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;const c=Cc(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return Us(this.canvas,n,r,o,!0)||bh(()=>{const l=vh(d,t,this);e(this.canvas,{type:nr["2D"],property:a,args:l})},0),u.apply(this,d)}});s.push(c)}catch(c){const u=Rc(t.CanvasRenderingContext2D.prototype,a,{set(d){e(this.canvas,{type:nr["2D"],property:a,args:[d],setter:!0})}});s.push(u)}return()=>{s.forEach(a=>a())}}function wR(e){return e==="experimental-webgl"?"webgl":e}function Ul(e,t,n,r,o){const s=[];try{const i=Cc(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!Us(this,t,n,r,!0)){const d=wR(c);if("__context"in this||(this.__context=d),o&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){const l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});s.push(i)}catch(i){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{s.forEach(i=>i())}}function Hl(e,t,n,r,o,s,i,a){const c=[],u=Object.getOwnPropertyNames(e);for(const d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;const l=Cc(e,d,function(f){return function(...p){const h=f.apply(this,p);if(Eh(h,a,this),"tagName"in this.canvas&&!Us(this.canvas,r,o,s,!0)){const m=vh(p,a,this),g={type:t,property:d,args:m};n(this.canvas,g)}return h}});c.push(l)}catch(l){const f=Rc(e,d,{set(p){n(this.canvas,{type:t,property:d,args:[p],setter:!0})}});c.push(f)}return c}function kR(e,t,n,r,o,s){const i=[];return i.push(...Hl(t.WebGLRenderingContext.prototype,nr.WebGL,e,n,r,o,s,t)),typeof t.WebGL2RenderingContext<"u"&&i.push(...Hl(t.WebGL2RenderingContext.prototype,nr.WebGL2,e,n,r,o,s,t)),()=>{i.forEach(a=>a())}}const RR='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function CR(){const e=new Blob([RR]);return URL.createObjectURL(e)}class AR{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};const{enableManualSnapshot:n,sampling:r="all",win:o,recordCanvas:s,errorHandler:i}=t;t.sampling=r,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,i&&bR(i),(s&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(o),!n&&bi(()=>{s&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),s&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){var t;this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(n=>{try{n()}catch(r){}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,(t=this.worker)==null||t.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){const{sampling:n="all",blockClass:r,blockSelector:o,unblockSelector:s,recordCanvas:i,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}bi(()=>{if(i&&n==="all"&&this.initCanvasMutationObserver(t,r,o,s),i&&typeof n=="number"){const c=Ul(t,r,o,s,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n!=null&&n.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}rn(r=>this.takeSnapshot(r,!0,t))}initFPSWorker(){const t=new Worker(CR());return t.onmessage=n=>{const r=n.data,{id:o}=r;if(this.snapshotInProgressMap.set(o,!1),!("base64"in r))return;const{base64:s,type:i,width:a,height:c}=r;this.mutationCb({id:o,type:nr["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:s}],type:i}]},0,0,a,c]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;const n=r=>{this.takeSnapshot(r,!1),t=rn(n)};t=rn(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,r,o){const s=Ul(t,n,r,o,!1),i=IR(this.processMutation.bind(this),t,n,r,o),a=kR(this.processMutation.bind(this),t,n,r,o,this.mirror);this.restoreHandlers.push(()=>{s(),i(),a()})}getCanvasElements(t,n,r){const o=[],s=i=>{i.querySelectorAll("canvas").forEach(a=>{Us(a,t,n,r)||o.push(a)})};for(const i of this.windows){const a=i.deref();let c;try{c=a&&a.document}catch(u){}c&&s(c)}for(const i of this.shadowDoms){const a=i.deref();a&&s(a)}return o}takeSnapshot(t,n,r){const{sampling:o,blockClass:s,blockSelector:i,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,l=1e3/(o==="all"?2:o||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<l?!1:(this.lastSnapshotTime=t,(r?[r]:this.getCanvasElements(s,i,a)).forEach(h=>{var g;const m=this.mirror.getId(h);if(!(!this.mirror.hasNode(h)||!h.width||!h.height||this.snapshotInProgressMap.get(m))){if(this.snapshotInProgressMap.set(m,!0),!n&&["webgl","webgl2"].includes(h.__context)){const y=h.getContext(h.__context);((g=y==null?void 0:y.getContextAttributes())==null?void 0:g.preserveDrawingBuffer)===!1&&y.clear(y.COLOR_BUFFER_BIT)}createImageBitmap(h).then(y=>{var b;(b=this.worker)==null||b.postMessage({id:m,bitmap:y,width:h.width,height:h.height,dataURLOptions:c,maxCanvasSize:u},[y])}).catch(y=>{bi(()=>{throw this.snapshotInProgressMap.delete(m),y})()})}}),!0)}startPendingCanvasMutationFlusher(){rn(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,rn(t)};rn(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),rn(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const o=r.map(i=>{const{type:a,...c}=i;return c}),{type:s}=r[0];this.mutationCb({id:n,type:s,commands:o}),this.pendingCanvasMutations.delete(t)}}var cd;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((cd=e.contentWindow)==null?void 0:cd.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}_R();var Wl;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Wl||(Wl={}));const jl={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},xR="ReplayCanvas",So=1280,MR=((e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,So):So,n?Math.min(n,So):So]};let o;const s=new Promise(i=>o=i);return{name:xR,getOptions(){const{quality:i,enableManualSnapshot:a,maxCanvasSize:c}=r;return{enableManualSnapshot:a,recordCanvas:!0,getCanvasManager:u=>{const d=new AR({...u,enableManualSnapshot:a,maxCanvasSize:c,errorHandler:l=>{try{typeof l=="object"&&(l.__rrweb__=!0)}catch(f){}}});return o(d),d},...jl[i]||jl.medium}},async snapshot(i,a){(await s).snapshot(i,a)}}}),nx=MR;function NR(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function Ih(e){try{return new URL(e,P.location.origin).href}catch(t){return}}function OR(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function wh(e){try{return new Headers(e)}catch(t){return}}const zl=new WeakMap,Ei=new Map,kh={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function PR(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:s,enableHTTPTimings:i,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...kh,...t},d=typeof s=="function"?s:h=>!0,l=h=>LR(h,a),f={},p=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(h=>(h.type==="transaction"&&h.spans&&h.spans.forEach(m=>{if(m.op==="http.client"){const g=Ei.get(m.span_id);g&&(m.timestamp=g/1e3,Ei.delete(m.span_id))}}),h)),o&&tE(h=>{if(h.response){const m=zl.get(h.response);m&&h.endTimestamp&&Ei.set(m,h.endTimestamp)}}),Ga(h=>{const m=gS(h,d,l,f,{propagateTraceparent:p,onRequestSpanEnd:u});if(h.response&&h.fetchData.__span&&zl.set(h.response,h.fetchData.__span),m){const g=Ih(h.fetchData.url),y=g?fn(g).host:void 0;m.setAttributes({"http.url":g,"server.address":y}),i&&ql(m),c==null||c(m,{headers:h.headers})}})),r&&uc(h=>{var g;const m=DR(h,d,l,f,p,u);m&&(i&&ql(m),c==null||c(m,{headers:wh((g=h.xhr.__sentry_xhr_v3__)==null?void 0:g.request_headers)}))})}function ql(e){const{url:t}=$(e).data;if(!t||typeof t!="string")return;const n=En("resource",({entries:r})=>{r.forEach(o=>{OR(o)&&o.name.endsWith(t)&&(e.setAttributes(mp(o)),setTimeout(n))})})}function LR(e,t){const n=Tn();if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch(i){return!1}const s=r.origin===o;return t?it(r.toString(),t)||s&&it(r.pathname,t):s}else{const r=!!e.match(/^\/(?!\/)/);return t?it(e,t):r}}function DR(e,t,n,r,o,s){const i=e.xhr,a=i==null?void 0:i[It];if(!i||i.__sentry_own_request__||!a)return;const{url:c,method:u}=a,d=et()&&t(c);if(e.endTimestamp&&d){const y=i.__sentry_xhr_span_id__;if(!y)return;const b=r[y];b&&a.status_code!==void 0&&(Uo(b,a.status_code),b.end(),s==null||s(b,{headers:wh(yp(i)),error:e.error}),delete r[y]);return}const l=Ih(c),f=fn(l||c),p=_f(c),h=!!ye(),m=d&&h?at({name:"".concat(u," ").concat(p),attributes:{url:c,type:"xhr","http.method":u,"http.url":l,"server.address":f==null?void 0:f.host,[Q]:"auto.http.browser",[Ie]:"http.client",...(f==null?void 0:f.search)&&{"http.query":f==null?void 0:f.search},...(f==null?void 0:f.hash)&&{"http.fragment":f==null?void 0:f.hash}}}):new Nt;i.__sentry_xhr_span_id__=m.spanContext().spanId,r[i.__sentry_xhr_span_id__]=m,n(c)&&$R(i,et()&&h?m:void 0,o);const g=N();return g&&g.emit("beforeOutgoingRequestSpan",m,e),m}function $R(e,t,n){const{"sentry-trace":r,baggage:o,traceparent:s}=bf({span:t,propagateTraceparent:n});r&&FR(e,r,o,s)}function FR(e,t,n,r){var s;const o=(s=e.__sentry_xhr_v3__)==null?void 0:s.request_headers;if(!(o!=null&&o["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!(o!=null&&o.traceparent)&&e.setRequestHeader("traceparent",r),n){const i=o==null?void 0:o.baggage;(!i||!NR(i))&&e.setRequestHeader("baggage",n)}}catch(i){}}function BR(){P.document?P.document.addEventListener("visibilitychange",()=>{const e=ye();if(!e)return;const t=be(e);if(P.document.hidden&&t){const n="cancelled",{op:r,status:o}=$(t);M&&_.log("[Tracing] Transaction: ".concat(n," -> since tab moved to the background, op: ").concat(r)),o||t.setStatus({code:oe,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):M&&_.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const UR=3600,Rh="sentry_previous_trace",HR="sentry.previous_trace";function WR(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r=t==="session-storage";let o=r?qR():void 0;e.on("spanStart",i=>{if(be(i)!==i)return;const a=G().getPropagationContext();o=jR(o,i,a),r&&zR(o)});let s=!0;n&&e.on("beforeSampling",i=>{if(!o)return;const a=G(),c=a.getPropagationContext();if(s&&c.parentSpanId){s=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(o.sampleRate),sampled:String(ca(o.spanContext))},sampleRand:o.sampleRand}),i.parentSampled=ca(o.spanContext),i.parentSampleRate=o.sampleRate,i.spanAttributes={...i.spanAttributes,[wd]:o.sampleRate}})}function jR(e,t,n){const r=$(t);function o(){var a,c,u;try{return(u=Number((a=n.dsc)==null?void 0:a.sample_rate))!=null?u:Number((c=r.data)==null?void 0:c[ga])}catch(d){return 0}}const s={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:o(),sampleRand:n.sampleRand};if(!e)return s;const i=e.spanContext;return i.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=UR&&(M&&_.log("Adding previous_trace ".concat(i," link to span ").concat({op:r.op,...t.spanContext()})),t.addLink({context:i,attributes:{[Um]:"previous_trace"}}),t.setAttribute(HR,"".concat(i.traceId,"-").concat(i.spanId,"-").concat(ca(i)?1:0))),s)}function zR(e){try{P.sessionStorage.setItem(Rh,JSON.stringify(e))}catch(t){M&&_.warn("Could not store previous trace in sessionStorage",t)}}function qR(){var e;try{const t=(e=P.sessionStorage)==null?void 0:e.getItem(Rh);return JSON.parse(t)}catch(t){return}}function ca(e){return e.traceFlags===1}const GR="BrowserTracing",VR={...wo,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...kh},Kr=((e={})=>{const t={name:void 0,source:void 0},n=P.document,{enableInp:r,enableElementTiming:o,enableLongTask:s,enableLongAnimationFrame:i,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:h,traceFetch:m,traceXHR:g,trackFetchStreamPerformance:y,shouldCreateSpanForRequest:b,enableHTTPTimings:I,ignoreResourceSpans:T,ignorePerformanceApiSpans:S,instrumentPageLoad:w,instrumentNavigation:E,detectRedirects:R,linkPreviousTrace:v,consistentTraceSampling:x,enableReportPageLoaded:B,onRequestSpanStart:k,onRequestSpanEnd:A}={...VR,...e};let U,J,X;function F(D,L,O=!0){const V=L.op==="pageload",se=L.name,he=d?d(L):L,ve=he.attributes||{};if(se!==he.name&&(ve[fe]="custom",he.attributes=ve),!O){const $e=In();at({...he,startTime:$e}).end($e);return}t.name=he.name,t.source=ve[fe];const De=Vd(he,{idleTimeout:l,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:V,beforeSpanEnd:$e=>{U==null||U(),C0($e,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:T,ignorePerformanceApiSpans:S}),Vl(D,void 0);const Ue=G(),dt=Ue.getPropagationContext();Ue.setPropagationContext({...dt,traceId:De.spanContext().traceId,sampled:tn(De),dsc:ut($e)}),V&&(X=void 0)},trimIdleSpanEndTimestamp:!B});V&&B&&(X=De),Vl(D,De);function Dt(){n&&["interactive","complete"].includes(n.readyState)&&D.emit("idleSpanEnableAutoFinish",De)}V&&!B&&n&&(n.addEventListener("readystatechange",()=>{Dt()}),Dt())}return{name:GR,setup(D){if(lg(),U=E0({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:D}),r&&Z0(),o&&U0(),i&&H.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?T0():s&&v0(),a&&I0(),R&&n){const O=()=>{J=pe()};addEventListener("click",O,{capture:!0}),addEventListener("keydown",O,{capture:!0,passive:!0})}function L(){const O=Ar(D);O&&!$(O).timestamp&&(M&&_.log("[Tracing] Finishing current active span with op: ".concat($(O).op)),O.setAttribute(vr,"cancelled"),O.end())}D.on("startNavigationSpan",(O,V)=>{if(N()!==D)return;if(V!=null&&V.isRedirect){M&&_.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),F(D,{op:"navigation.redirect",...O},!1);return}J=void 0,L(),ke().setPropagationContext({traceId:_t(),sampleRand:Math.random(),propagationSpanId:et()?void 0:kt()});const se=G();se.setPropagationContext({traceId:_t(),sampleRand:Math.random(),propagationSpanId:et()?void 0:kt()}),se.setSDKProcessingMetadata({normalizedRequest:void 0}),F(D,{op:"navigation",...O,parentSpan:null,forceTransaction:!0})}),D.on("startPageLoadSpan",(O,V={})=>{if(N()!==D)return;L();const se=V.sentryTrace||Gl("sentry-trace"),he=V.baggage||Gl("baggage"),ve=Pd(se,he),De=G();De.setPropagationContext(ve),et()||(De.getPropagationContext().propagationSpanId=kt()),De.setSDKProcessingMetadata({normalizedRequest:Qa()}),F(D,{op:"pageload",...O})}),D.on("endPageloadSpan",()=>{B&&X&&(X.setAttribute(vr,"reportPageLoaded"),X.end())})},afterAllSetup(D){let L=Tn();if(v!=="off"&&WR(D,{linkPreviousTrace:v,consistentTraceSampling:x}),P.location){if(w){const O=Le();Jr(D,{name:P.location.pathname,startTime:O?O/1e3:void 0,attributes:{[fe]:"url",[Q]:"auto.pageload.browser"}})}E&&Os(({to:O,from:V})=>{if(V===void 0&&(L==null?void 0:L.indexOf(O))!==-1){L=void 0;return}L=void 0;const se=Na(O),he=Ar(D),ve=he&&R&&KR(he,J);Xr(D,{name:(se==null?void 0:se.pathname)||P.location.pathname,attributes:{[fe]:"url",[Q]:"auto.navigation.browser"}},{url:O,isRedirect:ve})})}h&&BR(),a&&YR(D,l,f,p,t),r&&nT(),PR(D,{traceFetch:m,traceXHR:g,trackFetchStreamPerformance:y,tracePropagationTargets:D.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:b,enableHTTPTimings:I,onRequestSpanStart:k,onRequestSpanEnd:A})}}});function Jr(e,t,n){e.emit("startPageLoadSpan",t,n),G().setTransactionName(t.name);const r=Ar(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function Xr(e,t,n){const{url:r,isRedirect:o}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:o}),e.emit("startNavigationSpan",t,{isRedirect:o});const s=G();return s.setTransactionName(t.name),r&&!o&&s.setSDKProcessingMetadata({normalizedRequest:{...Qa(),url:r}}),Ar(e)}function Gl(e){const t=P.document,n=t==null?void 0:t.querySelector("meta[name=".concat(e,"]"));return(n==null?void 0:n.getAttribute("content"))||void 0}function YR(e,t,n,r,o){const s=P.document;let i;const a=()=>{const c="ui.action.click",u=Ar(e);if(u){const d=$(u).op;if(["navigation","pageload"].includes(d)){M&&_.warn("[Tracing] Did not create ".concat(c," span because a pageload or navigation span is in progress."));return}}if(i&&(i.setAttribute(vr,"interactionInterrupted"),i.end(),i=void 0),!o.name){M&&_.warn("[Tracing] Did not create ".concat(c," transaction because _latestRouteName is missing."));return}i=Vd({name:o.name,op:c,attributes:{[fe]:o.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};s&&addEventListener("click",a,{capture:!0})}const Ch="_sentry_idleSpan";function Ar(e){return e[Ch]}function Vl(e,t){Ae(e,Ch,t)}const Yl=1.5;function KR(e,t){const n=$(e),r=In(),o=n.start_timestamp;return!(r-o>Yl||t&&r-t<=Yl)}function rx(e=N()){e==null||e.emit("endPageloadSpan")}function ox(e){const t=ye();if(t===e)return;const n=G();e.end=new Proxy(e.end,{apply(r,o,s){return Mt(n,t),Reflect.apply(r,o,s)}}),Mt(n,e)}function rr(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function JR(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=rr(n);return o=>r.then(s=>o(s.transaction(t,"readwrite").objectStore(t)))}function Ac(e){return rr(e.getAllKeys())}function XR(e,t,n){return e(r=>Ac(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.max(...o,0)+1),rr(r.transaction)}))}function QR(e,t,n){return e(r=>Ac(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.min(...o,0)-1),rr(r.transaction)}))}function ZR(e){return e(t=>Ac(t).then(n=>{const r=n[0];if(r!=null)return rr(t.get(r)).then(o=>(t.delete(r),rr(t.transaction).then(()=>o)))}))}function eC(e){let t;function n(){return t==null&&(t=JR(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{const o=await zo(r);await XR(n(),o,e.maxQueueSize||30)}catch(o){}},unshift:async r=>{try{const o=await zo(r);await QR(n(),o,e.maxQueueSize||30)}catch(o){}},shift:async()=>{try{const r=await ZR(n());if(r)return Eg(r)}catch(r){}}}}function tC(e){return t=>{const n=e({...t,createStore:eC});return P.addEventListener("online",async r=>{await n.flush()}),n}}function sx(e=Sp){return tC(Y_(e))}const Kl=1e6,nC="window"in H&&H.window===H&&typeof importScripts>"u",qt=String(0),ps=nC?"main":"worker",Qe=P.navigator;let Ah="",xh="",Mh="",ua=(Qe==null?void 0:Qe.userAgent)||"",Nh="";var ud;const rC=(Qe==null?void 0:Qe.language)||((ud=Qe==null?void 0:Qe.languages)==null?void 0:ud[0])||"";function oC(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const Jl=Qe==null?void 0:Qe.userAgentData;oC(Jl)&&Jl.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{var t;if(Ah=e.platform||"",Mh=e.architecture||"",Nh=e.model||"",xh=e.platformVersion||"",(t=e.fullVersionList)!=null&&t.length){const n=e.fullVersionList[e.fullVersionList.length-1];ua="".concat(n.brand," ").concat(n.version)}}).catch(e=>{});function sC(e){return!("thread_metadata"in e)}function iC(e){return sC(e)?fC(e):e}function aC(e){var n,r;const t=(r=(n=e.contexts)==null?void 0:n.trace)==null?void 0:r.trace_id;return typeof t=="string"&&t.length!==32&&M&&_.log("[Profiling] Invalid traceId: ".concat(t," on profiled event")),typeof t!="string"?"":t}function cC(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError("Cannot construct profiling event envelope without a valid profile. Got ".concat(n," instead."));const o=aC(r),s=iC(n),i=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:pe()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:pe()*1e3;return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||ys,runtime:{name:"javascript",version:P.navigator.userAgent},os:{name:Ah,version:xh,build_number:ua},device:{locale:rC,model:Nh,manufacturer:ua,architecture:Mh,is_emulator:!1},debug_meta:{images:Ph(n.resources)},profile:s,transactions:[{name:r.transaction||"",id:r.event_id||we(),trace_id:o,active_thread_id:qt,relative_start_ns:"0",relative_end_ns:((a-i)*1e6).toFixed(0)}]}}function uC(e,t,n){var i,a,c,u,d,l;if(e==null)throw new TypeError("Cannot construct profiling event envelope without a valid profile. Got ".concat(e," instead."));const r=dC(e),o=t.getOptions(),s=(a=(i=t.getSdkMetadata)==null?void 0:i.call(t))==null?void 0:a.sdk;return{chunk_id:we(),client_sdk:{name:(c=s==null?void 0:s.name)!=null?c:"sentry.javascript.browser",version:(u=s==null?void 0:s.version)!=null?u:"0.0.0"},profiler_id:n||we(),platform:"javascript",version:"2",release:(d=o.release)!=null?d:"",environment:(l=o.environment)!=null?l:"production",debug_meta:{images:Ph(e.resources)},profile:r}}function lC(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};const t=r=>typeof r=="string"&&/^[a-f0-9]{32}$/.test(r);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};const n=e.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:"unknown validation error: ".concat(t)}}}function dC(e){var a;const t=[];for(let c=0;c<e.frames.length;c++){const u=e.frames[c];u&&(t[c]={function:u.name,abs_path:typeof u.resourceId=="number"?e.resources[u.resourceId]:void 0,lineno:u.line,colno:u.column})}const n=[];for(let c=0;c<e.stacks.length;c++){const u=e.stacks[c];if(!u)continue;const d=[];let l=u;for(;l;)d.push(l.frameId),l=l.parentId===void 0?void 0:e.stacks[l.parentId];n[c]=d}const r=Le(),o=typeof performance.timeOrigin=="number"?performance.timeOrigin:r||0,s=o-(r||o),i=[];for(let c=0;c<e.samples.length;c++){const u=e.samples[c];if(!u)continue;const d=(o+(u.timestamp-s))/1e3;i[c]={stack_id:(a=u.stackId)!=null?a:0,thread_id:qt,timestamp:d}}return{frames:t,stacks:n,samples:i,thread_metadata:{[qt]:{name:ps}}}}function Oh(e){return $(e).op==="pageload"}function fC(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[qt]:{name:ps}}},o=e.samples[0];if(!o)return r;const s=o.timestamp,i=Le(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:i||0,c=a-(i||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-s)*Kl).toFixed(0),stack_id:t,thread_id:qt};return}let l=e.stacks[u.stackId];const f=[];for(;l;){f.push(l.frameId);const h=e.frames[l.frameId];h&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:h.name,abs_path:typeof h.resourceId=="number"?e.resources[h.resourceId]:void 0,lineno:h.line,colno:h.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}const p={elapsed_since_start_ns:((u.timestamp+c-s)*Kl).toFixed(0),stack_id:n,thread_id:qt};r.stacks[n]=f,r.samples[d]=p,n++}),r}function pC(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function hC(e){const t=[];return _n(e,(n,r)=>{var o,s;if(r==="transaction")for(let i=1;i<n.length;i++){const a=n[i];(s=(o=a==null?void 0:a.contexts)==null?void 0:o.profile)!=null&&s.profile_id&&t.push(n[i])}}),t}function Ph(e){const t=N(),n=t==null?void 0:t.getOptions(),r=n==null?void 0:n.stackParser;return r?Xg(r,e):[]}function Lh(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(M&&_.warn("[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ".concat(JSON.stringify(e)," of type ").concat(JSON.stringify(typeof e),".")),!1):e===!0||e===!1?!0:e<0||e>1?(M&&_.warn("[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ".concat(e,".")),!1):!0}function mC(e){return e.samples.length<2?(M&&_.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(M&&_.log("[Profiling] Discarding profile because it contains no frames"),!1)}let xc=!1;const Dh=3e4;function gC(e){return typeof e=="function"}function $h(){const e=P.Profiler;if(!gC(e)){M&&_.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(Dh/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch(r){M&&(_.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),_.log("[Profiling] Disabling profiling for current user session.")),xc=!0}}function Xl(e){if(xc)return M&&_.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return M&&_.log("[Profiling] Discarding profile because root span was not sampled."),!1;const t=N(),n=t==null?void 0:t.getOptions();if(!n)return M&&_.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return Lh(r)?r?(r===!0?!0:Math.random()<r)?!0:(M&&_.log("[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ".concat(Number(r),")")),!1):(M&&_.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(M&&_.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function _C(e){if(xc)return M&&_.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(e.profileLifecycle!=="trace")return!1;const t=e.profileSessionSampleRate;return Lh(t)?t?Math.random()<=t:(M&&_.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(M&&_.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function bo(e){return typeof e.profilesSampleRate<"u"}function yC(e,t,n,r){return mC(n)?cC(e,t,n,r):null}const un=new Map;function SC(){return un.size}function bC(e){const t=un.get(e);return t&&un.delete(e),t}function EC(e,t){if(un.set(e,t),un.size>30){const n=un.keys().next().value;n!==void 0&&un.delete(n)}}function vC(e){var t,n,r,o,s,i,a;return!((t=e==null?void 0:e.contexts)!=null&&t.profile)||!e.contexts||(e.contexts.trace={...(r=(n=e.contexts)==null?void 0:n.trace)!=null?r:{},data:{...(i=(s=(o=e.contexts)==null?void 0:o.trace)==null?void 0:s.data)!=null?i:{},"thread.id":qt,"thread.name":ps}},(a=e.spans)==null||a.forEach(c=>{c.data={...c.data||{},"thread.id":qt,"thread.name":ps}})),e}const TC=6e4,IC=3e5;class wC{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1}initialize(t,n){this._profilerId=we(),M&&_.log("[Profiling] Initializing profiler (lifecycle='trace')."),this._client=t,this._sessionSampled=n,t.on("spanStart",r=>{if(!this._sessionSampled){M&&_.log("[Profiling] Session not sampled because of negative sampling decision.");return}if(r!==be(r))return;if(!r.isRecording()){M&&_.log("[Profiling] Discarding profile because root span was not sampled.");return}mn().setContext("profile",{profiler_id:this._profilerId});const o=r.spanContext().spanId;if(!o||this._activeRootSpanIds.has(o))return;this._activeRootSpanIds.add(o);const s=this._activeRootSpanIds.size,i=setTimeout(()=>{this._onRootSpanTimeout(o)},IC);this._rootSpanTimeouts.set(o,i),s===1&&(M&&_.log("[Profiling] Root span with ID ".concat(o," started. Will continue profiling for as long as there are active root spans (currently: ").concat(s,").")),this.start())}),t.on("spanEnd",r=>{if(!this._sessionSampled)return;const o=r.spanContext().spanId;if(!o||!this._activeRootSpanIds.has(o))return;this._activeRootSpanIds.delete(o);const s=this._activeRootSpanIds.size;M&&_.log("[Profiling] Root span with ID ".concat(o," ended. Will continue profiling for as long as there are active root spans (currently: ").concat(s,").")),s===0&&(this._collectCurrentChunk().catch(i=>{M&&_.error("[Profiling] Failed to collect current profile chunk on `spanEnd`:",i)}),this.stop())})}notifyRootSpanActive(t){if(!this._sessionSampled)return;const n=t.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._activeRootSpanIds.add(n);const r=this._activeRootSpanIds.size;r===1&&(M&&_.log("[Profiling] Detected already active root span during setup. Active root spans now:",r),this.start())}start(){if(!this._isRunning){if(this._isRunning=!0,M&&_.log("[Profiling] Started profiling with profile ID:",this._profilerId),this._startProfilerInstance(),!this._profiler){M&&_.log("[Profiling] Stopping trace lifecycle profiling."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}stop(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{M&&_.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}))}_resetProfilerInfo(){this._isRunning=!1,mn().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_startProfilerInstance(){var n;if(((n=this._profiler)==null?void 0:n.stopped)===!1)return;const t=$h();if(!t){M&&_.log("[Profiling] Failed to start JS Profiler in trace lifecycle.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{M&&_.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},TC))}_onRootSpanTimeout(t){if(!this._rootSpanTimeouts.has(t)||(this._rootSpanTimeouts.delete(t),!this._activeRootSpanIds.has(t)))return;M&&_.log("[Profiling] Reached 5-minute timeout for root span ".concat(t,". You likely started a manual root span that never called `.end()`.")),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this.stop()}async _collectCurrentChunk(){const t=this._profiler;if(this._profiler=void 0,!!t)try{const n=await t.stop(),r=uC(n,this._client,this._profilerId),o=lC(r);if("reason"in o){M&&_.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",o.reason);return}this._sendProfileChunk(r),M&&_.log("[Profiling] Collected browser profile chunk.")}catch(n){M&&_.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(t){var a;const n=this._client,r=Ss((a=n.getSdkMetadata)==null?void 0:a.call(n)),o=n.getDsn(),s=n.getOptions().tunnel,i=lt({event_id:we(),sent_at:new Date().toISOString(),...r&&{sdk:r},...!!s&&o&&{dsn:Lt(o)}},[[{type:"profile_chunk"},t]]);n.sendEnvelope(i).then(null,c=>{M&&_.error("Error while sending profile chunk envelope:",c)})}}function Ql(e){let t;Oh(e)&&(t=pe()*1e3);const n=$h();if(!n)return;M&&_.log("[Profiling] started profiling span: ".concat($(e).description));const r=we();let o=null;G().setContext("profile",{profile_id:r,start_timestamp:t});async function s(){if(e&&n){if(o){M&&_.log("[Profiling] profile for:",$(e).description,"already exists, returning early");return}return n.stop().then(u=>{if(i&&(P.clearTimeout(i),i=void 0),M&&_.log("[Profiling] stopped profiling of span: ".concat($(e).description)),!u){M&&_.log("[Profiling] profiler returned null profile for: ".concat($(e).description),"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}o=u,EC(r,u)}).catch(u=>{M&&_.log("[Profiling] error while stopping profiler:",u)})}}let i=P.setTimeout(()=>{M&&_.log("[Profiling] max profile duration elapsed, stopping profiling for:",$(e).description),s()},Dh);const a=e.end.bind(e);function c(){return e?(s().then(()=>{a()},()=>{a()}),e):a()}e.end=c}const kC="BrowserProfiling",RC=(()=>({name:kC,setup(e){const t=e.getOptions();if(!bo(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),bo(t)&&!t.profilesSampleRate){M&&_.log("[Profiling] Profiling disabled, no profiling options found.");return}const n=ye(),r=n&&be(n);if(bo(t)&&t.profileSessionSampleRate!==void 0&&M&&_.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),bo(t))r&&Oh(r)&&Xl(r)&&Ql(r),e.on("spanStart",o=>{o===be(o)&&Xl(o)&&Ql(o)}),e.on("beforeEnvelope",o=>{var a,c;if(!SC())return;const s=hC(o);if(!s.length)return;const i=[];for(const u of s){const d=u==null?void 0:u.contexts,l=(a=d==null?void 0:d.profile)==null?void 0:a.profile_id,f=(c=d==null?void 0:d.profile)==null?void 0:c.start_timestamp;if(typeof l!="string"){M&&_.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!l){M&&_.log("[Profiling] cannot find profile for a span without a profile context");continue}d!=null&&d.profile&&delete d.profile;const p=bC(l);if(!p){M&&_.log("[Profiling] Could not retrieve profile for span: ".concat(l));continue}const h=yC(l,f,p,u);h&&i.push(h)}pC(o,i)});else{const o=_C(t);if(o||M&&_.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),t.profileLifecycle==="trace"){if(!et(t)){M&&_.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}const i=new wC;i.initialize(e,o),r&&i.notifyRootSpanActive(r),P.setTimeout(()=>{const a=ye(),c=a&&be(a);c&&i.notifyRootSpanActive(c)},0)}}},processEvent(e){return vC(e)}})),ix=RC,CC="SpotlightBrowser",AC=((e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:CC,setup:()=>{M&&_.log("Using Sidecar URL",t)},processEvent:n=>MC(n)?null:n,afterAllSetup:n=>{xC(n,t)}}});function xC(e,t){const n=cc("fetch");let r=0;e.on("beforeEnvelope",o=>{if(r>3){_.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:zo(o),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(s=>{s.status>=200&&s.status<400&&(r=0)},s=>{r++,_.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",s)})})}const ax=AC;function MC(e){var t;return!!(e.type==="transaction"&&e.spans&&((t=e.contexts)!=null&&t.trace)&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:n})=>n==null?void 0:n.includes("#sentry-spotlight")))}const cx=()=>({name:"LaunchDarkly",processEvent(e,t,n){return cr(e)}});function ux(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{yn(e,t.value),Sn(e,t.value)}}}const lx=()=>({name:"OpenFeature",processEvent(e,t,n){return cr(e)}});class dx{after(t,n){yn(n.flagKey,n.value),Sn(n.flagKey,n.value)}error(t,n,r){yn(t.flagKey,t.defaultValue),Sn(t.flagKey,t.defaultValue)}}const fx=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){const t=e.prototype;Ne(t,"isEnabled",NC)},processEvent(t,n,r){return cr(t)}});function NC(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(yn(n,r),Sn(n,r)):M&&_.error("[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ".concat(n," (").concat(typeof n,"), result: ").concat(r," (").concat(typeof r,")")),r}}const px=(({growthbookClass:e})=>mS({growthbookClass:e})),hx=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{yn(n.gate.name,n.gate.value),Sn(n.gate.name,n.gate.value)})},processEvent(t,n,r){return cr(t)}});async function mx(){const e=N();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await Dg(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch(t){return"sentry-unreachable"}}const OC="WebWorker",gx=({worker:e})=>({name:OC,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>Zl(t))},addWorker:t=>Zl(t)});function Zl(e){e.addEventListener("message",t=>{LC(t.data)&&(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(M&&_.log("Sentry debugId web worker message received",t.data),P._sentryDebugIds={...t.data._sentryDebugIds,...P._sentryDebugIds}),t.data._sentryWorkerError&&(M&&_.log("Sentry worker rejection message received",t.data._sentryWorkerError),PC(t.data._sentryWorkerError)))})}function PC(e){const t=N();if(!t)return;const n=t.getOptions().stackParser,r=t.getOptions().attachStacktrace,o=e.reason,s=Kt(o)?vp(o):xs(n,o,void 0,r,!0);s.level="error",e.filename&&(s.contexts={...s.contexts,worker:{filename:e.filename}}),Lr(s,{originalException:o,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),M&&_.log("Captured worker unhandled rejection",o)}function _x({self:e}){var t;e.postMessage({_sentryMessage:!0,_sentryDebugIds:(t=e._sentryDebugIds)!=null?t:void 0}),e.addEventListener("unhandledrejection",n=>{var s;const o={reason:Ep(n),filename:(s=e.location)==null?void 0:s.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:o}),M&&_.log("[Sentry Worker] Forwarding unhandled rejection to parent",o)}),M&&_.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function LC(e){if(!ht(e)||e._sentryMessage!==!0)return!1;const t="_sentryDebugIds"in e,n="_sentryWorkerError"in e;return!(!t&&!n||t&&!(ht(e._sentryDebugIds)||e._sentryDebugIds===void 0)||n&&!ht(e._sentryWorkerError))}function yx(e){const t={...e};return Sf(t,"react"),Jd("react",{version:Ce.version}),lI(t)}function DC(e){const t=e.match(/^([^.]+)/);return t!==null&&parseInt(t[0])>=17}function $C(e,t){const n=new WeakSet;function r(o,s){if(!n.has(o)){if(o.cause)return n.add(o),r(o.cause,s);o.cause=s}}r(e,t)}function Fh(e,{componentStack:t},n){if(DC(Ce.version)&&wt(e)&&t){const r=new Error(e.message);r.name="React ErrorBoundary ".concat(e.name),r.stack=t,$C(e,r)}return Ye(r=>(r.setContext("react",{componentStack:t}),xe(e,n)))}function Sx(e){return(t,n)=>{const r=!!e,o=Fh(t,n,{mechanism:{handled:r,type:"auto.function.react.error_handler"}});r&&e(t,n,o)}}const Bh="ui.react.render",FC="ui.react.update",Uh="ui.react.mount";var vi={exports:{}},re={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ed;function BC(){if(ed)return re;ed=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,l=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,h=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,g=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function I(S){if(typeof S=="object"&&S!==null){var w=S.$$typeof;switch(w){case t:switch(S=S.type,S){case c:case u:case r:case s:case o:case l:return S;default:switch(S=S&&S.$$typeof,S){case a:case d:case h:case p:case i:return S;default:return w}}case n:return w}}}function T(S){return I(S)===u}return re.AsyncMode=c,re.ConcurrentMode=u,re.ContextConsumer=a,re.ContextProvider=i,re.Element=t,re.ForwardRef=d,re.Fragment=r,re.Lazy=h,re.Memo=p,re.Portal=n,re.Profiler=s,re.StrictMode=o,re.Suspense=l,re.isAsyncMode=function(S){return T(S)||I(S)===c},re.isConcurrentMode=T,re.isContextConsumer=function(S){return I(S)===a},re.isContextProvider=function(S){return I(S)===i},re.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},re.isForwardRef=function(S){return I(S)===d},re.isFragment=function(S){return I(S)===r},re.isLazy=function(S){return I(S)===h},re.isMemo=function(S){return I(S)===p},re.isPortal=function(S){return I(S)===n},re.isProfiler=function(S){return I(S)===s},re.isStrictMode=function(S){return I(S)===o},re.isSuspense=function(S){return I(S)===l},re.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===r||S===u||S===s||S===o||S===l||S===f||typeof S=="object"&&S!==null&&(S.$$typeof===h||S.$$typeof===p||S.$$typeof===i||S.$$typeof===a||S.$$typeof===d||S.$$typeof===g||S.$$typeof===y||S.$$typeof===b||S.$$typeof===m)},re.typeOf=I,re}var td;function UC(){return td||(td=1,vi.exports=BC()),vi.exports}var Ti,nd;function HC(){if(nd)return Ti;nd=1;var e=UC(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=r,s[e.Memo]=o;function i(h){return e.isMemo(h)?o:s[h.$$typeof]||t}var a=Object.defineProperty,c=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,f=Object.prototype;function p(h,m,g){if(typeof m!="string"){if(f){var y=l(m);y&&y!==f&&p(h,y,g)}var b=c(m);u&&(b=b.concat(u(m)));for(var I=i(h),T=i(m),S=0;S<b.length;++S){var w=b[S];if(!n[w]&&!(g&&g[w])&&!(T&&T[w])&&!(I&&I[w])){var E=d(m,w);try{a(h,w,E)}catch(R){}}}}return h}return Ti=p,Ti}var Hh=HC();const Wh=rm(Hh),WC=om({__proto__:null,default:Wh},[Hh]),Hs=Wh||WC,jC="unknown";class jh extends Ce.Component{constructor(t){super(t);const{name:n,disabled:r=!1}=this.props;r||(this._mountSpan=at({name:"<".concat(n,">"),onlyIfParent:!0,op:Uh,attributes:{[Q]:"auto.ui.react.profiler","ui.component_name":n}}))}componentDidMount(){this._mountSpan&&this._mountSpan.end()}shouldComponentUpdate({updateProps:t,includeUpdates:n=!0}){if(n&&this._mountSpan&&t!==this.props.updateProps){const r=Object.keys(t).filter(o=>t[o]!==this.props.updateProps[o]);if(r.length>0){const o=pe();this._updateSpan=Gn(this._mountSpan,()=>at({name:"<".concat(this.props.name,">"),onlyIfParent:!0,op:FC,startTime:o,attributes:{[Q]:"auto.ui.react.profiler","ui.component_name":this.props.name,"ui.react.changed_props":r}}))}}return!0}componentDidUpdate(){this._updateSpan&&(this._updateSpan.end(),this._updateSpan=void 0)}componentWillUnmount(){const t=pe(),{name:n,includeRender:r=!0}=this.props;if(this._mountSpan&&r){const o=$(this._mountSpan).timestamp;Gn(this._mountSpan,()=>{const s=at({onlyIfParent:!0,name:"<".concat(n,">"),op:Bh,startTime:o,attributes:{[Q]:"auto.ui.react.profiler","ui.component_name":n}});s&&s.end(t)})}}render(){return this.props.children}}Object.assign(jh,{defaultProps:{disabled:!1,includeRender:!0,includeUpdates:!0}});function bx(e,t){const n=(t==null?void 0:t.name)||e.displayName||e.name||jC,r=o=>Ce.createElement(jh,{...t,name:n,updateProps:o},Ce.createElement(e,{...o}));return r.displayName="profiler(".concat(n,")"),Hs(r,e),r}function Ex(e,t={disabled:!1,hasRenderSpan:!0}){const[n]=Ce.useState(()=>{if(!(t!=null&&t.disabled))return at({name:"<".concat(e,">"),onlyIfParent:!0,op:Uh,attributes:{[Q]:"auto.ui.react.profiler","ui.component_name":e}})});Ce.useEffect(()=>(n&&n.end(),()=>{if(n&&t.hasRenderSpan){const r=$(n).timestamp,o=pe(),s=at({name:"<".concat(e,">"),onlyIfParent:!0,op:Bh,startTime:r,attributes:{[Q]:"auto.ui.react.profiler","ui.component_name":e}});s&&s.end(o)}}),[])}const kn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,zC="unknown",Ii={componentStack:null,error:null,eventId:null};class qC extends Ce.Component{constructor(t){super(t),this.state=Ii,this._openFallbackReportDialog=!0;const n=N();n&&t.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=n.on("afterSendEvent",r=>{!r.type&&this._lastEventId&&r.event_id===this._lastEventId&&al({...t.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(t,n){const{componentStack:r}=n,{beforeCapture:o,onError:s,showDialog:i,dialogOptions:a}=this.props;Ye(c=>{o&&o(c,t,r);const u=this.props.handled!=null?this.props.handled:!!this.props.fallback,d=Fh(t,n,{mechanism:{handled:u,type:"auto.function.react.error_boundary"}});s&&s(t,r,d),i&&(this._lastEventId=d,this._openFallbackReportDialog&&al({...a,eventId:d})),this.setState({error:t,componentStack:r,eventId:d})})}componentDidMount(){const{onMount:t}=this.props;t&&t()}componentWillUnmount(){const{error:t,componentStack:n,eventId:r}=this.state,{onUnmount:o}=this.props;o&&(this.state===Ii?o(null,null,null):o(t,n,r)),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}resetErrorBoundary(){const{onReset:t}=this.props,{error:n,componentStack:r,eventId:o}=this.state;t&&t(n,r,o),this.setState(Ii)}render(){const{fallback:t,children:n}=this.props,r=this.state;if(r.componentStack===null)return typeof n=="function"?n():n;const o=typeof t=="function"?Ce.createElement(t,{error:r.error,componentStack:r.componentStack,resetError:()=>this.resetErrorBoundary(),eventId:r.eventId}):t;return Ce.isValidElement(o)?o:(t&&kn&&_.warn("fallback did not produce a valid ReactElement"),null)}}function vx(e,t){const n=e.displayName||e.name||zC,r=Ce.memo(o=>Ce.createElement(qC,{...t},Ce.createElement(e,{...o})));return r.displayName="errorBoundary(".concat(n,")"),Hs(r,e),r}const GC="redux.action",VC="info",YC={attachReduxState:!0,actionTransformer:e=>e,stateTransformer:e=>e||null};function Tx(e){const t={...YC,...e};return n=>(r,o)=>{t.attachReduxState&&mn().addEventProcessor((a,c)=>{try{a.type===void 0&&a.contexts.state.state.type==="redux"&&(c.attachments=[...c.attachments||[],{filename:"redux_state.json",data:JSON.stringify(a.contexts.state.state.value)}])}catch(u){}return a});function s(a){return(c,u)=>{const d=a(c,u),l=G(),f=t.actionTransformer(u);typeof f<"u"&&f!==null&&St({category:GC,data:f,type:VC});const p=t.stateTransformer(d);if(typeof p<"u"&&p!==null){const m=N(),g=m==null?void 0:m.getOptions(),y=(g==null?void 0:g.normalizeDepth)||3,b={state:{type:"redux",value:p}};Ae(b,"__sentry_override_normalization_depth__",3+y),l.setContext("state",b)}else l.setContext("state",null);const{configureScopeWithState:h}=t;return typeof h=="function"&&h(l,d),d}}const i=n(s(r),o);return i.replaceReducer=new Proxy(i.replaceReducer,{apply:function(a,c,u){a.apply(c,[s(u[0])])}}),i}}function Ix(e){const t=Kr({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,match:o,instrumentPageLoad:s=!0,instrumentNavigation:i=!0}=e;return{...t,afterAllSetup(a){t.afterAllSetup(a),s&&P.location&&rd(r,P.location,o,(c,u="url")=>{Jr(a,{name:c,attributes:{[Ie]:"pageload",[Q]:"auto.pageload.react.reactrouter_v3",[fe]:u}})}),i&&n.listen&&n.listen(c=>{(c.action==="PUSH"||c.action==="POP")&&rd(r,c,o,(u,d="url")=>{Xr(a,{name:u,attributes:{[Ie]:"navigation",[Q]:"auto.navigation.react.reactrouter_v3",[fe]:d}})})})}}}function rd(e,t,n,r){let o=t.pathname;n({location:t,routes:e},(s,i,a)=>{if(s||!a)return r(o);const c=KC(a.routes||[]);return c.length===0||c==="/*"?r(o):(o=c,r(o,"route"))})}function KC(e){var r;if(!Array.isArray(e)||e.length===0)return"";const t=e.filter(o=>!!o.path);let n=-1;for(let o=t.length-1;o>=0;o--)if((r=t[o].path)!=null&&r.startsWith("/")){n=o;break}return t.slice(n).reduce((o,{path:s})=>{const i=o==="/"||o===""?s:"/".concat(s);return"".concat(o).concat(i)},"")}function wx(e,t={}){const n=e,r=Kr({...t,instrumentNavigation:!1,instrumentPageLoad:!1}),{instrumentPageLoad:o=!0,instrumentNavigation:s=!0}=t;return{...r,afterAllSetup(i){r.afterAllSetup(i);const a=P.location;if(o&&a){const c=n.matchRoutes(a.pathname,n.options.parseSearch(a.search),{preload:!1,throwOnError:!1}),u=c[c.length-1];Jr(i,{name:u?u.routeId:a.pathname,attributes:{[Ie]:"pageload",[Q]:"auto.pageload.react.tanstack_router",[fe]:u?"route":"url",...od(u)}})}s&&n.subscribe("onBeforeNavigate",c=>{var h;if(c.toLocation.state===((h=c.fromLocation)==null?void 0:h.state))return;const u=n.matchRoutes(c.toLocation.pathname,c.toLocation.search,{preload:!1,throwOnError:!1}),d=u[u.length-1],l=P.location,f=Xr(i,{name:d?d.routeId:l.pathname,attributes:{[Ie]:"navigation",[Q]:"auto.navigation.react.tanstack_router",[fe]:d?"route":"url"}}),p=n.subscribe("onResolved",m=>{if(p(),f){const g=n.matchRoutes(m.toLocation.pathname,m.toLocation.search,{preload:!1,throwOnError:!1}),y=g[g.length-1];y&&(f.updateName(y.routeId),f.setAttribute(fe,"route"),f.setAttributes(od(y)))}})})}}}function od(e){if(!e)return{};const t={};return Object.entries(e.params).forEach(([n,r])=>{t["url.path.params.".concat(n)]=r,t["url.path.parameter.".concat(n)]=r,t["params.".concat(n)]=r}),t}function kx(e){const t=Kr({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,matchPath:o,instrumentPageLoad:s=!0,instrumentNavigation:i=!0}=e;return{...t,afterAllSetup(a){t.afterAllSetup(a),zh(a,s,i,n,"reactrouter_v4",r,o)}}}function Rx(e){const t=Kr({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{history:n,routes:r,matchPath:o,instrumentPageLoad:s=!0,instrumentNavigation:i=!0}=e;return{...t,afterAllSetup(a){t.afterAllSetup(a),zh(a,s,i,n,"reactrouter_v5",r,o)}}}function zh(e,t,n,r,o,s=[],i){function a(){if(r.location)return r.location.pathname;if(P.location)return P.location.pathname}function c(u){if(s.length===0||!i)return[u,"url"];const d=qh(s,u,i);for(const l of d)if(l.match.isExact)return[l.match.path,"route"];return[u,"url"]}if(t){const u=a();if(u){const[d,l]=c(u);Jr(e,{name:d,attributes:{[Ie]:"pageload",[Q]:"auto.pageload.react.".concat(o),[fe]:l}})}}n&&r.listen&&r.listen((u,d)=>{if(d&&(d==="PUSH"||d==="POP")){const[l,f]=c(u.pathname);Xr(e,{name:l,attributes:{[Ie]:"navigation",[Q]:"auto.navigation.react.".concat(o),[fe]:f}})}})}function qh(e,t,n,r=[]){return e.some(o=>{const s=o.path?n(t,o):r.length?r[r.length-1].match:JC(t);return s&&(r.push({route:o,match:s}),o.routes&&qh(o.routes,t,n,r)),!!s}),r}function JC(e){return{path:"/",url:"/",params:{},isExact:e==="/"}}function Cx(e){const t=e.displayName||e.name,n=r=>{var o;if((o=r==null?void 0:r.computedMatch)!=null&&o.isExact){const s=r.computedMatch.path,i=XC();G().setTransactionName(s),i&&(i.updateName(s),i.setAttribute(fe,"route"))}return Ce.createElement(e,{...r})};return n.displayName="sentryRoute(".concat(t,")"),Hs(n,e),n}function XC(){const e=ye(),t=e&&be(e);if(!t)return;const n=$(t).op;return n==="navigation"||n==="pageload"?t:void 0}function QC(e,t,n,r){const o=new Proxy(e,{apply(s,i,a){const c=s.apply(i,a);return ZC(c,t,n,r),c}});return Ae(o,"__sentry_proxied__",!0),o}function ZC(e,t,n,r){vn(e)?e.then(o=>{Array.isArray(o)&&r(o,t)}).catch(o=>{kn&&_.warn("Error resolving async handler '".concat(n,"' for route"),t,o)}):Array.isArray(e)&&r(e,t)}function Ws(e,t){if(e.handle&&typeof e.handle=="object")for(const n of Object.keys(e.handle)){const r=e.handle[n];typeof r=="function"&&!r.__sentry_proxied__&&(e.handle[n]=QC(r,e,n,t))}if(Array.isArray(e.children))for(const n of e.children)Ws(n,t)}let Mc,Bn=!1;function eA(e,t=!1){Mc=e,Bn=t}function tA(e){return rA(e.route.path||"")}function nA(e){return e.params["*"]||""}function rA(e){return e[e.length-1]==="*"?e.slice(0,-1):e}function Hn(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function Gh(e){return e.endsWith("*")}function sd(e,t){var n;return Gh(e)&&!!((n=t.route.children)!=null&&n.length)||!1}function oA(e){var t;return!!(!e.children&&e.element&&((t=e.path)!=null&&t.endsWith("/*")))}function sA(e,t,n){const r=e&&e.length>0?e:Bn?hs(t,n):t;let o=r.slice(-2)==="/*"?r.slice(0,-2):r;return o.length>1&&o[o.length-1]==="/"&&(o=o.slice(0,-1)),[o,"route"]}function id(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}function hs(e,t){if(!t||t==="/"||!e.toLowerCase().startsWith(t.toLowerCase()))return e;const n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?e:e.slice(n)||"/"}function ms(e){return e[0]==="/"?e:"/".concat(e)}function Vh(e,t){const n=Mc(e,t);if(!n||n.length===0)return"";for(const r of n)if(r.route.path&&r.route.path!=="*"){const o=tA(r),s=hs(t.pathname,ms(r.pathnameBase));return t.pathname===s?Hn(s):Hn(Hn(o||"")+ms(Vh(e.filter(i=>i!==r.route),{pathname:s})))}return""}function iA(e,t){const n=Mc(t,e);if(n){for(const r of n)if(oA(r.route)&&nA(r))return!0}return!1}function aA(e,t,n,r=""){if(!e||e.length===0)return[Bn?hs(t.pathname,r):t.pathname,"url"];let o="";if(n)for(const i of n){const a=i.route;if(a){if(a.index)return sA(o,i.pathname,r);const c=a.path;if(c&&!sd(c,i)){const u=c[0]==="/"||o[o.length-1]==="/"?c:"/".concat(c);if(o=Hn(o)+ms(u),Hn(t.pathname)===Hn(r+i.pathname))return id(o)!==id(i.pathname)&&!Gh(o)?[(Bn?"":r)+u,"route"]:(sd(o,i)&&(o=o.slice(0,-1)),[(Bn?"":r)+o,"route"])}}}return[Bn?hs(t.pathname,r):t.pathname||"","url"]}function js(e,t,n,r,o=""){let s,i="url";const a=iA(e,n);return a&&(s=ms(Vh(n,e)),i="route"),(!a||!s)&&([s,i]=aA(t,e,r,o)),[s||e.pathname,i]}let Gt,Vt,Yt,$o,tt,zs=!1;const Yh=new WeakSet;function cA(e,t){const n=t.children||[],r=e.filter(o=>!n.some(s=>s===o||o.path&&s.path===o.path||o.id&&s.id===o.id));r.length>0&&(t.children=[...n,...r])}const Pe=new Set;function Nc(e,t,n=null){e.forEach(o=>{Pe.add(o),zs&&Ws(o,Nc)}),t&&cA(e,t);const r=bt();if(r){const o=$(r).op;let s=n;if(!s&&typeof P<"u"){const i=P.location;i&&(s={pathname:i.pathname})}s&&(o==="pageload"?Zr({activeRootSpan:r,location:{pathname:s.pathname},routes:Array.from(Pe),allRoutes:Array.from(Pe)}):o==="navigation"&&la(r,s,Array.from(Pe),!1,tt))}}function la(e,t,n,r=!1,o){if(!(!r&&(e==null?void 0:e.__sentry_navigation_name_set__))){const i=o(n,t),[a,c]=js(t,n,n,i||[],""),u=$(e);a&&!u.timestamp&&(e.updateName(a),e.setAttribute(fe,c),Ae(e,"__sentry_navigation_name_set__",!0))}}function Kh(e,t){return!Gt||!Vt||!Yt||!tt?(kn&&_.warn("reactRouterV".concat(t,"Instrumentation was unable to wrap the `createRouter` function because of one or more missing parameters.")),e):function(n,r){if(Qr(n),zs)for(const l of n)Ws(l,Nc);const o=Zh(r),s=e(n,o),i=r==null?void 0:r.basename,a=bt();let c=!1,u=!!a&&$(a).op==="pageload",d=!1;return s.state.historyAction==="POP"&&a&&Zr({activeRootSpan:a,location:s.state.location,routes:n,basename:i,allRoutes:Array.from(Pe)}),s.subscribe(l=>{if(!c){const p=bt();p&&$(p).op==="pageload"?u=!0:u&&(l.historyAction==="POP"&&!d?d=!0:c=!0)}if(l.historyAction==="PUSH"||l.historyAction==="POP"&&c){const p=()=>{qs({location:l.location,routes:n,navigationType:l.historyAction,version:t,basename:i,allRoutes:Array.from(Pe)})};l.navigation.state!=="idle"?requestAnimationFrame(p):p()}}),s}}function Jh(e,t){return!Gt||!Vt||!Yt||!tt?(kn&&_.warn("reactRouterV".concat(t,"Instrumentation was unable to wrap the `createMemoryRouter` function because of one or more missing parameters.")),e):function(n,r){if(Qr(n),zs)for(const y of n)Ws(y,Nc);const o=Zh(r,!0),s=e(n,o),i=r==null?void 0:r.basename;let a;const c=r==null?void 0:r.initialEntries,u=r==null?void 0:r.initialIndex,d=c&&c.length===1,l=u!==void 0&&c&&c[u];a=d?c[0]:l?c[u]:void 0;const f=a?typeof a=="string"?{pathname:a}:a:s.state.location,p=bt();s.state.historyAction==="POP"&&p&&Zr({activeRootSpan:p,location:f,routes:n,basename:i,allRoutes:Array.from(Pe)});let h=!1,m=!!p&&$(p).op==="pageload",g=!1;return s.subscribe(y=>{if(!h){const T=bt();T&&$(T).op==="pageload"?m=!0:m&&(y.historyAction==="POP"&&!g?g=!0:h=!0)}const b=y.location;if(y.historyAction==="PUSH"||y.historyAction==="POP"&&h){const T=()=>{qs({location:b,routes:n,navigationType:y.historyAction,version:t,basename:i,allRoutes:Array.from(Pe)})};y.navigation.state!=="idle"?requestAnimationFrame(T):T()}}),s}}function Xh(e,t){const n=Kr({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:r,useLocation:o,useNavigationType:s,createRoutesFromChildren:i,matchRoutes:a,stripBasename:c,enableAsyncRouteHandlers:u=!1,instrumentPageLoad:d=!0,instrumentNavigation:l=!0}=e;return{...n,setup(f){n.setup(f),Gt=r,Vt=o,Yt=s,tt=a,$o=i,zs=u,eA(a,c||!1)},afterAllSetup(f){var h;n.afterAllSetup(f);const p=(h=P.location)==null?void 0:h.pathname;d&&p&&Jr(f,{name:p,attributes:{[fe]:"url",[Ie]:"pageload",[Q]:"auto.pageload.react.reactrouter_v".concat(t)}}),l&&Yh.add(f)}}}function Qh(e,t){if(!Gt||!Vt||!Yt||!tt)return kn&&_.warn("reactRouterV6Instrumentation was unable to wrap `useRoutes` because of one or more missing parameters."),e;const n=r=>{const o=Ce.useRef(!0),{routes:s,locationArg:i}=r,a=e(s,i),c=Vt(),u=Yt(),d=typeof i=="string"||i!=null&&i.pathname?i:c;return Gt(()=>{const l=typeof d=="string"?{pathname:d}:d;o.current?(Qr(s),Zr({activeRootSpan:bt(),location:l,routes:s,allRoutes:Array.from(Pe)}),o.current=!1):qs({location:l,routes:s,navigationType:u,version:t,allRoutes:Array.from(Pe)})},[u,d]),a};return(r,o)=>Ce.createElement(n,{routes:r,locationArg:o})}function Zh(e,t=!1){if(!e||!("patchRoutesOnNavigation"in e)||typeof e.patchRoutesOnNavigation!="function")return e||{};const n=e.patchRoutesOnNavigation;return{...e,patchRoutesOnNavigation:async r=>{var a;const o=r==null?void 0:r.path;if(!t){const c=r==null?void 0:r.patch;c&&(r.patch=(u,d)=>{Qr(d);const l=bt();return l&&$(l).op==="navigation"&&la(l,{pathname:o,search:"",hash:"",state:null,key:"default"},Array.from(Pe),!0,tt),c(u,d)})}const s=await n(r),i=bt();if(i&&$(i).op==="navigation"){let c;t?c=o:c=o||((a=P.location)==null?void 0:a.pathname),c&&la(i,{pathname:c,search:"",hash:"",state:null,key:"default"},Array.from(Pe),!1,tt)}return s}}}function qs(e){const{location:t,routes:n,navigationType:r,version:o,matches:s,basename:i,allRoutes:a}=e,c=Array.isArray(s)?s:tt(n,t,i),u=N();if(!u||!Yh.has(u))return;const d=bt();if(!(d&&$(d).op==="pageload"&&r==="POP")&&(r==="PUSH"||r==="POP")&&c){const[l,f]=js(t,n,a||n,c,i),p=ye(),h=p&&$(p);if(!((h==null?void 0:h.op)==="navigation")){const g=Xr(u,{name:l,attributes:{[fe]:f,[Ie]:"navigation",[Q]:"auto.navigation.react.reactrouter_v".concat(o)}});g&&lA(g,t,n,i,a)}}}function Qr(e){e.forEach(t=>{em(t).forEach(r=>{Pe.add(r)})})}function em(e,t=new Set){return t.has(e)||(t.add(e),e.children&&!e.index&&e.children.forEach(n=>{em(n,t).forEach(o=>{t.add(o)})})),t}function Zr({activeRootSpan:e,location:t,routes:n,matches:r,basename:o,allRoutes:s}){const i=Array.isArray(r)?r:tt(s||n,t,o);if(i){const[a,c]=js(t,n,s||n,i,o);G().setTransactionName(a||"/"),e&&(e.updateName(a),e.setAttribute(fe,c),uA(e,t,n,o,s))}}function tm(e,t,n,r,o,s){const i="__sentry_".concat(s,"_end_patched__");if((e==null?void 0:e[i])||!e.end)return;const c=e.end.bind(e);e.end=function(...d){var l;try{const f=$(e);if(((l=f.data)==null?void 0:l[fe])!=="route"){const h=Array.from(Pe),m=tt(h.length>0?h:n,t,r);if(m){const[g,y]=js(t,n,h.length>0?h:n,m,r);g&&(s==="pageload"||!f.timestamp)&&(e.updateName(g),e.setAttribute(fe,y))}}}catch(f){kn&&_.warn("Error updating span details before ending: ".concat(f))}return c(...d)},Ae(e,i,!0)}function uA(e,t,n,r,o){tm(e,t,n,r,o,"pageload")}function lA(e,t,n,r,o){tm(e,t,n,r,o,"navigation")}function nm(e,t){if(!Gt||!Vt||!Yt||!$o||!tt)return kn&&_.warn("reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.\n      useEffect: ".concat(Gt,". useLocation: ").concat(Vt,". useNavigationType: ").concat(Yt,".\n      createRoutesFromChildren: ").concat($o,". matchRoutes: ").concat(tt,".")),e;const n=r=>{const o=Ce.useRef(!0),s=Vt(),i=Yt();return Gt(()=>{const a=$o(r.children);o.current?(Qr(a),Zr({activeRootSpan:bt(),location:s,routes:a,allRoutes:Array.from(Pe)}),o.current=!1):qs({location:s,routes:a,navigationType:i,version:t,allRoutes:Array.from(Pe)})},[s,i]),Ce.createElement(e,{...r})};return Hs(n,e),n}function bt(){const e=ye(),t=e?be(e):void 0;if(!t)return;const n=$(t).op;return n==="navigation"||n==="pageload"?t:void 0}function Ax(e){return Xh(e,"6")}function xx(e){return Qh(e,"6")}function Mx(e){return Kh(e,"6")}function Nx(e){return Jh(e,"6")}function Ox(e){return nm(e,"6")}function Px(e){return Xh(e,"7")}function Lx(e){return nm(e,"7")}function Dx(e){return Kh(e,"7")}function $x(e){return Jh(e,"7")}function Fx(e){return Qh(e,"7")}export{Bv as BrowserClient,qC as ErrorBoundary,dx as OpenFeatureIntegrationHook,jh as Profiler,jt as SDK_VERSION,Ie as SEMANTIC_ATTRIBUTE_SENTRY_OP,Q as SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,ga as SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,fe as SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,yt as Scope,P as WINDOW,St as addBreadcrumb,l_ as addEventProcessor,au as addIntegration,xT as breadcrumbsIntegration,HT as browserApiErrorsIntegration,ix as browserProfilingIntegration,VT as browserSessionIntegration,Kr as browserTracingIntegration,ux as buildLaunchDarklyFlagUsedHandler,kA as captureConsoleIntegration,Lr as captureEvent,xe as captureException,TS as captureFeedback,Oi as captureMessage,Fh as captureReactException,ou as captureSession,hT as chromeStackLineParser,vA as close,PA as consoleLoggingIntegration,XA as contextLinesIntegration,mA as continueTrace,DA as createConsolaReporter,Tx as createReduxEnhancer,G_ as createTransport,GA as createUserFeedbackEnvelope,My as dedupeIntegration,kh as defaultRequestInstrumentationOptions,wT as defaultStackLineParsers,kT as defaultStackParser,mx as diagnoseSdkConnectivity,Xd as endSession,py as eventFiltersIntegration,Pv as eventFromException,Lv as eventFromMessage,Za as exceptionFromError,RA as extraErrorDataIntegration,NA as featureFlagsIntegration,HA as feedbackAsyncIntegration,WA as feedbackIntegration,WA as feedbackSyncIntegration,EA as flush,VA as forceLoad,ly as functionToStringIntegration,yT as geckoStackLineParser,ye as getActiveSpan,N as getClient,G as getCurrentScope,uI as getDefaultIntegrations,UA as getFeedback,mn as getGlobalScope,ke as getIsolationScope,tx as getReplay,be as getRootSpan,To as getSpanDescendants,Wm as getSpanStatusFromHttpCode,bf as getTraceData,JT as globalHandlersIntegration,QA as graphqlClientIntegration,px as growthbookIntegration,JA as httpClientIntegration,tI as httpContextIntegration,hy as inboundFiltersIntegration,yx as init,FA as instrumentAnthropicAiClient,BA as instrumentGoogleGenAIClient,$A as instrumentOpenAiClient,PR as instrumentOutgoingRequests,eS as instrumentSupabaseClient,u_ as isEnabled,TA as isInitialized,c_ as lastEventId,cx as launchDarklyIntegration,kv as lazyLoadIntegration,iI as linkedErrorsIntegration,OA as logger,sx as makeBrowserOfflineTransport,Sp as makeFetchTransport,IA as makeMultiplexedTransport,LA as metrics,wA as moduleMetadataIntegration,YA as onLoad,lx as openFeatureIntegration,zA as opera10StackLineParser,qA as opera11StackLineParser,ty as parameterize,Sx as reactErrorHandler,Ix as reactRouterV3BrowserTracingIntegration,kx as reactRouterV4BrowserTracingIntegration,Rx as reactRouterV5BrowserTracingIntegration,Ax as reactRouterV6BrowserTracingIntegration,Px as reactRouterV7BrowserTracingIntegration,lg as registerSpanErrorInstrumentation,_x as registerWebWorker,nx as replayCanvasIntegration,ex as replayIntegration,rx as reportPageLoaded,KA as reportingObserverIntegration,CA as rewriteFramesIntegration,xE as sendFeedback,ox as setActiveSpanInBrowser,Jd as setContext,W_ as setCurrentClient,_A as setExtra,gA as setExtras,Uo as setHttpStatus,Mg as setMeasurement,SA as setTag,yA as setTags,bA as setUser,al as showReportDialog,hA as spanToBaggageHeader,$ as spanToJSON,sg as spanToTraceHeader,ax as spotlightBrowserIntegration,Xr as startBrowserTracingNavigationSpan,Jr as startBrowserTracingPageLoadSpan,at as startInactiveSpan,$g as startNewTrace,ru as startSession,ar as startSpan,Go as startSpanManual,hx as statsigIntegration,AA as supabaseIntegration,Dg as suppressTracing,wx as tanstackRouterBrowserTracingIntegration,MA as thirdPartyErrorFilterIntegration,fx as unleashIntegration,pA as updateSpanName,Ex as useProfiler,gx as webWorkerIntegration,jA as winjsStackLineParser,Gn as withActiveSpan,vx as withErrorBoundary,fA as withIsolationScope,bx as withProfiler,Ye as withScope,Ox as withSentryReactRouterV6Routing,Lx as withSentryReactRouterV7Routing,Cx as withSentryRouting,Mx as wrapCreateBrowserRouterV6,Dx as wrapCreateBrowserRouterV7,Nx as wrapCreateMemoryRouterV6,$x as wrapCreateMemoryRouterV7,xx as wrapUseRoutesV6,Fx as wrapUseRoutesV7,xA as zodErrorsIntegration};
